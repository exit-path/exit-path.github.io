/*! For license information please see game.aff933c3.js.LICENSE.txt */
(self.webpackChunk_exit_path_game=self.webpackChunk_exit_path_game||[]).push([[757],{7214:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/06f38b818fcab77d1d42.jpeg"},1558:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/9b9de51f0667f69cf909.jpeg"},6344:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/0680ec675cdeeb9d32e1.jpeg"},5708:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/cd3a8d3796fe91d3b9eb.jpeg"},1913:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/669719f066b4da6060ae.png"},4916:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/04186ecf8339a75eb994.png"},1862:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/88fc994ea2fb1d5e322c.png"},2764:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/bfe86a26433ba4c17ebc.png"},8365:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/e1b84000c55403a11c2e.png"},9833:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/ebce029b770e9eca691b.mp3"},1494:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/3863c9837c63e1337bf5.mp3"},8453:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/08e4d4f58ddfb292dca1.mp3"},994:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/e9dec5ba32941ebe6f86.mp3"},3278:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/c64fbe7febf6e920b468.mp3"},2489:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/6d92bc78ddc6e55c1abc.mp3"},5790:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/2c8364bde7908cb17bda.mp3"},9347:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/b9f7020aebec79f40607.mp3"},6837:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/788e1d4528eebbd2cfbb.mp3"},8687:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/aafe39605816b5f38db1.mp3"},3023:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/868570158e7bb98ee98b.mp3"},9542:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/2d38ed911a47c99647f3.mp3"},3402:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/4c9dc1713eda08cda618.mp3"},3289:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/a659a62500eb5a9751fe.mp3"},2874:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/ee3a60cbb5d78571fce8.mp3"},1919:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/064d1ec07dbef411cf4e.mp3"},5082:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/f9856c84148141ead986.mp3"},6946:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/4e31a839ede8fe824108.mp3"},8062:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/567555375bf73b089c86.mp3"},5502:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/3fa54c06dec2d5cd3e78.mp3"},4825:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/d34739c45f45e9108c78.mp3"},8733:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/de85f1a7c8c45b2fd7d3.mp3"},2477:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/3aa008ec01648e31c404.mp3"},6011:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/aecd8a2f0b7acca73329.mp3"},9635:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/5d72e69442d206f00698.mp3"},2889:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/9380529c7aa0d240629e.mp3"},654:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/5d1ce30a5f63256208b0.mp3"},3648:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/aba67dd0d75cb8c8beb3.mp3"},1983:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/9ab9ebf11c990d9fd79d.mp3"},1957:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/25da7a62f8c9415d2999.mp3"},7391:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/925141732bb605373906.mp3"},3090:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/b1245e3dc8baca6d1e7f.mp3"},4913:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/effef74669bdb0f3d5eb.mp3"},7416:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/7b39b11296c75eb18421.mp3"},81:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/d2798a35a109afc27000.mp3"},5534:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/563d21ee02e609bbd5d0.png"},1625:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/4d9d5da37cc5ebea91f0.jpeg"},8773:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAYAAACEYr13AAAACXBIWXMAAAPoAAAD6AG1e1JrAAADvElEQVQ4y5VUa0yTZxh9RZY5C232Y/vjsh8LyWIWyLIpyUpgoYnDQVtK10JpuVSoMMDyQTvRKrSWi0BxMJtMK2vAEHAVOy1sVWSggDFjl7iLiAaQENGVXmDj2gHC2UtNlpDMhT3Jyffjfc95Tr7nPC8hzykul/u2SCjsEYtFg9HR0VyyhQqOiIh4NSYmRpiYyL+UnZ35l6ZYDa1WDZVKuS4UCq7Ss+TIyMjX6N0X/mFJpdJulSqrL+eg6m6h+tBMWZkO5eWlMOh1MJ+up2jAJ1oGRUw+CgpykZmpmJPJJMMSSdKAQCC4Qgz60k6Hw47W1vNobmqE9YtzuGi7gHtDQ1hfR6Du3x+G1Wqhosdw9IgWR0o0OKY7jNxclZeYzfVHnc4OPHo0gT9nZ7GyuhYgbXx7r7fg2teNePr0mZLfv4Iptxtjo6OorDDgQGb6bdLebivp6emih348uPc9rnZa0HnJBHNNEvLTgqFKIajWf4DLF2vQeeUMBvocWFiYR1XlCSjkstvEaCz7aHDwFpb8q2i2qJFBCYfSCdQZBMVZL4HJYiEnNQhKKYGYT1BSFAvf9DTqTCchl6V8SUwm03sDt25iaWkFX9mMyJETFCl3olDJQkFmCPLSQ5CTxoZKzkZq0nZUl6fA5XKjod6E5GRJFdHp1K84nY6Z2bkFdH1zjnbahvyMEOSmheIgJWYrOFDKOMhI5iBx/zZ8frqYCnjwWcOn4PP5osAoW1qaBzZs/frzTcjFO5BNux1IfUZKo5BLOJCJOYjjEVy2nw04OHWqZj4qKur1gIDJVGMcHx+Dx/MESvkupElZAWIqJaVQSJM4EAtDsS92B+7+9gMmJyehLzv+I6UGBQQYhtnd3X3Nv0pHZzqphJBalYooScCGiM+GMJ6Sedvxcc77WF5exp07P0GhUBRtynFTU+MNt8eD/r4OxEYTJCaEgr8/BAlxIYiPY+GdvYQG7AzW1tZgt9sWeDzerk0CFRVGTX//DSwuLkLDJIAbRfDhvp2Io9gbSUcoegs+nxcjIw9A/1mbwWAI3iRALbGt1rPfDQ8PYWbaC6ZQgHf3kABkskhMTIxhyuWi3dufFOXlvfGv68gwebvb2s7/8fjxJObn52jSohAf/yZcU79jlsa867oThzUa4X/udG1tZb7dfgHjDx9imjrx+dzwej3o7e0C3ZuGrbwLQXV11aU2Wwsd2S8YHR0BDRoqKk44wsLCXiRbrdraKm1baxM23Oj1xzvoY8Mi/7csFrPRaNR/Gx4e/vLz7vwNK7ZF+gj5R4oAAAAASUVORK5CYII="},3495:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/10e122519bee27c1aba4.mp3"},1229:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/bcfd5d0822630962ace5.mp3"},9224:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/33e3ca5743b79c3bce77.png"},4718:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAoCAYAAAAIeF9DAAAACXBIWXMAAAPoAAAD6AG1e1JrAAALJElEQVRo3u2aCXBW1RmG30kttRQQUVkKWq1VrLXa0SqIA6jV2g3oItCO2sEWYcZKq1AqlQ4IyFa2QICwBUPYwr4kgbCFEAgQSCAkBAIhGwYCZCMLCVtIn897/pnYmc50KElo/O/MO9+997//ued877edc67kjsnSY4FS2HTpNPIzZCYyHoyaIn1/kPQ1HguQ/6if459SW0gYbkSAPCPGkZKAXIzsPU66x6+pejp6S1+ZKH3TkZLuPCULeQwcAbunSf/AW74zQPqq31vqh5QmKL1nsLRvEV6yXDobjpeAE4ul4yHSntnS1KnSyyOlFn6N1fGBku8NkgaH4RU7pNxUcslxvOSYlJ0MYqXDq6SN86UQnus/QerQXbrDr7k6OixkoejhodLBGCk5ExRIacXSqXNSBtcHE6U10dIKPCYab/mE3POwn5Q6Oiw/kCsmo+jdhKn4/YSoPGk/hOwtktZfkGblSG+kST/dyflKafM8qQ+e1dSvvVt/BFD6Pkoin4KXxJMv4rYBvGIXhKwolPrlS08QwppDwB2Es6fiSfJrpM6uJPYft5qQSVJrPGQQhMQStuIIW9uypCjC1ig8paNVYq66CphLpbVPagM5TfwVVx0cVsq6yeEoCIkhR8TGkS8gJATPeC9Dut+vpfr1jm9Bxnt4SMRMcsdSKXKPNOaU9Hau9OpRqZVfTfXoHcw/ukHGSkhZj4cEQchgytznD0n3bZG+4ddSPR6WlAlXPzJCIGYsE78XqJ46hHlE+PNDA0wI74SEHkYIGE3I6jTSP7do2CUTWw6BjKWzCFeLpJ+56qlR5ksbrxmhyVqV4+3VSWbpHSFkIpPCxUz4Xv+UDjfSudb95MkhjDUUBBKi/8C9Lp9I7Sx0O4Ia/rAO0bk/M7+Yu1bq1RgJMWXb4imEFEJGNfIqsgicBBu4HkOk6GUV5wfS1xs6jzSjM08TsrozB+nQWJO5LYjaXAukQcIlcMPIqUVQPjIW4sajj1dsD6ihwtrnsdXtdTTqY6jUHIU/T/EyZAGFTKh0DJRwfi1Yus796zOkK5CTAzmbnef82KJIb//KRN0aIfOtu+OlZ/czHdsuzd4oxYfjJRQ2lyn9q4kY1TM8T8qGmG1GzhSiiO0H/T+ucgeYy9sq8njpQVveNyuzNTPbe+He3QbOW5rVGoYw92kALw2wMh9SWqRJ30sh3ewlukVL0asgAu+pmON5zjWIqXQ7qRvwsqGMrTNh8C4jp8ELAlOclY+2/G4wZfpgOWms1IbOD6Pz0S5pLgHzwEwwDUwCEyymM7i/29IN8vfIXzDQ5yzemyVaW/VpjaZYIygdoznChHkf/dtE6FrhkXOJwqd6ppd3ym27m/6uMnKsWjPjcn299WHNmDcLNou2jyCsZDRr5/oJ8Kwtt9CZV21SCV7n/E3u9QMDbdXYyACzOY9CxoA4S5jO9deBcH5bbuB8mUO4DdD9HgbGWWlqCda+fsHD2ltfzPOGelsB/24ITX3eZmT6ZG3YuExxBtpuSUXZch3YzVjxjFanGO8Z6YHzjDUfz85j3Nx7BHJ67qE/kLODqcFZyLnsyLke6JGTYUtP4C/08QfWn1vmNXS2FQ1/BGbwomDkfFe7m/LWIbeCnT4Fm9J94DrSkiHn291XK/aRRGoQlQ04xgBSQTLnB0DCDE8eAkdAOtfZDifdf7c7EuPceyOsHyhzsq0sOEy0vRzX1xD3pcwi67NJR26Y+9Rpsft9Ge8LZ+61ZiEevEzaRA7ZGoPxJEq78ZD4z6Q9hby/hN9BGCTNywVHeT/kxUNOznLICIEUyKmhvRpXvaXSv1kY0a/MiP6nz6jM5WjoKQsjIIjGF9os3pFh1rvDWYOVjqkgBRwFx1FiBjJrhvdtVz6yAFnIoIuwqGISZjGuX2ISBRSTVEsosy+GSaXgIs+UhnoDrKDqqSSxVvLfCggso61yUOEGXFlLGqrcdcX0Lz5TVRv0+bJP+jDdq6iuoMwrVFmXeW/VEv6P15Rv5b0JAALKcri+wP0SDxWcl2XT51TGEIeM5D7kXIPcGnJOjQtrxfbFjnkNUeXx3jezAmKE2J8h5bduSf6vyL8hPzTworXgIhVImSkLVAZ7sbUcBZbN80rIApR6bqGH8xBQwODOMrjTSZB1QMrjPI8KJ49QcTpWygXZWGcu1U72FixvM4iA3DXSCf5/ksongzYzeM9J3p1OH9Jmep7nM4pkcBDS4kEM59uQW1wO22R5jOuNhumel68By7gOAyFgLtdzaG8W7U6zL2wYxzTeu2A1xkifIkj820j8O/GSvXjLoRLvm4Mszs9kYXTJ6ILxXKPfNwhrNUYOuqmmzTLaXmvh/qbCmJFiMdbiNcn5PjrXmk62RSHfxpJ/iXUHoqQQqpCFzOyX4OorwNooQhWIoULZywASQcoOKWkXbk9nlxKLR9DxPoYMqa/huPQbLLDnMennWNtrPPcy8kVidtdDJErCRycU0RmyOtFuFyy3C+9+AbyEh72GNfdCaX3JBf3wrv7Id5AD6OcAvK8/8o/gbTvnuXeQ74L3wTAwgv+PBmNpa4KBsU0CU7D2aSg1CMxjjIsY3xKMJJzxrMaYNtLfaIiJJaQdKCO0lkuZFzE8PKcCz7lG/6sZ9w3+V0P7N+ZjiOiwz01teZtrQcaTWM27kPDmBiofOvI7XjABq16CgqKw8jgUloDykrCaJDq4C2wAC1DyeJQ8kDj8E667c/3MCcg8DMkMsIltARt85yM9A/i8dKwN333f87Y/Q5tv0eZS2o9i0JHci0RBm4jpW6mIdtG3BK4PQWQK3ngUpDoc5dl0+nAS5IAzXJ9DFoBi2iqh5C1OdaD9QsZVyLsu0P98ZD7XZ7h/1iTjOYPiT59F0UVEAQgprfJQVAkpkFSC5xRjhBW8uxDjXIhhPHTTs1kqmz8RGlJgN4Fws4DBBtHwTDo/hc5/RMcGYeFvUYX0OIcFU5k8luFVJK1thzHx1n+NElAg/ZAQkUSouI6sRhHXsdAqrLKUPuSCZJSQgNyN3AliwA4fuB8NIsAqKqhQMAcEgkncG4ccA0aBj1H0CDCccQ1z98LAJrAHHAAptJnDuwvpR2UpyoeU9EvS4cuEziu8H6yuINzzex9y0ENzb3aOZdZp1QEe0hVXe4YQ0J5Y3nqdKxGx7LtAM9yx6cp6XKo3D4Hw9wl5MZnSfuR2sIrz4AzPQPpy3gO8wvmLJ/FOLLmbQ1csvQuW/jQe8F0M60E8qa2VupSzzXcyp6rtrT5wv5nz9sO0F8/7IghV26nAMiHrIkReAlcxlhso/hxhKxZiIiHmA0h6dKe3UNs4l1vMUIj7LTCOdsT7e+18Pco0mDJ9oc4p4D/hvz6sTTz9AUJUKESuhtSBGMRkSEnD4ktO450QcwliLuAxmXhLNMR8iNc+l+d9nO5f97qVIRIPugdP60WuWITXDUaGQ0QRyq6ChMt4xnkQT+iaChFvEOIe55mWt82+SmPzRkrwNhQy3ewLHJBIeKsgf16FnDK8Yz/EDMVDnrScOfdLsFLeoOt0KLgdFWYfyugo5hMlyAomtZnMM9IIYaMhpuPKht7I+jJ4ha3fMYl7yZZhQK6bzWcxhwik4uxG+f+w5Sy/tuowV5hH2IKlbVzZ6jMEJLllj3M2wwY9JlNE+HND3e+D3Gl7NFPwCPsmDcXvB2cdEYm2rD5ResT/QXkd5wdbgp/ERM1tG3zqPnQocx895NiCqi352/KRX2N1eJil214Flv+xW9I/41Z9y93KdTC//RqPad+Iv027fRK2rT64TbNiZKnzhijfjp9txrlPgBpkQvcvECsZxm8fdqkAAAAASUVORK5CYII="},578:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/eb15afa9164e6dd325ff.png"},7490:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/ce88229bbfff12e36e80.png"},3566:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/3bf51af39346de6d28ab.png"},1712:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/1943d3105824474bf33b.png"},7890:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/3a07b85e2008241a8ba5.png"},1089:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/29e8ce162338346c9b51.jpeg"},6513:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/8f6852074f7bcc1877d0.png"},134:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAZDUlEQVRo3s1bWXMbV3rFDpBYiR0kQIAbuIP7voA7QQrcRVLiKkoiJVkLacm2LE88jp2xMxk5lUxNlpmpiuW85yUvefH4N7jKpSo/2H7Uk8vln3DynQs0BVKk5fGMnaD4VTe6G933fOv5bl/qdD/gYzAYdCaTSQn3T5zTPxf5OyE8ZjLqdUbD2ecpZ51T3/X642erZ+qN/JYT2dcbZCxGs+5n+XAwx6I7GwiBWszGY0DnKeT0d+36M9SuQFKOgesMPy9gav68wRce14BQCaflPIWdBfhs+Zk/51kw7tZ5HDZd2uuxH7ocRU+cjqJPXc7ipy6n/ZnTUfxdXp7xGM8V2UxPLCbdodgv7dbpPN8LWFya7mw0WX4aaxbG8ukYLgSZbtA5YqW+uWhZ+EkiHv2qsiKOutoa1Ncl0dhQh6bGejQ3NSjhPqW6qgIViXLEoqUIhwLwlrjhsBd9ZbFYnsgt50QchS5NoMqtj2P6JwLMrdFoPBPwYGs4ECsLHkXCwc+iZREQaLKmSgElkLOE11GqKhMKNK+vTVajproSiXgM4XAYPp8Pkig/E/BHjnBr4Gdx6ULAhWAJHoClriZxIJb5goPnQDVrCXgEAz6UlYZRGgmp76GgXx0L+L3H4nE7lVW1a3kPKqyiogKJROIYuN3p/sJa7D7Q6VYtha79k7p04aeurq49Eol8wgHGy6PHIP2+EgVCYhUSo7BZzZBsDUlQkDu9IFaLCWaTAZIL1DVFNov6fSAQUGCrq6sRj8cRCpfC7fGi2OH+xO0vb/+LXVrLvGcBPQ1aNH9QXl7+TVlZmYo7Wo7W8nk9cLscCiDBSCI7BkZABM/zEqMKKMER7Gkl8Fp5DJxOJxwOhwIfjcURK08gUhpFidf/jcPtP9AAF46PXIHe9xdZs8CVrQLycTQaRWmpaNztVu5Ia54eOMFpli7xuI5dmEqh0BModGUqTPMIe7FNKYKAKfJsSAzD4XQrK1dUViNRUQWvLwBrkeMxx6SN8fT4z8Rz2pKnLa19QqGQPRgMfiSCkhJxW49HbTlQDpBWIWiC06xOQFRIcZFVWZSW55YWJjB6AH/H3/McAfP3PE/L2mw2BTgH3gCrrRiBYBjxRCXK4xUIR8p43Udy3q5Z9wfRxkLAdIfTgDOZjFWAPpGYhdfrVRq3Wq1qW+iutCjBUjh4Hud5xibPF7q4JtoxXkNlaL8pKipSzzCbzczUCrASvRHFdqcCS2tzTHItS5j1rLJ5JuBCgIWAta248YfMlLSqy+VCcXEx5JzSPC3DuKS7atY8C9h5olmZYAuPE6SMRT2H+yazVYHVgNPaEstgeDHGxdIfani+N4ZPu3ChhsSCOikP18WdFVDNqlp80e3KY2XHMUgrahbS55XBY9ynu1MxFF7LLd268DoNOF1cUyi3ap9gCwBThICocUkCVRldxnf9NPX9wcmKx/r7+1sF7LeMVbpYIVg+qKqqSiUgLSsXCuOQdZWDJ7i21hT6ertVjBI8yUZvT5cKAx6j0kg6eK0+D1RLWDnwhjOF19D76NqSRL+VEGg9y3gvBZxOp21+v/9PjFkmD7ox44lgmbgaGhokabmfu2A+BumiVABZ08J8ViUuAiST6unuVIBoTVLOllSTAszz5dEYshdmVD3nvXh9e3srrGaLcm2laIM+J/pcElP7eeWwYtDKYog/yTHb+VlaapnZaDmmakbVYxp0dc0N+16/D+4SDxwup9w0Z1mTDK5S6CCBKHDyUCOPi/R1taM6EYNZjnscRUhEI2pbbDGisbYatVUJ2Ex6uIqtaG2qVxZ32h0KUESSED2G7s48QMo5NNiLEqfjWJmad2ljoRwrI+91tLYYZp/YZHs2YKP+eY+pFwZTWtrlE7BferwlMFnMSqMESokITQxI7aSV6IZFZoMCzO3Y8ADSA73qe9DrRmnQp457XXZ1nMLjziKLUkBrSzPsRcVyXwtqa+tx6dIl+L0+pUhex99SOSGfB3PZjDzPm0uUBeCfK0Gv3J9kRbzyS2GCvrPdmSBPEfJIJHZEsHbRrsVmPQZsFlctEu1Twyqx5IESgEUSDi2p7fd2tmF5/gIiAa+yss/tUFtez+tikaCKcUexWLRY2JfDpeLQZrGqZMbfD/f3qPvxHqMjg8LJA2JR/TFIjqeQoHDLxEoGKPc6eilgveKnKXsoFPnc5XErsHqjIR8zvJlZ4tkisZLjzATc09GKjpYm5dJ2q0mBtRpzLh32l6h9HutqS2FksA9uu02BvzA9gfGxEchTxTI2tLS0obW1FW6nS3kPr2eIMASoIJvVmOPbovhiUYgGnHmFomV1ujhjWUrV56lUyv5SwB5PKBsWCkfrGkzGgiSRc6VSsQrdWktWzfVJJCvjClhmYhRtzQ1qgAQcLwurfUqqoVado7tTeI4Jy2KScmQ0o6amFkNDQ/C43CrpBUpc8HucysLcNtTXiOWlsZCMnk4PSeL0vxDHWgljAiP1lQqTPWMewXgCsM8XfCIWFp5qywEVwAROjdql1EQli0q2V4NVpCEPgJZoqqtRg+M+rb6xtiJJp1h9ZzwTJL9zv7u9RU0AFNuEZtrZHYUgVUEpkZmc1u1sbYbDZlbJb3HhgnJpl5xj9g4Jmzsdx5qwqrDDEqL05EzAWtJyu1s8AvZrnxBzo9mUAyxCwATpJfEXV6Zbz2SmFOlgUiFIcx483ZpbHqeVGLMEPDs1jmxmUl1Hb2B8dnW252q2xO/8/KKycJHVpmjpzOSYSmy8F+9fm6yU2m49ztIcD8Hb7fYXkheFgMW1v9adni4iYK0smUyONMuDR/pOzZW1GOYDbPkuhg9kH8zyQTedGkurgXGABEVAdEVmV8Ys95mkmHn5ne7OfZIWZumiIjva2jrQ1NSkyhQBU2G0LjM8k5bFzNJkULWfbs2x9PX1qN9oCUujodwn5aysrOR++oUYNhlytbesLHEYjZYrjRMwwao41j/X6nGGzLeDdE+CoeUqy8swOtSvQLEeX9m6rNyYyqirrlCuSWXw/MXFOQz09yqXdjpJGkoVVydgznkxw5eXhpRydjcvobOjRT2PICcmxlQ+SQq50QAX1mMCZ3gwCUqJOjzBugiYViZgvz/0MS1MjR+zmrwwfnkzJi0+SGNXWgybC+JZc20OltZl3NKlF7MzSimM77XlBexsb6Kro1MATOHu3UNMTk4qi9N76DV0Zd6DnlNdFZdSaFKxWyW01EnuLlYm5dWAat2VxgZ7enq4/fgE69KSFhOW3x/8lMnDzM5Ey86MOUlg1CiFD6uvr1XzVLQQLcYBsYywNFXFo4pRcT8aDih3pALKQn5MjAxhenwEq0vzOLpzC2urK1hfXUM2O4/9/Ru4du0aJsbGFcuiy1NR9AaVB6ycJspVikJPo2Xb2toUy9LKFC1MbyHgRCLx6QmKyYSlrGwwEfBTJizZPwFYkY+CYs9aSMBjo2mVmAiEwsHRioxjWnhuZgorC1kVyzUV5aoOM5Mz7m9cu4KpyXH09/Zhe3sXN27cwubmJvavXcfuzpbyBMYw70vFedx2oaKdQioiqg53Cy9nxSCw+fl5RTYKGRcV0NnZKQyu9umJJkKzMAGLdZ/RwqyLGthC4lHIco7nn/JC1zPmY5qxShcnOFqbRGNpblbFNM/x+Hh6UE3ThoMh3L59F7/97e+wt7eHmekMjg7vKhpK4kIFsjyVeISszE5J01In8enFwsKc1O4qVYLYD6ueOZ+wCJqcuru7W7yx/pnWHytLnwL8XWlpVDEfDbBWi2nZurokmpsbVexobZxiQSb9cS3WFMDY1Xg03ZMWpjJ4DS1M8JycL3F70N8/iCtXripLpZqaVbliwqqIlSrvoML4LJeTUz/FaizMKdxqGZquXZi4NMDJZPI7zcIKsMa0GMMEnEhUKm6rAVU8WhoIxk2TZM+OjjZVFgYH+tT0LBkUEwxB0RIERsuQWHDQZGE8Txfl4Jm1GefMvMzGvhKvlI9qVFRUoaurS7k4OTa9oCFZpcoTYzkYKFExzLJEl87NatpVHSaVrKmpOcGrycsZw1Kavjsxg6NlaQIOBsPPqquTqkxogDWXLmzJ3MKyyINZR9nTToyPqrZuaXEeHcKCqIitzcvCpGpV3O1srKuyRLJBpVAJAz2dii42NjYKVUzT9XB5/RIOru6pJPjGq/ewLpk8KQq8uiPZvLMVZdEQtrY2JBGVq1jOZrNqIpEkY3h4WHVKmrXZrw8O9vPcsxd6Y83kksKf8kI2/ZqrcKsRc21fcx1mRKO0djp9TiklPi/KYlH4gwE17cI2kmWMsxs+rwsbl1eRmRxBeVkQu1vrSA/3YzY7jTv3bis3pkK2Li6jT9rGtHznNiGNChuUOF+/iMdkZmdkG0GkrBTTMxn4Av5ckyPjYlmiJ9I4DJeB/m7miafq3Zc+JydmPATwp9JHKhcpLOIauLk5IQsDA8c1z1ZcpMC6fEI8pH4ahRY6PCVwlngQCElHJTHLh1dUxlBXWyX9byN6u1pRWx1HX3cbekQ6RUanRpS1x6WffuXKDpamJlAtSguL1/glZpmtSWl1nAq2Sv4QxXJSj5Ibw4t8uq21SSk0Fg1+qgF+4SPs5GPOOvCdTmExZybkPl2H1mcpIPjqZA1iFZUYmRA6KQwpPT6Bqcy0ssD6+jrGxdX5nujq3jb2tjdQn6xAQ20lpifSuHltWwbUh1RrI5J1VWKNLjm2ix2x8K7I8sQ4ygVkjbhuSpTBGA6FffB4c+HG9rXIXqzCjuOgIZilNfpbX1etwiBa5v/4XMCkYbFYjJnthHVP81S69uDgoKp9VRLzgyOj8Icj6OztQXtnBzg1RPo3JZbq7enA3Ts3cXltCR0Cri1Vj7F0P24fXMFAbxuaU3WorklgeWEW7739CG8/eBUfvvsOfvXG60i3tWJBavW9g2toliQ2MZ7G2tpFFEsJ7B8cwJgohaCTdbWi3PETU0CNDUn17ETMf3guYLFcmjWNgAmOwJgFudUYDF9uaefUA/Q5N2Nyo2hK4WQcO6r52WksXMigp7MFc7OTuL57GcN9HWhrSuJCZhSbG6uYFItPjw1jSYjKrwX0r954gKxw8rSwt11hZZdEGY1Sz7vl+/DQgMrULS0tSo4riclUkKVzLs0wqU540icAF2YvcVnB7PmaryrZRGug6NLq/Y7DgeXlZa0LUQWfSYMNRqJSfiOsi1x3VBgYZyBJFB4c3sGV7Uvo7khhaX4aR7f3MTU6gPbmWuxtreH1+3exPDeDCWFhS5lxvHZrH7OyP9BUjw1R1NWVRUxKRu+SJFQjddlmzM2K5iYkLMqbGEJa+GkUmPmiIlH2dbpF5zkB+PTcrVCyJ5wtoGhzw5p1qUUtvhnH+/v76O3tVjMgu7vbqlw0CM9+55dv4dLFJcWy9oRg7Eh27hKND3S3Ym1hBuneVoz2t2MlO4Gt1QX53o6poV48OrqNVw+uYrQzhXu7G3jv6A6uLmaxKwo5vLKNrCiyTp7RnmpU894E1tHViaWVZTWN/PwFQbGK386OpifaOpNzX7UIkCwtRysWxjC1qXUimiLo+qR5nOuqra1BjSQlxtnU5Kiqsy1NteKGzQpon4CYmxrG/dvXMD3Si+6WWqzMjuP1Vw4wI9m0MRHFhLh6Nt2H/sYkLk2N4falixhNNWB9YgR//PUHuC3K21pawMP7h2iX+3IstG5NbfLEVA9rNNvJkN+SfQHwiQUqwjkfPHhgF1r2OWOVLZYGmG2YpoCRkRFF23T5F2nkuaR9yZoK1Q2lB4XhxCJSZnpxV5JTdnIIA51NmJ8cxr39HQE6io6GCoz1tuBydgp9DUJAysOY6GnD+uwEhlK16K+vxGB9FUYk22bEO3Ykvt9/9Qj//N67eO+th+hqbxYOUEB/CwDT0zramj4P6XT2M1cFnX55JuXpiNma5KHQwlqJSqVS0oj3KT7rLXHiNq2UmZASFMUv3nyAG9e30dvRjMzEAN44vIELE4MY7kohO96PzeUZcd9OtNWWI1URQdLvQV3Qi1K7RcCO4f03jzDT34Hh5iQuSjbPiqVGhKWtSVZ+dH0P//Uff8TH//Yv2L+6jdGxITXtpCYpCqoKOX9dMnZUuLLohTeIhW/cJH59Yt0vaWXWXboygRZaWavNFeKK924fIDszgVhpQBLSkEpKPa0NGB/sxNzEEMb6WjEucmt3DX/7xl2xbAr1UR9WJgfx6s4ldCXKUBfyIBUPY07cfWZAYrqjCe++ch0P1leQlQR0tLyI3z16Ew92d1Ri++DdX+DBa/eEg8dVlXieYC2coPjSqdP5uKTqXAuffpksVt5ntibZ4M2YsFiiaGXemEmCPHr78pqiiyw7dLORgS5Vdkb62nBxTsrQ5rKy6Eh3MzYWp3Bz5yKWpoewMNaHRZHNqVHUSUjUB4XMiIL2VmYxl+7GbE8rNkYHcVeS1uHcBby9uYHf3HkFV6XNHBY+TqVOjA+LF0bzk4yGfOXwSQwH989d6Fa4pvFUErNFo9E/EbQ2M6i5NEk6FbEsCeTW/lUMSoHvEAIxPTaIX739EBsrcyoTry1IGbqxgwsCLDPciStrWdwUBWzMj+H6pSxuyPfL8ptmvxttsSB2REG/uHtdLN+PsVQN9rOTeHRpBTclCd6Wmv5AGNh//+Hf8cfHH+DD99/B3pVNNXNZGMNSMdTLtHMBny5LhYtCpJFolTj+lqVIc2ttGpQ1mUuU2Max5FDjK/MZ3NzbVFm4r70BC5lhLM+MYHygFcuy/+a963jnwQ0sTvQiO9KJ+3vrePemZG3pqsYaayRuaxTY7HAHpjsa8P4r1/BP925hXQjHWmsLdqT7+eDuLfzh7/8Ov3z4qtDHqlwXp8+xPwm5b0tL3a16/fOFqy8FfPoFubj2dU55ams6SEhoacYz3wG5HVbFmq5urysW1dNah/6ORsyO9mN/a0XF7exIN1amhnB1bRZXLmawNNmHC0MS1221WJCklK4sR19lKTZEKbc2FzE/0oWVdCdmW5LYGejB/dkM9iRJXhGWtSENxvpUGrWJ8PHcFhkek6qM7Xqu2ujPX7v5siU+VIg00x9y2pNgOZNAS9PibMDZB0fLQmpibkbiMS0t2dhQjyIWB9sXpftZx9ZyJufGaxfw6PYOrq1msDjShv2lKTwSarnQ3IgpoYFbk2m8vreBXXHlGfGQ6aYabAix+c9f/g0erqxgY6APE011KLWZYGWImXK8ma+FZHwfamDV6gWz8SWLVb/nI9naKnH8hBbm8geCV8yGM5p2l7SDfvj8QfV+lxMAnM14eP8epoREzIz0YHtxGjcuz+Ptu1fwDw9v4WB1EpPtFdge78b97Aym4wmMlpYhI13PnCTC19dXcW9xHrPCqJa7u3B7aRGboyPojEdR4bajROilNf9OWq0iyi9qOe2phh+7bo0/fvz4sV2AfkQLEzBdnKtpDFY79BYBb7TA4w9IDWxQTQNBZySuSTZev7mLtw+vYyubxt7CqJSiBSwPNeFCSxU2hRreGh3DnckpTIvCLnV24/dvPsLv33oL16TB3xiTrqtduiphT6EiC2y6HFhfkRWxcICk56OtrS37y9au/Nkr9PJrK7l86TEtTdD+QAgmmx3mYpc0/7kJAKu1SK3maWmsUxZem5vCB4+O8I/vvIad+VFcmR/Bbx7exMPrq9iS5HVD2r8Pb76Cf33wGq6OjWNfgL+5tYmb8wsYTzWjIRhAzCWhkwdKiYZ8qCovhd9hffw/v81YfxSwH7ognMsIJKYPhJB8Q8DxqiRcvpCyMGc/OKdtzL8j9ov7pWrKkZWytJpJqwy8MTuEu5tzuLORxfb0IA6kfdyTXnatv09cuFkxqilx67j0uV7We5IJMj2+TRBWVy1sLhr2feMvMR/8lWF+z6JwsTYXl7o9vk/sbi+8wQjKK2sQlDi02YqP56tVK5cfcIkkmNqIC40xLxpKnWiOedBa7keLsLMajxMByQc+EgejHiWGHFCPWQ+PzYywz42gz4VgwINwxPeJzqxrZyYymP68JZR/sdVXV1ctkbLEgbj0F0xcXBaYe2uXQKm4olreIIPWQNvyFqPYC8SZF4c+d41DFOW1m1ERDSIeDSFRUYZgyPOF2aE70K3qLOp1tjm/QkP/Vwb88h8bdOHqwUCkLH7kKfF9xtKlXnjFy9VcNOOt1CcWdNkUEAJymfIA+c65SJQixx0mPUJel4rNRiEUVZUxhMJexBKRzwxO3ZEurAvoyZ/EbdS7P1rXmAN8ehHaj05Yp5cinr0ItfBfbBoc0mXNhcPhJ5Fw8CtOyHPSva4qjvJIAI3Vwsxq4kjGI2isLENDlUhtAo3SHqaa61AeC4uXeOBwWr4qCdqfGH26OV2DzqHAWXXPgVIszwFrzU9h1/eTuPX3ffiPGvyHjVhZ8DDicz2RhPNp0ON4KvIs5HV+F/a5vgsH3M+8PsfTEr/zU4ff/sQeLDq0RU1pXVrnObGwyFggpgIx/hhW8VP9q885/9Kj/TuP2cQVB4YXQWhAzgJ7Wgz/B4B/+P8dnfNjww8Vw4uiN/z/A/ziovPC/z9SL6hftOpZojecLX/m538Bh3lN7Oq6hEAAAAAASUVORK5CYII="},9219:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/b3998260388873ebf97d.png"},3285:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/f6270e0494900b949559.png"},2308:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/97ba4cf16a6edc3ca58c.png"},3031:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/66011b381ae04731fcbb.png"},9889:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAYAAAB4d5a9AAAACXBIWXMAAAPoAAAD6AG1e1JrAAACWElEQVQ4y6VVSWtTURQOdUQtFisKDmg3IggFh4WuRFwpipI22ko3ithRqaUubMEsVRQrimJ+QDZZS7Zx4y6LLAJZSAiEhEQzmXmE5/eVd+FweX2+pAcOvDuc893zneG5XA4ln8+faDab19Xa5/Pt6nQ6z7rd7gb0Lb6fFIvFU65BJRwO7+v1ej/oTD8LBAK7c7ncsXa7fQ/nnwC26PF4dvQF4PV6d8LYb0DgYE1GYgWIO3O4/yEejx90DAKDL4YpcPBS7TcajatYLzOCUqk0Jm1ardYd2H0MBoN7nAC8NoRIkFAotDedTh+u1+uXsf8cYPelLfZmoU9tAXDhhaGJBNEFIA+hM5I6PPLrZjEgtFvQSeiEqXfh7JVhISonqVRqFBFcjMViw9rDFhmZoM2NvXkXquav4VBgsK6qDc4umfk4rZxmMpkjpE4VRTabPYpo3hPkT78gShgJoyeooG2GPcVvljJA3hDk96AgFNJTqVTOCoomSKWgcG3bILVa7UK1Wh2XeSCVAmR9W3SZTm+zlAVdD9R4kXTV+wXhFGCFAeAGmvKKAkgkEiNMvGpCM/HvNusbB0ssP1PncfDNroRpDICboOmc3isYotdElJMcM3bdvmHTjEMWtLG/ZtWa0bAZC4XCyS1BTD79dh0fiUT2l8vlM4yeAKRRNiZ04b+zKxqNHkDOvluBkBasV0HRI1TYeS0qNycxR4ujKZxMJg8B6KcOwgcwEnmXFPH17HJ95Dj5Kx4H0C9OZat/CM8R0RTOP5uJHhro70hK4Ghae/UKaWEv4OzxVkn+B3Wylypo4jEMAAAAAElFTkSuQmCC"},7610:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAZCAYAAAA8CX6UAAAACXBIWXMAAAPoAAAD6AG1e1JrAAADuklEQVQ4y5VUS6scRRgduDf3TvdMd9f70e+e6Zm5kwzqSgQXunGjogsFd7pwm00EIejiEiK4VBCSqxd/gGCCi+DGjauAMaLBF4jiUozgQgQR9ZanaiYo4iLT8FHV1V2nzne+89VgIOXYVgfnm3Z5q6xn3wpZXN7fz9rBto/K28OmWzpbr5y0B4ipY1y/j0/RVkDGtt9QNXVELRw3C5fx1jGR/xRF0f1bAUnbfk/EBCAHjgHIzxnPf94fpY9sBaTz9msqp04Up50szjiuZ46L8vbubvTAdhrZ+qsU6fi0VLFyDGlSZn4cE/EQPu8j9hCnNuPeZm24GU/9A6RLANWO6Xlg5Uemmj9sPvkwL/u3EEdFvbhU1LNL2nZH0vTHxk7eNvnk2JjmjTFRT641UsUXhDfY3DueHziRn16zyxeoIMBND6ZLZ0q/PsMa1vFNaPyvJk7q+vc4po8NtG1uSTtzAqVX5RnEPQBb4aeFo7x3CWtdyqcuFb0bYT5mHd4nqK6PDv91jjF1baB19QmHLgIsdLlypr7X2eo+sIDwdumo7J0vBlGzAJBiM8FaCDEFWOU4N58BqL3pgXw63OuUL0P1ZO6BoJmaO4rIxJrdGECJZwjQBOyUgV0Yf2dgbXeTIVeGslOc6k/ycw1NbIUoFxihne1DGtxro3GwnjhbzJ2x9Q87OzsPo2rNDSo7R8EmOBsnS9OdSGmupYS9jDhMU3aYJPRCkmQXs4y+4iNNyWGWZS/u7g4f3JS/vUFEG4AY3O1ZYe03tMgTWxlSyPojAh8lyN2z8eakzP6SUProVkBM1R9TaOSZ8E2vEWZ+TRLy+HaMdHWdyhYiz0LjpgEoPxmNyNntGDF9xEUDgC6UPxO+rCVKaj4fjejqroGiMXuKywKORb+ZeTDZmNbO64bb8jtt6teVaV5gsjwrVHPOFtOXqm5+sW5nrxbF9ELC1J1bIjaU6y8zbMzg4GA+GM63QgJAbw2V9yc6n/wpTPeXytFOZhb6TsBLUla3o4itweIxe56JMtifagguPVgfemxE2xAxbVxEahdlVZj7bzHeuWwcIfL4TobDjLDLXFXhqvUgXnyfZmgFHBCD3QjhN48A5Nf8SNBrQpjr/5YLRmVvooo4BY2JE9c9Nd2c3rghqdaMABaD5RBzKqCl0O/9V/v9YZw8x7j5NC+moc9UPg/3EkchGPosE10wbcJwh8mJK6veDYejZ/6/lHFs9vaip1PCX6NUvEu5vMqFviKEReir/v7B+wec6yvDYfysv3L/BuapXSWRUZmEAAAAAElFTkSuQmCC"},5069:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABa0lEQVRIx+3Wv0rDUBTH8YKxg4tTBe2ig9R/0UUHB6E0VikkguAmiIOjb+Kki1ZEEaVUsLu+gW/ge4hi1frnFzgpl8s5tjXnLsULH1LILd/eNE1vJtNnYxgC2IcDOIQjUnAVLcE9PME3I3QRXYY3IZioaEcH4KFD1El4Et67CKtf6rIQuoMtWKPVjmiHQyG86PonFDHRL/BdhwMm/AkTLmJjcAxV+i65S31L52OnsKAR9ru4i20ljfAstHqIfsC0VriX1caP0ZxGeAaeoSk8PFoUa5JHGNIID9INlocdJhx/qBU6n9darT0qTPiFrorTEQph/z/cN+FICE/99qYcPQzmO/CFY2xPCEfGnDkYNcObUIObFOpCuGHN27Uv03nK8KUQNhd0Ddva4au/hDfgwlG4bsyp2eF12u2fpVBlwq+0oGTOCW382mMcirCaQpE2dqYl2l0mcwLaBrf/YRKe8TprnZN4xpEbWYb3A4aQDbKiy4qbAAAAAElFTkSuQmCC"},1523:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/e11695c62ec7e5ef53ba.png"},7374:(t,e,n)=>{"use strict";t.exports=n.p+"static/assets/33cb098a8a1436fd30ee.json"},6954:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>xu});var r={};n.r(r),n.d(r,{ColorTransform:()=>B.J,Matrix:()=>N.y,Point:()=>j.E,Rectangle:()=>I.A,Transform:()=>F.w});var i={};n.r(i),n.d(i,{BitmapFilter:()=>G.l,BlurFilter:()=>H.T,DropShadowFilter:()=>K.p,GlowFilter:()=>W});var s={};n.r(s),n.d(s,{SharedObject:()=>J,URLRequest:()=>X,navigateToURL:()=>Z});var o={};n.r(o),n.d(o,{Keyboard:()=>$.N});var a={};n.r(a),n.d(a,{Timer:()=>tt,getDefinitionByName:()=>nt,getTimer:()=>et});var l={};n.r(l),n.d(l,{display:()=>O,events:()=>U,filters:()=>i,geom:()=>r,media:()=>Q,net:()=>s,text:()=>V,ui:()=>o,utils:()=>a});var c={};n.r(c),n.d(c,{__internal:()=>D,flash:()=>l});var u={};n.r(u),n.d(u,{SimpleScrollBar:()=>Ps});var h={};n.r(h),n.d(h,{ArrowKeysToPan_445:()=>zs,LightOn_226:()=>so,MainTimeline:()=>ao,ag_intro_mc_459:()=>Ks,cameraFlash_93:()=>qs,cautionSign_anim_444:()=>Ws,flashButton_rim2_347:()=>Ys,flashButton_rim4_453:()=>Js,flashButton_rim_344:()=>Xs,flashButton_rimcopy2_353:()=>Qs,flashButton_rimcopy_350:()=>Zs,flowReady_437:()=>$s,giveKudo_306:()=>to,handStuff_52:()=>eo,handStuffcopy_57:()=>no,hideMe_48:()=>ro,introLoader_43:()=>io,redPing_166:()=>lo,runner_duck_84:()=>co,runner_head_17:()=>uo,runner_idle_82:()=>ho,runner_jump_83:()=>fo,slidingDoor_153:()=>po,startBox_308:()=>yo,startFade_355:()=>vo,w_beaconC_228:()=>go,w_beacon_161:()=>mo});var f={};n.r(f),n.d(f,{ColorPicker:()=>bo,ScrollBarDirection:()=>Ms});var d={};n.r(d),n.d(d,{ColorPickerEvent:()=>Ln,ScrollEvent:()=>Jn});var p={};n.r(p),n.d(p,{controls:()=>f,events:()=>d});var y={};n.r(y),n.d(y,{Anim:()=>nn,BitmapCanvas:()=>tn,Emit:()=>nr,HandyCam:()=>er,Key:()=>rr,Logger:()=>fr,Math2:()=>wn,Relay:()=>ht,SoundBox:()=>pr,StopWatch:()=>_r,Text2:()=>is,TileObject:()=>kn});var v={};n.r(v),n.d(v,{AGILogin:()=>We,AGIcon:()=>qe,AGIntro:()=>Xe,Ach:()=>Ge,AchEvent:()=>He,AchSound:()=>ze,Achievement:()=>Ke,Beam:()=>ar,BodyPart:()=>xn,Boop1:()=>Rn,Boop2:()=>Sn,Bouncer:()=>En,BouncerSound:()=>Cn,CameraFlashSingular:()=>Tn,CharacterSelection:()=>Mn,Checkpoint:()=>rn,CheckpointFlag:()=>en,CheckpointHolder:()=>Pn,CheckpointSound:()=>An,Cheer:()=>Dn,Cheer2:()=>On,ColorPicker_backgroundSkin:()=>Nn,ColorPicker_colorWell:()=>Fn,ColorPicker_disabledSkin:()=>Bn,ColorPicker_downSkin:()=>In,ColorPicker_overSkin:()=>jn,ColorPicker_swatchSelectedSkin:()=>Un,ColorPicker_swatchSkin:()=>Vn,ColorPicker_textFieldSkin:()=>Gn,ColorPicker_upSkin:()=>Hn,EndCountdown:()=>Kn,EndPointHolder:()=>zn,Exit_fla:()=>h,ExternalEvent:()=>ut,FadeOut:()=>qn,FinalA:()=>Wn,FinalB:()=>Xn,FinalC:()=>Yn,FlairMenu:()=>Zn,FlowReady:()=>Qn,FreedomSequence:()=>$n,Game:()=>Ir,GetKudos:()=>jr,Ghosting:()=>cr,Grinder:()=>Ur,HalfBlockHolder:()=>Vr,InsideA:()=>kr,InsideB:()=>Rr,InsideC:()=>xr,InvisibleTileHolder:()=>Gr,JumpSound:()=>Hr,Kudo:()=>Kr,LabA:()=>Lr,LabB:()=>Pr,LabC:()=>Mr,Laser:()=>zr,LaserCannon:()=>qr,LaserGun:()=>Wr,Level:()=>_n,Level0:()=>Xr,Level1:()=>Jr,Level10:()=>Zr,Level100:()=>Qr,Level101:()=>$r,Level102:()=>ti,Level103:()=>ei,Level104:()=>ni,Level105:()=>ri,Level106:()=>ii,Level107:()=>si,Level108:()=>oi,Level109:()=>ai,Level11:()=>li,Level110:()=>ci,Level111:()=>ui,Level112:()=>hi,Level113:()=>fi,Level114:()=>di,Level115:()=>pi,Level116:()=>yi,Level117:()=>vi,Level118:()=>mi,Level119:()=>gi,Level12:()=>bi,Level13:()=>_i,Level14:()=>wi,Level15:()=>ki,Level16:()=>xi,Level17:()=>Ri,Level18:()=>Si,Level19:()=>Ei,Level2:()=>Ci,Level20:()=>Ti,Level21:()=>Li,Level22:()=>Mi,Level23:()=>Pi,Level24:()=>Ai,Level25:()=>Di,Level26:()=>Oi,Level27:()=>Ni,Level28:()=>Fi,Level29:()=>Bi,Level3:()=>Ii,Level30:()=>ji,Level4:()=>Ui,Level5:()=>Vi,Level6:()=>Gi,Level7:()=>Hi,Level8:()=>Ki,Level9:()=>zi,LevelEnd:()=>ur,LevelEndBox:()=>ss,LevelStart:()=>hr,LevelUpWindow:()=>os,LevelUser:()=>rs,Lobby:()=>cs,MainMenu:()=>hs,MainMenuSong:()=>fs,MenuLow:()=>ds,Morgue:()=>dr,Multiplayer:()=>_s,MultiplayerMenu:()=>ps,MultiplayerPlayer:()=>ws,MultiplayerWarning:()=>us,NotLoggedIn:()=>ks,ParallaxScrollingBitmap:()=>xs,Placeholder:()=>Rs,Placing:()=>as,Plate:()=>Ss,Player:()=>mr,PlayerBar:()=>Er,PlayerShell:()=>vs,PopSpikes:()=>Yi,QuickPlayLobby:()=>Es,Rewind:()=>Cs,Robot:()=>Ts,Runner:()=>lr,Scratcher:()=>Ls,SinglePlayerMenu:()=>ys,Skin:()=>ir,SkyLine:()=>gr,SkylineA:()=>Ar,SkylineB:()=>Or,SkylineC:()=>Dr,SmallScratch:()=>Ds,Spike:()=>sn,SpikeDrop:()=>Os,SpikeFall:()=>Ji,SpikesHolder:()=>Xi,StadiumA:()=>Nr,StadiumB:()=>Br,StadiumC:()=>Fr,StartBeam:()=>Sr,StartPointHolder:()=>qi,Static:()=>br,SwingingAxe:()=>Zi,Takeoff:()=>Ns,Teleporter:()=>Qi,Thud:()=>Fs,Ticker:()=>Bs,TickerWord:()=>js,Tile:()=>on,TileHolder:()=>Wi,TileOpaque:()=>ln,TimeOutWindow:()=>Us,TreadmillLeftHolder:()=>$i,TreadmillRightHolder:()=>ts,Tubes:()=>bs,Turnstile:()=>Yr,UIBackground:()=>Vs,UIPanel:()=>wr,WhiteSquare:()=>Cr,WhooshSound:()=>Gs,YouArrow:()=>Tr,Zap:()=>Hs,betz:()=>u,blackBeam:()=>Ye,fl:()=>p,john:()=>y,scrollBar:()=>As});var m=n(6739),g=n.n(m),b=n(9526),_=b.createContext(null),w=_.Provider;function k(){var t=(0,b.useContext)(_);if(!t)throw new Error("Root store is not provided");return t}var x=n(8972),R=n.n(x),S=n(8884),E=n.n(S),C=n(8239),T=n.n(C),L=n(9621),M=n(1362),P=n.n(M),A=n(3010),D=n(94),O=n(7760),N=n(7562),F=n(8745),B=n(1151),I=n(2942),j=n(7069),U=n(2741),V=n(2389),G=n(9793),H=n(8051),K=n(3633),z=n(5543),q=n(1788);class W extends G.l{constructor(t=16711680,e=1,n=6,r=6,i=2,s=1,o=!1,a=!1){super(),this.color=t,this.alpha=e,this.blurX=n,this.blurY=r,this.strength=i,this.quality=s,this.inner=o,this.knockout=a}get __filter(){return{filter:q.p.instance,paddings:z.al(this.blurX,this.blurY),blurX:this.blurX,blurY:this.blurY,passes:this.quality,color:16777216*Math.floor(255*this.alpha)+this.color,strength:this.strength,angle:0,distance:0,knockout:this.knockout}}}class X{constructor(t){this.url=t}}var Y=n(570);class J extends Y.p{constructor(t){super(),this.name=t;try{this.data=JSON.parse(localStorage[t])||{}}catch(t){this.data={}}}static getLocal(t){return new J(t)}flush(){localStorage[this.name]=JSON.stringify(this.data)}}function Z(t,e){window.open(t.url,e)}var Q=n(23),$=n(8682);class tt extends Y.p{constructor(t=0,e=0){super(),this.delay=t}start(){}stop(){}}function et(){return+new Date}function nt(t){const e=D.ClassRegistry.instance.classes.get(t);return null!=e?e:null}A.ZR(Float64Array);const rt=c;var it=n(8914),st=n.n(it),ot=n(2164),at=n.n(ot),lt=n(2094),ct=n.n(lt);var ut=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t){var e;return R()(this,i),(e=r.call(this,i.TYPE,!0,!1)).props=t,e}return i}(rt.flash.events.Event);T()(ut,"TYPE","external-event");var ht=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"no message";return R()(this,i),(e=r.call(this,t,!0,!1)).sender=n,e.msg=s,e}return E()(i,[{key:"clone",value:function(){return new i(this.type,this.sender,this.msg)}},{key:"toString",value:function(){return this.formatToString("Relay","type","bubbles","cancelable","eventPhase")}}]),i}(rt.flash.events.Event);T()(ht,"ACH","ach"),T()(ht,"GOTO","goto"),T()(ht,"SEND","send"),T()(ht,"WARNING","warning");var ft,dt,pt=[{name:"Primary server",address:"https://exit-path.fly.dev"},{name:"Secondary server",address:"https://exit-path.kiootic.xyz"}],yt=[["v0.1.0","Supports spectators","Allow changing username in 'Modify' menu","Support quitting to menu while in Multiplayer game"],["v0.2.0","Fix always joining room as spectator"],["v0.3.0","Press 'F' toggle Focus mode"],["v0.3.1","Fix multiplayer game start countdown timing","Fix activating focus mode while in chat","Press K to die (return to start/last checkpoint)","Press P to pause/unpause"],["v0.3.2","Make game start countdown deterministic"],["v0.3.3","Fix message scrolling when page is zoomed","Allow resizing the game area"],["v0.3.4","Show spectators in separate list"],["v0.3.5","Reset internal achievement state when clearing data","Add dropdown menu for multiplayer commands"],["v0.3.6","Add menu command for restarting level"],["v0.3.7","Disable in-game commands for spectators"],["v0.4.0","Press 'B' to toggle player beam"]],vt=n(8669),mt=n.n(vt),gt=n(107),bt=n.n(gt),_t=n(756),wt=n.n(_t),kt=(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),xt=function(t){function e(e,n){var r=this,i=this.constructor.prototype;return(r=t.call(this,e)||this).statusCode=n,r.__proto__=i,r}return kt(e,t),e}(Error),Rt=function(t){function e(e){void 0===e&&(e="A timeout occurred.");var n=this,r=this.constructor.prototype;return(n=t.call(this,e)||this).__proto__=r,n}return kt(e,t),e}(Error),St=function(t){function e(e){void 0===e&&(e="An abort occurred.");var n=this,r=this.constructor.prototype;return(n=t.call(this,e)||this).__proto__=r,n}return kt(e,t),e}(Error),Et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ct=function(t,e,n){this.statusCode=t,this.statusText=e,this.content=n},Tt=function(){function t(){}return t.prototype.get=function(t,e){return this.send(Et({},e,{method:"GET",url:t}))},t.prototype.post=function(t,e){return this.send(Et({},e,{method:"POST",url:t}))},t.prototype.delete=function(t,e){return this.send(Et({},e,{method:"DELETE",url:t}))},t.prototype.getCookieString=function(t){return""},t}();!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(dt||(dt={}));var Lt=function(){function t(){}return t.prototype.log=function(t,e){},t.instance=new t,t}(),Mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pt=function(){function t(){}return t.isRequired=function(t,e){if(null==t)throw new Error("The '"+e+"' argument is required.")},t.isNotEmpty=function(t,e){if(!t||t.match(/^\s*$/))throw new Error("The '"+e+"' argument should not be empty.")},t.isIn=function(t,e,n){if(!(t in e))throw new Error("Unknown "+n+" value: "+t+".")},t}(),At=function(){function t(){}return Object.defineProperty(t,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),t}();function Dt(t,e){var n="";return Ot(t)?(n="Binary data of length "+t.byteLength,e&&(n+=". Content: '"+function(t){var e=new Uint8Array(t),n="";return e.forEach((function(t){n+="0x"+(t<16?"0":"")+t.toString(16)+" "})),n.substr(0,n.length-1)}(t)+"'")):"string"==typeof t&&(n="String data of length "+t.length,e&&(n+=". Content: '"+t+"'")),n}function Ot(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Nt(t,e,n,r,i,s,o,a,l){return c=this,u=void 0,f=function(){var c,u,h,f,d,p,y,v;return function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(m){switch(m.label){case 0:return u={},i?[4,i()]:[3,2];case 1:(h=m.sent())&&((c={}).Authorization="Bearer "+h,u=c),m.label=2;case 2:return f=It(),d=f[0],p=f[1],u[d]=p,t.log(dt.Trace,"("+e+" transport) sending data. "+Dt(s,o)+"."),y=Ot(s)?"arraybuffer":"text",[4,n.post(r,{content:s,headers:Mt({},u,l),responseType:y,withCredentials:a})];case 3:return v=m.sent(),t.log(dt.Trace,"("+e+" transport) request complete. Response status: "+v.statusCode+"."),[2]}}))},new((h=void 0)||(h=Promise))((function(t,e){function n(t){try{i(f.next(t))}catch(t){e(t)}}function r(t){try{i(f.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new h((function(t){t(e.value)})).then(n,r)}i((f=f.apply(c,u||[])).next())}));var c,u,h,f}var Ft=function(){function t(t,e){this.subject=t,this.observer=e}return t.prototype.dispose=function(){var t=this.subject.observers.indexOf(this.observer);t>-1&&this.subject.observers.splice(t,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(t){}))},t}(),Bt=function(){function t(t){this.minimumLogLevel=t,this.outputConsole=console}return t.prototype.log=function(t,e){if(t>=this.minimumLogLevel)switch(t){case dt.Critical:case dt.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+dt[t]+": "+e);break;case dt.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+dt[t]+": "+e);break;case dt.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+dt[t]+": "+e);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+dt[t]+": "+e)}},t}();function It(){var t,e,n,r,i,s,o="X-SignalR-User-Agent";return At.isNode&&(o="User-Agent"),[o,(t="5.0.1",e=jt(),n=At.isNode?"NodeJS":"Browser",r=Ut(),i="Microsoft SignalR/",s=t.split("."),i+=s[0]+"."+s[1],i+=" ("+t+"; ",i+=e&&""!==e?e+"; ":"Unknown OS; ",i+=""+n,i+=r?"; "+r:"; Unknown Runtime Version",i+=")")]}function jt(){if(!At.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Ut(){if(At.isNode)return process.versions.node}var Vt,Gt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kt=function(t){function e(e){var n=t.call(this)||this;if(n.logger=e,"undefined"==typeof fetch){var r=require;n.jar=new(r("tough-cookie").CookieJar),n.fetchType=r("node-fetch"),n.fetchType=r("fetch-cookie")(n.fetchType,n.jar),n.abortControllerType=r("abort-controller")}else n.fetchType=fetch.bind(self),n.abortControllerType=AbortController;return n}return Gt(e,t),e.prototype.send=function(t){return e=this,n=void 0,i=function(){var e,n,r,i,s,o,a,l=this;return function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(c){switch(c.label){case 0:if(t.abortSignal&&t.abortSignal.aborted)throw new St;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");e=new this.abortControllerType,t.abortSignal&&(t.abortSignal.onabort=function(){e.abort(),n=new St}),r=null,t.timeout&&(i=t.timeout,r=setTimeout((function(){e.abort(),l.logger.log(dt.Warning,"Timeout from HTTP request."),n=new Rt}),i)),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.fetchType(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:Ht({"Content-Type":"text/plain;charset=UTF-8","X-Requested-With":"XMLHttpRequest"},t.headers),method:t.method,mode:"cors",redirect:"manual",signal:e.signal})];case 2:return s=c.sent(),[3,5];case 3:if(o=c.sent(),n)throw n;throw this.logger.log(dt.Warning,"Error from HTTP request. "+o+"."),o;case 4:return r&&clearTimeout(r),t.abortSignal&&(t.abortSignal.onabort=null),[7];case 5:if(!s.ok)throw new xt(s.statusText,s.status);return[4,function(t,e){var n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":n=t.text();break;case"blob":case"document":case"json":throw new Error(e+" is not supported.");default:n=t.text()}return n}(s,t.responseType)];case 6:return a=c.sent(),[2,new Ct(s.status,s.statusText,a)]}}))},new((r=void 0)||(r=Promise))((function(t,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(e){e.done?t(e.value):new r((function(t){t(e.value)})).then(o,a)}l((i=i.apply(e,n||[])).next())}));var e,n,r,i},e.prototype.getCookieString=function(t){var e="";return At.isNode&&this.jar&&this.jar.getCookies(t,(function(t,n){return e=n.join("; ")})),e},e}(Tt),zt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(t){function e(e){var n=t.call(this)||this;return n.logger=e,n}return zt(e,t),e.prototype.send=function(t){var e=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new St):t.method?t.url?new Promise((function(n,r){var i=new XMLHttpRequest;i.open(t.method,t.url,!0),i.withCredentials=void 0===t.withCredentials||t.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var s=t.headers;s&&Object.keys(s).forEach((function(t){i.setRequestHeader(t,s[t])})),t.responseType&&(i.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=function(){i.abort(),r(new St)}),t.timeout&&(i.timeout=t.timeout),i.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null),i.status>=200&&i.status<300?n(new Ct(i.status,i.statusText,i.response||i.responseText)):r(new xt(i.statusText,i.status))},i.onerror=function(){e.logger.log(dt.Warning,"Error from HTTP request. "+i.status+": "+i.statusText+"."),r(new xt(i.statusText,i.status))},i.ontimeout=function(){e.logger.log(dt.Warning,"Timeout from HTTP request."),r(new Rt)},i.send(t.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},e}(Tt),Wt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xt=function(t){function e(e){var n=t.call(this)||this;if("undefined"!=typeof fetch||At.isNode)n.httpClient=new Kt(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");n.httpClient=new qt(e)}return n}return Wt(e,t),e.prototype.send=function(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new St):t.method?t.url?this.httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},e.prototype.getCookieString=function(t){return this.httpClient.getCookieString(t)},e}(Tt),Yt=function(){function t(){}return t.write=function(e){return""+e+t.RecordSeparator},t.parse=function(e){if(e[e.length-1]!==t.RecordSeparator)throw new Error("Message is incomplete.");var n=e.split(t.RecordSeparator);return n.pop(),n},t.RecordSeparatorCode=30,t.RecordSeparator=String.fromCharCode(t.RecordSeparatorCode),t}(),Jt=function(){function t(){}return t.prototype.writeHandshakeRequest=function(t){return Yt.write(JSON.stringify(t))},t.prototype.parseHandshakeResponse=function(t){var e,n;if(Ot(t)||"undefined"!=typeof Buffer&&t instanceof Buffer){var r=new Uint8Array(t);if(-1===(s=r.indexOf(Yt.RecordSeparatorCode)))throw new Error("Message is incomplete.");var i=s+1;e=String.fromCharCode.apply(null,r.slice(0,i)),n=r.byteLength>i?r.slice(i).buffer:null}else{var s,o=t;if(-1===(s=o.indexOf(Yt.RecordSeparator)))throw new Error("Message is incomplete.");i=s+1,e=o.substring(0,i),n=o.length>i?o.substring(i):null}var a=Yt.parse(e),l=JSON.parse(a[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[n,l]},t}();!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(Vt||(Vt={}));var Zt,Qt=function(){function t(){this.observers=[]}return t.prototype.next=function(t){for(var e=0,n=this.observers;e<n.length;e++)n[e].next(t)},t.prototype.error=function(t){for(var e=0,n=this.observers;e<n.length;e++){var r=n[e];r.error&&r.error(t)}},t.prototype.complete=function(){for(var t=0,e=this.observers;t<e.length;t++){var n=e[t];n.complete&&n.complete()}},t.prototype.subscribe=function(t){return this.observers.push(t),new Ft(this,t)},t}(),$t=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}l((r=r.apply(t,e||[])).next())}))},te=function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(Zt||(Zt={}));var ee,ne,re=function(){function t(t,e,n,r){var i=this;Pt.isRequired(t,"connection"),Pt.isRequired(e,"logger"),Pt.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=e,this.protocol=n,this.connection=t,this.reconnectPolicy=r,this.handshakeProtocol=new Jt,this.connection.onreceive=function(t){return i.processIncomingData(t)},this.connection.onclose=function(t){return i.connectionClosed(t)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=Zt.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:Vt.Ping})}return t.create=function(e,n,r,i){return new t(e,n,r,i)},Object.defineProperty(t.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(t){if(this.connectionState!==Zt.Disconnected&&this.connectionState!==Zt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t},enumerable:!0,configurable:!0}),t.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},t.prototype.startWithStateTransitions=function(){return $t(this,void 0,void 0,(function(){var t;return te(this,(function(e){switch(e.label){case 0:if(this.connectionState!==Zt.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=Zt.Connecting,this.logger.log(dt.Debug,"Starting HubConnection."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return e.sent(),this.connectionState=Zt.Connected,this.connectionStarted=!0,this.logger.log(dt.Debug,"HubConnection connected successfully."),[3,4];case 3:return t=e.sent(),this.connectionState=Zt.Disconnected,this.logger.log(dt.Debug,"HubConnection failed to start successfully because of error '"+t+"'."),[2,Promise.reject(t)];case 4:return[2]}}))}))},t.prototype.startInternal=function(){return $t(this,void 0,void 0,(function(){var t,e,n,r=this;return te(this,(function(i){switch(i.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,t=new Promise((function(t,e){r.handshakeResolver=t,r.handshakeRejecter=e})),[4,this.connection.start(this.protocol.transferFormat)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),e={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(dt.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(e))];case 3:return i.sent(),this.logger.log(dt.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 4:if(i.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return n=i.sent(),this.logger.log(dt.Debug,"Hub handshake failed with error '"+n+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(n)];case 6:throw i.sent(),n;case 7:return[2]}}))}))},t.prototype.stop=function(){return $t(this,void 0,void 0,(function(){var t;return te(this,(function(e){switch(e.label){case 0:return t=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t];case 3:case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.stopInternal=function(t){return this.connectionState===Zt.Disconnected?(this.logger.log(dt.Debug,"Call to HubConnection.stop("+t+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===Zt.Disconnecting?(this.logger.log(dt.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=Zt.Disconnecting,this.logger.log(dt.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(dt.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=t||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))},t.prototype.stream=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,s=this.replaceStreamingParams(n),o=s[0],a=s[1],l=this.createStreamInvocation(t,n,a),c=new Qt;return c.cancelCallback=function(){var t=e.createCancelInvocation(l.invocationId);return delete e.callbacks[l.invocationId],i.then((function(){return e.sendWithProtocol(t)}))},this.callbacks[l.invocationId]=function(t,e){e?c.error(e):t&&(t.type===Vt.Completion?t.error?c.error(new Error(t.error)):c.complete():c.next(t.item))},i=this.sendWithProtocol(l).catch((function(t){c.error(t),delete e.callbacks[l.invocationId]})),this.launchStreams(o,i),c},t.prototype.sendMessage=function(t){return this.resetKeepAliveInterval(),this.connection.send(t)},t.prototype.sendWithProtocol=function(t){return this.sendMessage(this.protocol.writeMessage(t))},t.prototype.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.replaceStreamingParams(e),i=r[0],s=r[1],o=this.sendWithProtocol(this.createInvocation(t,e,!0,s));return this.launchStreams(i,o),o},t.prototype.invoke=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.replaceStreamingParams(n),s=i[0],o=i[1],a=this.createInvocation(t,n,!1,o),l=new Promise((function(t,n){e.callbacks[a.invocationId]=function(e,r){r?n(r):e&&(e.type===Vt.Completion?e.error?n(new Error(e.error)):t(e.result):n(new Error("Unexpected message type: "+e.type)))};var r=e.sendWithProtocol(a).catch((function(t){n(t),delete e.callbacks[a.invocationId]}));e.launchStreams(s,r)}));return l},t.prototype.on=function(t,e){t&&e&&(t=t.toLowerCase(),this.methods[t]||(this.methods[t]=[]),-1===this.methods[t].indexOf(e)&&this.methods[t].push(e))},t.prototype.off=function(t,e){if(t){t=t.toLowerCase();var n=this.methods[t];if(n)if(e){var r=n.indexOf(e);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[t])}else delete this.methods[t]}},t.prototype.onclose=function(t){t&&this.closedCallbacks.push(t)},t.prototype.onreconnecting=function(t){t&&this.reconnectingCallbacks.push(t)},t.prototype.onreconnected=function(t){t&&this.reconnectedCallbacks.push(t)},t.prototype.processIncomingData=function(t){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(t=this.processHandshakeResponse(t),this.receivedHandshakeResponse=!0),t)for(var e=0,n=this.protocol.parseMessages(t,this.logger);e<n.length;e++){var r=n[e];switch(r.type){case Vt.Invocation:this.invokeClientMethod(r);break;case Vt.StreamItem:case Vt.Completion:var i=this.callbacks[r.invocationId];i&&(r.type===Vt.Completion&&delete this.callbacks[r.invocationId],i(r));break;case Vt.Ping:break;case Vt.Close:this.logger.log(dt.Information,"Close message received from server.");var s=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(s):this.stopPromise=this.stopInternal(s);break;default:this.logger.log(dt.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},t.prototype.processHandshakeResponse=function(t){var e,n,r;try{r=(e=this.handshakeProtocol.parseHandshakeResponse(t))[0],n=e[1]}catch(t){var i="Error parsing handshake response: "+t;this.logger.log(dt.Error,i);var s=new Error(i);throw this.handshakeRejecter(s),s}if(n.error)throw i="Server returned handshake error: "+n.error,this.logger.log(dt.Error,i),s=new Error(i),this.handshakeRejecter(s),s;return this.logger.log(dt.Debug,"Server handshake complete."),this.handshakeResolver(),r},t.prototype.resetKeepAliveInterval=function(){var t=this;this.connection.features.inherentKeepAlive||(this.cleanupPingTimer(),this.pingServerHandle=setTimeout((function(){return $t(t,void 0,void 0,(function(){return te(this,(function(t){switch(t.label){case 0:if(this.connectionState!==Zt.Connected)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),this.keepAliveIntervalInMilliseconds))},t.prototype.resetTimeoutPeriod=function(){var t=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return t.serverTimeout()}),this.serverTimeoutInMilliseconds))},t.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},t.prototype.invokeClientMethod=function(t){var e=this,n=this.methods[t.target.toLowerCase()];if(n){try{n.forEach((function(n){return n.apply(e,t.arguments)}))}catch(e){this.logger.log(dt.Error,"A callback for the method "+t.target.toLowerCase()+" threw error '"+e+"'.")}if(t.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(dt.Error,r),this.stopPromise=this.stopInternal(new Error(r))}}else this.logger.log(dt.Warning,"No client method with the name '"+t.target+"' found.")},t.prototype.connectionClosed=function(t){this.logger.log(dt.Debug,"HubConnection.connectionClosed("+t+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||t||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===Zt.Disconnecting?this.completeClose(t):this.connectionState===Zt.Connected&&this.reconnectPolicy?this.reconnect(t):this.connectionState===Zt.Connected&&this.completeClose(t)},t.prototype.completeClose=function(t){var e=this;if(this.connectionStarted){this.connectionState=Zt.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach((function(n){return n.apply(e,[t])}))}catch(e){this.logger.log(dt.Error,"An onclose callback called with error '"+t+"' threw error '"+e+"'.")}}},t.prototype.reconnect=function(t){return $t(this,void 0,void 0,(function(){var e,n,r,i,s,o=this;return te(this,(function(a){switch(a.label){case 0:if(e=Date.now(),n=0,r=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),null===(i=this.getNextRetryDelay(n++,0,r)))return this.logger.log(dt.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(t),[2];if(this.connectionState=Zt.Reconnecting,t?this.logger.log(dt.Information,"Connection reconnecting because of error '"+t+"'."):this.logger.log(dt.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach((function(e){return e.apply(o,[t])}))}catch(e){this.logger.log(dt.Error,"An onreconnecting callback called with error '"+t+"' threw error '"+e+"'.")}if(this.connectionState!==Zt.Reconnecting)return this.logger.log(dt.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}a.label=1;case 1:return null===i?[3,7]:(this.logger.log(dt.Information,"Reconnect attempt number "+n+" will start in "+i+" ms."),[4,new Promise((function(t){o.reconnectDelayHandle=setTimeout(t,i)}))]);case 2:if(a.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==Zt.Reconnecting)return this.logger.log(dt.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(a.sent(),this.connectionState=Zt.Connected,this.logger.log(dt.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach((function(t){return t.apply(o,[o.connection.connectionId])}))}catch(t){this.logger.log(dt.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+t+"'.")}return[2];case 5:return s=a.sent(),this.logger.log(dt.Information,"Reconnect attempt failed because of error '"+s+"'."),this.connectionState!==Zt.Reconnecting?(this.logger.log(dt.Debug,"Connection left the reconnecting state during reconnect attempt. Done reconnecting."),[2]):(r=s instanceof Error?s:new Error(s.toString()),i=this.getNextRetryDelay(n++,Date.now()-e,r),[3,6]);case 6:return[3,1];case 7:return this.logger.log(dt.Information,"Reconnect retries have been exhausted after "+(Date.now()-e)+" ms and "+n+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}}))}))},t.prototype.getNextRetryDelay=function(t,e,n){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(n){return this.logger.log(dt.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+t+", "+e+") threw error '"+n+"'."),null}},t.prototype.cancelCallbacksWithError=function(t){var e=this.callbacks;this.callbacks={},Object.keys(e).forEach((function(n){(0,e[n])(null,t)}))},t.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},t.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},t.prototype.createInvocation=function(t,e,n,r){if(n)return 0!==r.length?{arguments:e,streamIds:r,target:t,type:Vt.Invocation}:{arguments:e,target:t,type:Vt.Invocation};var i=this.invocationId;return this.invocationId++,0!==r.length?{arguments:e,invocationId:i.toString(),streamIds:r,target:t,type:Vt.Invocation}:{arguments:e,invocationId:i.toString(),target:t,type:Vt.Invocation}},t.prototype.launchStreams=function(t,e){var n=this;if(0!==t.length){e||(e=Promise.resolve());var r=function(r){t[r].subscribe({complete:function(){e=e.then((function(){return n.sendWithProtocol(n.createCompletionMessage(r))}))},error:function(t){var i;i=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then((function(){return n.sendWithProtocol(n.createCompletionMessage(r,i))}))},next:function(t){e=e.then((function(){return n.sendWithProtocol(n.createStreamItemMessage(r,t))}))}})};for(var i in t)r(i)}},t.prototype.replaceStreamingParams=function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];if(this.isObservable(i)){var s=this.invocationId;this.invocationId++,e[s]=i,n.push(s.toString()),t.splice(r,1)}}return[e,n]},t.prototype.isObservable=function(t){return t&&t.subscribe&&"function"==typeof t.subscribe},t.prototype.createStreamInvocation=function(t,e,n){var r=this.invocationId;return this.invocationId++,0!==n.length?{arguments:e,invocationId:r.toString(),streamIds:n,target:t,type:Vt.StreamInvocation}:{arguments:e,invocationId:r.toString(),target:t,type:Vt.StreamInvocation}},t.prototype.createCancelInvocation=function(t){return{invocationId:t,type:Vt.CancelInvocation}},t.prototype.createStreamItemMessage=function(t,e){return{invocationId:t,item:e,type:Vt.StreamItem}},t.prototype.createCompletionMessage=function(t,e,n){return e?{error:e,invocationId:t,type:Vt.Completion}:{invocationId:t,result:n,type:Vt.Completion}},t}(),ie=[0,2e3,1e4,3e4,null],se=function(){function t(t){this.retryDelays=void 0!==t?t.concat([null]):ie}return t.prototype.nextRetryDelayInMilliseconds=function(t){return this.retryDelays[t.previousRetryCount]},t}();!function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(ee||(ee={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(ne||(ne={}));var oe=function(){function t(){this.isAborted=!1,this.onabort=null}return t.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(t.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),t}(),ae=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},le=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}l((r=r.apply(t,e||[])).next())}))},ce=function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},ue=function(){function t(t,e,n,r,i,s){this.httpClient=t,this.accessTokenFactory=e,this.logger=n,this.pollAbort=new oe,this.logMessageContent=r,this.withCredentials=i,this.headers=s,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(t.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),t.prototype.connect=function(t,e){return le(this,void 0,void 0,(function(){var n,r,i,s,o,a,l,c,u;return ce(this,(function(h){switch(h.label){case 0:if(Pt.isRequired(t,"url"),Pt.isRequired(e,"transferFormat"),Pt.isIn(e,ne,"transferFormat"),this.url=t,this.logger.log(dt.Trace,"(LongPolling transport) Connecting."),e===ne.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return r=It(),i=r[0],s=r[1],o=ae(((n={})[i]=s,n),this.headers),a={abortSignal:this.pollAbort.signal,headers:o,timeout:1e5,withCredentials:this.withCredentials},e===ne.Binary&&(a.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return l=h.sent(),this.updateHeaderToken(a,l),c=t+"&_="+Date.now(),this.logger.log(dt.Trace,"(LongPolling transport) polling: "+c+"."),[4,this.httpClient.get(c,a)];case 2:return 200!==(u=h.sent()).statusCode?(this.logger.log(dt.Error,"(LongPolling transport) Unexpected response code: "+u.statusCode+"."),this.closeError=new xt(u.statusText||"",u.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,a),[2]}}))}))},t.prototype.getAccessToken=function(){return le(this,void 0,void 0,(function(){return ce(this,(function(t){switch(t.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,null]}}))}))},t.prototype.updateHeaderToken=function(t,e){t.headers||(t.headers={}),e?t.headers.Authorization="Bearer "+e:t.headers.Authorization&&delete t.headers.Authorization},t.prototype.poll=function(t,e){return le(this,void 0,void 0,(function(){var n,r,i,s;return ce(this,(function(o){switch(o.label){case 0:o.trys.push([0,,8,9]),o.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=o.sent(),this.updateHeaderToken(e,n),o.label=3;case 3:return o.trys.push([3,5,,6]),r=t+"&_="+Date.now(),this.logger.log(dt.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,e)];case 4:return 204===(i=o.sent()).statusCode?(this.logger.log(dt.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==i.statusCode?(this.logger.log(dt.Error,"(LongPolling transport) Unexpected response code: "+i.statusCode+"."),this.closeError=new xt(i.statusText||"",i.statusCode),this.running=!1):i.content?(this.logger.log(dt.Trace,"(LongPolling transport) data received. "+Dt(i.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(i.content)):this.logger.log(dt.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return s=o.sent(),this.running?s instanceof Rt?this.logger.log(dt.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=s,this.running=!1):this.logger.log(dt.Trace,"(LongPolling transport) Poll errored after shutdown: "+s.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(dt.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},t.prototype.send=function(t){return le(this,void 0,void 0,(function(){return ce(this,(function(e){return this.running?[2,Nt(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent,this.withCredentials,this.headers)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},t.prototype.stop=function(){return le(this,void 0,void 0,(function(){var t,e,n,r,i,s;return ce(this,(function(o){switch(o.label){case 0:this.logger.log(dt.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),o.label=1;case 1:return o.trys.push([1,,5,6]),[4,this.receiving];case 2:return o.sent(),this.logger.log(dt.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),t={},e=It(),n=e[0],r=e[1],t[n]=r,i={headers:ae({},t,this.headers),withCredentials:this.withCredentials},[4,this.getAccessToken()];case 3:return s=o.sent(),this.updateHeaderToken(i,s),[4,this.httpClient.delete(this.url,i)];case 4:return o.sent(),this.logger.log(dt.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(dt.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},t.prototype.raiseOnClose=function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this.closeError&&(t+=" Error: "+this.closeError),this.logger.log(dt.Trace,t),this.onclose(this.closeError)}},t}(),he=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fe=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}l((r=r.apply(t,e||[])).next())}))},de=function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},pe=function(){function t(t,e,n,r,i,s,o){this.httpClient=t,this.accessTokenFactory=e,this.logger=n,this.logMessageContent=r,this.withCredentials=s,this.eventSourceConstructor=i,this.headers=o,this.onreceive=null,this.onclose=null}return t.prototype.connect=function(t,e){return fe(this,void 0,void 0,(function(){var n,r=this;return de(this,(function(i){switch(i.label){case 0:return Pt.isRequired(t,"url"),Pt.isRequired(e,"transferFormat"),Pt.isIn(e,ne,"transferFormat"),this.logger.log(dt.Trace,"(SSE transport) Connecting."),this.url=t,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=i.sent())&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),i.label=2;case 2:return[2,new Promise((function(n,i){var s=!1;if(e===ne.Text){var o;if(At.isBrowser||At.isWebWorker)o=new r.eventSourceConstructor(t,{withCredentials:r.withCredentials});else{var a=r.httpClient.getCookieString(t),l={};l.Cookie=a;var c=It(),u=c[0],h=c[1];l[u]=h,o=new r.eventSourceConstructor(t,{withCredentials:r.withCredentials,headers:he({},l,r.headers)})}try{o.onmessage=function(t){if(r.onreceive)try{r.logger.log(dt.Trace,"(SSE transport) data received. "+Dt(t.data,r.logMessageContent)+"."),r.onreceive(t.data)}catch(t){return void r.close(t)}},o.onerror=function(t){var e=new Error(t.data||"Error occurred");s?r.close(e):i(e)},o.onopen=function(){r.logger.log(dt.Information,"SSE connected to "+r.url),r.eventSource=o,s=!0,n()}}catch(t){return void i(t)}}else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},t.prototype.send=function(t){return fe(this,void 0,void 0,(function(){return de(this,(function(e){return this.eventSource?[2,Nt(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent,this.withCredentials,this.headers)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},t.prototype.stop=function(){return this.close(),Promise.resolve()},t.prototype.close=function(t){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(t))},t}(),ye=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ve=function(){function t(t,e,n,r,i,s){this.logger=n,this.accessTokenFactory=e,this.logMessageContent=r,this.webSocketConstructor=i,this.httpClient=t,this.onreceive=null,this.onclose=null,this.headers=s}return t.prototype.connect=function(t,e){return n=this,r=void 0,s=function(){var n,r=this;return function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(i){switch(i.label){case 0:return Pt.isRequired(t,"url"),Pt.isRequired(e,"transferFormat"),Pt.isIn(e,ne,"transferFormat"),this.logger.log(dt.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=i.sent())&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),i.label=2;case 2:return[2,new Promise((function(n,i){var s;t=t.replace(/^http/,"ws");var o=r.httpClient.getCookieString(t),a=!1;if(At.isNode){var l={},c=It(),u=c[0],h=c[1];l[u]=h,o&&(l.Cookie=""+o),s=new r.webSocketConstructor(t,void 0,{headers:ye({},l,r.headers)})}s||(s=new r.webSocketConstructor(t)),e===ne.Binary&&(s.binaryType="arraybuffer"),s.onopen=function(e){r.logger.log(dt.Information,"WebSocket connected to "+t+"."),r.webSocket=s,a=!0,n()},s.onerror=function(t){var e;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:new Error("There was an error with the transport."),i(e)},s.onmessage=function(t){if(r.logger.log(dt.Trace,"(WebSockets transport) data received. "+Dt(t.data,r.logMessageContent)+"."),r.onreceive)try{r.onreceive(t.data)}catch(t){return void r.close(t)}},s.onclose=function(t){var e;a?r.close(t):(e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:new Error("There was an error with the transport."),i(e))}}))]}}))},new((i=void 0)||(i=Promise))((function(t,e){function o(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){e.done?t(e.value):new i((function(t){t(e.value)})).then(o,a)}l((s=s.apply(n,r||[])).next())}));var n,r,i,s},t.prototype.send=function(t){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(dt.Trace,"(WebSockets transport) sending data. "+Dt(t,this.logMessageContent)+"."),this.webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},t.prototype.stop=function(){return this.webSocket&&this.close(void 0),Promise.resolve()},t.prototype.close=function(t){this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0),this.logger.log(dt.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this.isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error("WebSocket closed with status code: "+t.code+" ("+t.reason+").")))},t.prototype.isCloseEvent=function(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code},t}(),me=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ge=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}l((r=r.apply(t,e||[])).next())}))},be=function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},_e=function(){function t(t,e){var n;if(void 0===e&&(e={}),this.features={},this.negotiateVersion=1,Pt.isRequired(t,"url"),this.logger=void 0===(n=e.logger)?new Bt(dt.Information):null===n?Lt.instance:n.log?n:new Bt(n),this.baseUrl=this.resolveUrl(t),(e=e||{}).logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials;var r=null,i=null;if(At.isNode){var s=require;r=s("ws"),i=s("eventsource")}At.isNode||"undefined"==typeof WebSocket||e.WebSocket?At.isNode&&!e.WebSocket&&r&&(e.WebSocket=r):e.WebSocket=WebSocket,At.isNode||"undefined"==typeof EventSource||e.EventSource?At.isNode&&!e.EventSource&&void 0!==i&&(e.EventSource=i):e.EventSource=EventSource,this.httpClient=e.httpClient||new Xt(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=e,this.onreceive=null,this.onclose=null}return t.prototype.start=function(t){return ge(this,void 0,void 0,(function(){var e;return be(this,(function(n){switch(n.label){case 0:return t=t||ne.Binary,Pt.isIn(t,ne,"transferFormat"),this.logger.log(dt.Debug,"Starting connection with transfer format '"+ne[t]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting",this.startInternalPromise=this.startInternal(t),[4,this.startInternalPromise]);case 1:return n.sent(),"Disconnecting"!==this.connectionState?[3,3]:(e="Failed to start the HttpConnection before stop() was called.",this.logger.log(dt.Error,e),[4,this.stopPromise]);case 2:return n.sent(),[2,Promise.reject(new Error(e))];case 3:if("Connected"!==this.connectionState)return e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(dt.Error,e),[2,Promise.reject(new Error(e))];n.label=4;case 4:return this.connectionStarted=!0,[2]}}))}))},t.prototype.send=function(t){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new we(this.transport)),this.sendQueue.send(t))},t.prototype.stop=function(t){return ge(this,void 0,void 0,(function(){var e=this;return be(this,(function(n){switch(n.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(dt.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(dt.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise((function(t){e.stopPromiseResolver=t})),[4,this.stopInternal(t)]);case 1:return n.sent(),[4,this.stopPromise];case 2:return n.sent(),[2]}}))}))},t.prototype.stopInternal=function(t){return ge(this,void 0,void 0,(function(){var e;return be(this,(function(n){switch(n.label){case 0:this.stopError=t,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:case 3:return n.sent(),[3,4];case 4:if(!this.transport)return[3,9];n.label=5;case 5:return n.trys.push([5,7,,8]),[4,this.transport.stop()];case 6:return n.sent(),[3,8];case 7:return e=n.sent(),this.logger.log(dt.Error,"HttpConnection.transport.stop() threw error '"+e+"'."),this.stopConnection(),[3,8];case 8:return this.transport=void 0,[3,10];case 9:this.logger.log(dt.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),this.stopConnection(),n.label=10;case 10:return[2]}}))}))},t.prototype.startInternal=function(t){return ge(this,void 0,void 0,(function(){var e,n,r,i,s,o;return be(this,(function(a){switch(a.label){case 0:e=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,a.label=1;case 1:return a.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==ee.WebSockets?[3,3]:(this.transport=this.constructTransport(ee.WebSockets),[4,this.startTransport(e,t)]):[3,5];case 2:return a.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,r=0,i=function(){var t;return be(this,(function(i){switch(i.label){case 0:return[4,s.getNegotiationResponse(e)];case 1:if(n=i.sent(),"Disconnecting"===s.connectionState||"Disconnected"===s.connectionState)throw new Error("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(e=n.url),n.accessToken&&(t=n.accessToken,s.accessTokenFactory=function(){return t}),r++,[2]}}))},s=this,a.label=6;case 6:return[5,i()];case 7:a.sent(),a.label=8;case 8:if(n.url&&r<100)return[3,6];a.label=9;case 9:if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(e,this.options.transport,n,t)];case 10:a.sent(),a.label=11;case 11:return this.transport instanceof ue&&(this.features.inherentKeepAlive=!0),"Connecting"===this.connectionState&&(this.logger.log(dt.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return o=a.sent(),this.logger.log(dt.Error,"Failed to start the connection: "+o),this.connectionState="Disconnected",this.transport=void 0,[2,Promise.reject(o)];case 13:return[2]}}))}))},t.prototype.getNegotiationResponse=function(t){return ge(this,void 0,void 0,(function(){var e,n,r,i,s,o,a,l,c;return be(this,(function(u){switch(u.label){case 0:return e={},this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=u.sent())&&(e.Authorization="Bearer "+n),u.label=2;case 2:r=It(),i=r[0],s=r[1],e[i]=s,o=this.resolveNegotiateUrl(t),this.logger.log(dt.Debug,"Sending negotiation request: "+o+"."),u.label=3;case 3:return u.trys.push([3,5,,6]),[4,this.httpClient.post(o,{content:"",headers:me({},e,this.options.headers),withCredentials:this.options.withCredentials})];case 4:return 200!==(a=u.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate '"+a.statusCode+"'"))]:((!(l=JSON.parse(a.content)).negotiateVersion||l.negotiateVersion<1)&&(l.connectionToken=l.connectionId),[2,l]);case 5:return c=u.sent(),this.logger.log(dt.Error,"Failed to complete negotiation with the server: "+c),[2,Promise.reject(c)];case 6:return[2]}}))}))},t.prototype.createConnectUrl=function(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id="+e:t},t.prototype.createTransport=function(t,e,n,r){return ge(this,void 0,void 0,(function(){var i,s,o,a,l,c,u,h,f,d,p;return be(this,(function(y){switch(y.label){case 0:return i=this.createConnectUrl(t,n.connectionToken),this.isITransport(e)?(this.logger.log(dt.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,[4,this.startTransport(i,r)]):[3,2];case 1:return y.sent(),this.connectionId=n.connectionId,[2];case 2:s=[],o=n.availableTransports||[],a=n,l=0,c=o,y.label=3;case 3:return l<c.length?(u=c[l],(h=this.resolveTransportOrError(u,e,r))instanceof Error?(s.push(u.transport+" failed: "+h),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(h))return[3,12];if(this.transport=h,a)return[3,9];y.label=5;case 5:return y.trys.push([5,7,,8]),[4,this.getNegotiationResponse(t)];case 6:return a=y.sent(),[3,8];case 7:return f=y.sent(),[2,Promise.reject(f)];case 8:i=this.createConnectUrl(t,a.connectionToken),y.label=9;case 9:return y.trys.push([9,11,,12]),[4,this.startTransport(i,r)];case 10:return y.sent(),this.connectionId=a.connectionId,[2];case 11:return d=y.sent(),this.logger.log(dt.Error,"Failed to start the transport '"+u.transport+"': "+d),a=void 0,s.push(u.transport+" failed: "+d),"Connecting"!==this.connectionState?(p="Failed to select transport before stop() was called.",this.logger.log(dt.Debug,p),[2,Promise.reject(new Error(p))]):[3,12];case 12:return l++,[3,3];case 13:return s.length>0?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+s.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}}))}))},t.prototype.constructTransport=function(t){switch(t){case ee.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new ve(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket,this.options.headers||{});case ee.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new pe(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource,this.options.withCredentials,this.options.headers||{});case ee.LongPolling:return new ue(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.withCredentials,this.options.headers||{});default:throw new Error("Unknown transport: "+t+".")}},t.prototype.startTransport=function(t,e){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(t){return n.stopConnection(t)},this.transport.connect(t,e)},t.prototype.resolveTransportOrError=function(t,e,n){var r=ee[t.transport];if(null==r)return this.logger.log(dt.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+t.transport+"' because it is not supported by this client.");if(!function(t,e){return!t||0!=(e&t)}(e,r))return this.logger.log(dt.Debug,"Skipping transport '"+ee[r]+"' because it was disabled by the client."),new Error("'"+ee[r]+"' is disabled by the client.");if(!(t.transferFormats.map((function(t){return ne[t]})).indexOf(n)>=0))return this.logger.log(dt.Debug,"Skipping transport '"+ee[r]+"' because it does not support the requested transfer format '"+ne[n]+"'."),new Error("'"+ee[r]+"' does not support "+ne[n]+".");if(r===ee.WebSockets&&!this.options.WebSocket||r===ee.ServerSentEvents&&!this.options.EventSource)return this.logger.log(dt.Debug,"Skipping transport '"+ee[r]+"' because it is not supported in your environment.'"),new Error("'"+ee[r]+"' is not supported in your environment.");this.logger.log(dt.Debug,"Selecting transport '"+ee[r]+"'.");try{return this.constructTransport(r)}catch(t){return t}},t.prototype.isITransport=function(t){return t&&"object"==typeof t&&"connect"in t},t.prototype.stopConnection=function(t){var e=this;if(this.logger.log(dt.Debug,"HttpConnection.stopConnection("+t+") called while in state "+this.connectionState+"."),this.transport=void 0,t=this.stopError||t,this.stopError=void 0,"Disconnected"!==this.connectionState){if("Connecting"===this.connectionState)throw this.logger.log(dt.Warning,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is still in the connecting state."),new Error("HttpConnection.stopConnection("+t+") was called while the connection is still in the connecting state.");if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),t?this.logger.log(dt.Error,"Connection disconnected with error '"+t+"'."):this.logger.log(dt.Information,"Connection disconnected."),this.sendQueue&&(this.sendQueue.stop().catch((function(t){e.logger.log(dt.Error,"TransportSendQueue.stop() threw error '"+t+"'.")})),this.sendQueue=void 0),this.connectionId=void 0,this.connectionState="Disconnected",this.connectionStarted){this.connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this.logger.log(dt.Error,"HttpConnection.onclose("+t+") threw error '"+e+"'.")}}}else this.logger.log(dt.Debug,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is already in the disconnected state.")},t.prototype.resolveUrl=function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!At.isBrowser||!window.document)throw new Error("Cannot resolve '"+t+"'.");var e=window.document.createElement("a");return e.href=t,this.logger.log(dt.Information,"Normalizing '"+t+"' to '"+e.href+"'."),e.href},t.prototype.resolveNegotiateUrl=function(t){var e=t.indexOf("?"),n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===e?"":t.substring(e)).indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this.negotiateVersion),n},t}(),we=function(){function t(t){this.transport=t,this.buffer=[],this.executing=!0,this.sendBufferedData=new ke,this.transportResult=new ke,this.sendLoopPromise=this.sendLoop()}return t.prototype.send=function(t){return this.bufferData(t),this.transportResult||(this.transportResult=new ke),this.transportResult.promise},t.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},t.prototype.bufferData=function(t){if(this.buffer.length&&typeof this.buffer[0]!=typeof t)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof t);this.buffer.push(t),this.sendBufferedData.resolve()},t.prototype.sendLoop=function(){return ge(this,void 0,void 0,(function(){var e,n,r;return be(this,(function(i){switch(i.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(i.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new ke,e=this.transportResult,this.transportResult=void 0,n="string"==typeof this.buffer[0]?this.buffer.join(""):t.concatBuffers(this.buffer),this.buffer.length=0,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.transport.send(n)];case 3:return i.sent(),e.resolve(),[3,5];case 4:return r=i.sent(),e.reject(r),[3,5];case 5:return[3,0];case 6:return[2]}}))}))},t.concatBuffers=function(t){for(var e=t.map((function(t){return t.byteLength})).reduce((function(t,e){return t+e})),n=new Uint8Array(e),r=0,i=0,s=t;i<s.length;i++){var o=s[i];n.set(new Uint8Array(o),r),r+=o.byteLength}return n.buffer},t}(),ke=function(){function t(){var t=this;this.promise=new Promise((function(e,n){var r;return r=[e,n],t.resolver=r[0],t.rejecter=r[1],r}))}return t.prototype.resolve=function(){this.resolver()},t.prototype.reject=function(t){this.rejecter(t)},t}(),xe=function(){function t(){this.name="json",this.version=1,this.transferFormat=ne.Text}return t.prototype.parseMessages=function(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=Lt.instance);for(var n=[],r=0,i=Yt.parse(t);r<i.length;r++){var s=i[r],o=JSON.parse(s);if("number"!=typeof o.type)throw new Error("Invalid payload.");switch(o.type){case Vt.Invocation:this.isInvocationMessage(o);break;case Vt.StreamItem:this.isStreamItemMessage(o);break;case Vt.Completion:this.isCompletionMessage(o);break;case Vt.Ping:case Vt.Close:break;default:e.log(dt.Information,"Unknown message type '"+o.type+"' ignored.");continue}n.push(o)}return n},t.prototype.writeMessage=function(t){return Yt.write(JSON.stringify(t))},t.prototype.isInvocationMessage=function(t){this.assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this.assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")},t.prototype.isStreamItemMessage=function(t){if(this.assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")},t.prototype.isCompletionMessage=function(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this.assertNotEmptyString(t.error,"Invalid payload for Completion message."),this.assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")},t.prototype.assertNotEmptyString=function(t,e){if("string"!=typeof t||""===t)throw new Error(e)},t}(),Re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Se={trace:dt.Trace,debug:dt.Debug,info:dt.Information,information:dt.Information,warn:dt.Warning,warning:dt.Warning,error:dt.Error,critical:dt.Critical,none:dt.None},Ee=function(){function t(){}return t.prototype.configureLogging=function(t){if(Pt.isRequired(t,"logging"),void 0!==t.log)this.logger=t;else if("string"==typeof t){var e=function(t){var e=Se[t.toLowerCase()];if(void 0!==e)return e;throw new Error("Unknown log level: "+t)}(t);this.logger=new Bt(e)}else this.logger=new Bt(t);return this},t.prototype.withUrl=function(t,e){return Pt.isRequired(t,"url"),Pt.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions=Re({},this.httpConnectionOptions,"object"==typeof e?e:{transport:e}),this},t.prototype.withHubProtocol=function(t){return Pt.isRequired(t,"protocol"),this.protocol=t,this},t.prototype.withAutomaticReconnect=function(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new se(t):this.reconnectPolicy=t:this.reconnectPolicy=new se,this},t.prototype.build=function(){var t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new _e(this.url,t);return re.create(e,this.logger||Lt.instance,this.protocol||new xe,this.reconnectPolicy)},t}();function Ce(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Te(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Le=function(){function t(e,n){var r=this;R()(this,t),T()(this,"conn",void 0),T()(this,"room",null),T()(this,"messages",[]),T()(this,"requestAccessToken",wt()(bt().mark((function t(){var e,n,i,s,o,a,l,c;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={displayName:r.root.game.instance.playerObj.userName,primaryColor:r.root.game.instance.playerObj.colour,secondaryColor:r.root.game.instance.playerObj.colour2,headType:r.root.game.instance.playerObj.headType,handType:r.root.game.instance.playerObj.handType,xp:r.root.game.instance.playerObj.xp,kudos:r.root.game.instance.playerObj.kudos,matches:r.root.game.instance.playerObj.matches,wins:r.root.game.instance.playerObj.wins},n=new URL("api/multiplayer/auth",r.address),t.next=4,fetch(n.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({player:e,version:1}),credentials:"include"});case 4:if(200===(i=t.sent).status){t.next=20;break}return s=null,t.prev=7,t.next=10,i.json();case 10:o=t.sent,a=o.error,s=null!=a?a:null,t.next=17;break;case 15:t.prev=15,t.t0=t.catch(7);case 17:if(!s){t.next=19;break}throw new Error("Access to server is denied: ".concat(s));case 19:throw new Error("Access to server is denied");case 20:return t.next=22,i.json();case 22:return l=t.sent,c=l.token,t.abrupt("return",c);case 25:case"end":return t.stop()}}),t,null,[[7,15]])})))),T()(this,"onJoinRoom",(function(t){if(r.room={id:t.id,name:t.name,players:t.players,state:t.state},"lobby"===r.room.id)r.root.modal.present({type:"room-selection"});else{var e=r.root.game.main;e.multiplayer.tubes.init(r.room.state,r.conn.connectionId),e.multiplayer.quickPlayLobby.step=4}})),T()(this,"onUpdatePlayers",(function(t){if(r.room){var e=r.room.players.filter((function(e){return!t.exited.includes(e.id)}));e.push.apply(e,mt()(t.joined)),r.room.players=e}})),T()(this,"onUpdateState",(function(t){r.room&&("lobby"===r.room.id?function(t,e){var n,r=new Map(t.rooms.map((function(t){return[t.id,t]}))),i=Ce(e.removed);try{for(i.s();!(n=i.n()).done;){var s=n.value;r.delete(s)}}catch(t){i.e(t)}finally{i.f()}var o,a=Ce(e.updated);try{for(a.s();!(o=a.n()).done;){var l=o.value;r.set(l.id,l)}}catch(t){a.e(t)}finally{a.f()}t.rooms=Array.from(r.values()).sort((function(t,e){return t.name.localeCompare(e.name)}))}(r.room.state,t.diff):function(t,e){var n,r,i,s=new Map(t.players.map((function(t){return[t.localId,t]}))),o=Ce(null!==(n=e.removed)&&void 0!==n?n:[]);try{for(o.s();!(i=o.n()).done;){var a=i.value;s.delete(a)}}catch(t){o.e(t)}finally{o.f()}var l,c=Ce(null!==(r=e.updated)&&void 0!==r?r:[]);try{for(c.s();!(l=c.n()).done;){var u=l.value;s.set(u.localId,u)}}catch(t){c.e(t)}finally{c.f()}if(t.players=Array.from(s.values()).sort((function(t,e){return t.localId-e.localId})),null!=e.phase&&(t.phase=e.phase),null!=e.timer&&(t.timer=e.timer),null!=e.nextLevel&&(t.nextLevel=e.nextLevel),null!=e.nextLevelCode&&(t.nextLevelCode=e.nextLevelCode),null!=e.nextLevelName&&(t.nextLevelName=e.nextLevelName),null!=e.positions)if(0===e.positions.length)t.positions=[];else{var h,f=new Map(t.positions.map((function(t){return[t[0],t]}))),d=Ce(e.positions);try{for(d.s();!(h=d.n()).done;){var p=h.value;f.set(p[0],p)}}catch(t){d.e(t)}finally{d.f()}t.positions=Array.from(f.values())}if(null!=e.checkpoints)if(0===e.checkpoints.length)t.checkpoints=[];else{var y,v=new Map(t.checkpoints.map((function(t){return[t[0],t]}))),m=Ce(e.checkpoints);try{for(m.s();!(y=m.n()).done;){var g=y.value;v.set(g[0],g)}}catch(t){m.e(t)}finally{m.f()}t.checkpoints=Array.from(v.values())}if(null!=e.rewards)if(0===e.rewards.length)t.rewards=[];else{var b,_=new Map(t.rewards.map((function(t){return[t.id,t]}))),w=Ce(e.rewards);try{for(w.s();!(b=w.n()).done;){var k=b.value;_.set(k.id,k)}}catch(t){w.e(t)}finally{w.f()}t.rewards=Array.from(_.values())}}(r.room.state,t.diff))})),T()(this,"onMessage",(function(t){r.messages.push({sender:t.sender,senderColor:t.senderColor,text:t.text,textColor:t.textColor})})),this.root=e,this.address=n,(0,L.ky)(this);var i=new URL("api/multiplayer/hub",n);this.conn=(new Ee).withUrl(i.toString(),{accessTokenFactory:this.requestAccessToken}).configureLogging(dt.Information).build(),this.conn.on("JoinRoom",this.onJoinRoom),this.conn.on("UpdatePlayers",this.onUpdatePlayers),this.conn.on("UpdateState",this.onUpdateState),this.conn.on("Message",this.onMessage),(0,L.EH)((function(){if(r.root.game.stage){var t=r.root.game.stage.__withContext((function(t){var e,n;t&&(null===(e=r.root.game.main)||void 0===e||null===(n=e.multiplayer)||void 0===n||n.tubes.onConnectionLost())}));r.conn.onclose(t)}}),{name:"connectionLost"}),(0,L.U5)((function(){return r.room&&"lobby"!==r.room.id?r.room.state.phase:null}),(function(t,e){"Lobby"===e&&"InGame"===t&&(r.messages.length=0)}),{name:"clearMessages"})}var e,n,r,i,s,o,a,l;return E()(t,[{key:"connect",value:(l=wt()(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.start();case 2:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"disconnect",value:function(){this.conn.stop().catch((function(t){return console.error(t)}))}},{key:"logMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215;this.messages.push({sender:"@SYSTEM",senderColor:e,text:t,textColor:e})}},{key:"createRoom",value:(a=wt()(bt().mark((function t(e){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.invoke("CreateGameRoom",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"joinRoom",value:(o=wt()(bt().mark((function t(e,n){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.invoke("JoinRoom",e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"reportPosition",value:(s=wt()(bt().mark((function t(e,n,r,i,s,o){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.send("ReportPosition",e,n,r,i,s,o);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i,o){return s.apply(this,arguments)})},{key:"reportCheckpoint",value:(i=wt()(bt().mark((function t(e){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.send("ReportCheckpoint",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"giveKudo",value:(r=wt()(bt().mark((function t(e){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.send("GiveKudo",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"sendMessage",value:(n=wt()(bt().mark((function t(e){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.conn.connectionId){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.conn.invoke("SendMessage",e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setNextLevel",value:(e=wt()(bt().mark((function t(e){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conn.invoke("SetNextLevel",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}();function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Pe=function(){function t(e){var n=this;R()(this,t),T()(this,"container",null),T()(this,"stage",null),T()(this,"main",null),T()(this,"multiplayer",null),T()(this,"isInSPMenu",!1),T()(this,"isInModify",!1),T()(this,"setContainer",(function(t){var e;n.container=t,n.stage&&(n.stage.__canvas.container.remove(),null===(e=n.container)||void 0===e||e.appendChild(n.stage.__canvas.container))})),this.root=e,(0,L.ky)(this),(0,L.EH)((function(){n.stage&&(n.stage.__isActive=n.isActive)}),{name:"bindGameActive"})}return E()(t,[{key:"start",value:function(){var t,e,n=this;if(!this.root.library.value)throw new Error("library is not loaded yet");if(!this.stage){var r=this.root.library.value,i=new rt.flash.display.Stage(r.properties);this.stage=i,i.__withContext((function(){var t=r.instantiateCharacter(0);t.addEventListener(ut.TYPE,(function(t){return n.handleExternalEvent(t.props)})),n.main=t,i.addChild(t)}))(),this.stage.__canvas.container.remove(),null===(t=this.container)||void 0===t||t.appendChild(this.stage.__canvas.container),this.stage.__canvas.container.style.width="100%",this.stage.__canvas.container.style.height="100%",this.stage.__canvas.element.style.width="100%",this.stage.__canvas.element.style.height="100%",null===(e=this.root.controller)||void 0===e||e.onGameStarted(),this.checkVersion()}}},{key:"dispose",value:function(){this.stage&&(this.stage.__canvas.container.remove(),this.stage.__dispose(),this.main=null,this.stage=null)}},{key:"focus",value:function(){var t;null===(t=this.stage)||void 0===t||t.__canvas.element.focus()}},{key:"dispatchMainEvent",value:function(t){var e,n=this;null===(e=this.stage)||void 0===e||e.__withContext((function(){var e;null===(e=n.main)||void 0===e||e.dispatchEvent(t)}))()}},{key:"handleExternalEvent",value:function(t){var e,n,r,i=this;switch(t.type){case"connect-multiplayer":this.root.modal.present({type:"connect-multiplayer",onEnterAddress:function(t){i.focus();var e=i.main;if(e){i.dispatchMainEvent(new ht(ht.GOTO,"MultiplayerMenu","QuickPlay"));var n=new Le(i.root,t);i.multiplayer=n,e.multiplayer.quickPlayLobby.step=1,n.connect().then((function(){e.multiplayer.quickPlayLobby.step=2})).catch((function(t){i.multiplayer&&i.multiplayer.logMessage("Cannot connect to server: ".concat(t),16711680)}))}}});break;case"disconnect-multiplayer":null===(e=this.multiplayer)||void 0===e||e.disconnect(),this.multiplayer=null;break;case"report-position":var s,o=g()(t.position,7),a=o[1],l=o[2],c=o[3],u=o[4],h=o[5],f=o[6];null===(s=this.multiplayer)||void 0===s||s.reportPosition(a,l,c,u,h,f).catch((function(t){return console.log(t)}));break;case"report-checkpoint":null===(n=this.multiplayer)||void 0===n||n.reportCheckpoint(t.id).catch((function(t){return console.log(t)}));break;case"give-kudo":null===(r=this.multiplayer)||void 0===r||r.giveKudo(t.targetId).catch((function(t){return console.log(t)}));break;case"sp-menu-start":this.isInSPMenu=!0;break;case"sp-menu-end":this.isInSPMenu=!1;break;case"modify-start":this.isInModify=!0;break;case"modify-end":this.isInModify=!1}}},{key:"checkVersion",value:function(){var t,e={},n=localStorage.getItem("LastGameClientVersion"),r=yt.map((function(t){return t[0]})),i=!r.includes(null!=n?n:""),s=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Me(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(yt);try{for(s.s();!(t=s.n()).done;){var o=P()(t.value),a=o[0],l=o.slice(1);i?e[a]=l:a===n&&(i=!0)}}catch(t){s.e(t)}finally{s.f()}Object.keys(e).length>0&&this.root.modal.present({type:"whats-new",newVersions:e}),localStorage.setItem("LastGameClientVersion",r[r.length-1])}},{key:"isActive",get:function(){return!this.root.modal.shouldSuspendGame}},{key:"instance",get:function(){if(!this.main)throw new Error("Game is not started yet");return this.main}}]),t}(),Ae={};Ae.character1=new URL(n(7214),n.b),Ae.character35=new URL(n(8773),n.b),Ae.character83=new URL(n(9889),n.b),Ae.character96=new URL(n(1523),n.b),Ae.character316=new URL(n(5534),n.b),Ae.character334=new URL(n(1625),n.b),Ae.character560=new URL(n(9224),n.b),Ae.character570=new URL(n(4718),n.b),Ae.character622=new URL(n(578),n.b),Ae.character627=new URL(n(7490),n.b),Ae.character630=new URL(n(3566),n.b),Ae.character632=new URL(n(1712),n.b),Ae.character663=new URL(n(7890),n.b),Ae.character761=new URL(n(1089),n.b),Ae.character765=new URL(n(6513),n.b),Ae.character796=new URL(n(134),n.b),Ae.character806=new URL(n(9219),n.b),Ae.character810=new URL(n(3285),n.b),Ae.character813=new URL(n(2308),n.b),Ae.character819=new URL(n(3031),n.b),Ae.character863=new URL(n(7610),n.b),Ae.character871=new URL(n(5069),n.b),Ae.character1020=new URL(n(1558),n.b),Ae.character1028=new URL(n(6344),n.b),Ae.character1030=new URL(n(5708),n.b),Ae.character1084=new URL(n(1913),n.b),Ae.character1086=new URL(n(4916),n.b),Ae.character1088=new URL(n(1862),n.b),Ae.character1090=new URL(n(2764),n.b),Ae.character1092=new URL(n(8365),n.b),Ae.character47=new URL(n(3495),n.b),Ae.character48=new URL(n(1229),n.b),Ae.character172=new URL(n(9833),n.b),Ae.character178=new URL(n(1494),n.b),Ae.character179=new URL(n(8453),n.b),Ae.character180=new URL(n(994),n.b),Ae.character181=new URL(n(3278),n.b),Ae.character182=new URL(n(2489),n.b),Ae.character183=new URL(n(5790),n.b),Ae.character184=new URL(n(9347),n.b),Ae.character185=new URL(n(6837),n.b),Ae.character186=new URL(n(8687),n.b),Ae.character187=new URL(n(3023),n.b),Ae.character188=new URL(n(9542),n.b),Ae.character189=new URL(n(3402),n.b),Ae.character190=new URL(n(3289),n.b),Ae.character191=new URL(n(2874),n.b),Ae.character192=new URL(n(1919),n.b),Ae.character193=new URL(n(5082),n.b),Ae.character194=new URL(n(6946),n.b),Ae.character195=new URL(n(8062),n.b),Ae.character196=new URL(n(5502),n.b),Ae.character197=new URL(n(4825),n.b),Ae.character198=new URL(n(8733),n.b),Ae.character199=new URL(n(2477),n.b),Ae.character200=new URL(n(6011),n.b),Ae.character201=new URL(n(9635),n.b),Ae.character202=new URL(n(2889),n.b),Ae.character203=new URL(n(654),n.b),Ae.character204=new URL(n(3648),n.b),Ae.character205=new URL(n(1983),n.b),Ae.character206=new URL(n(1957),n.b),Ae.character207=new URL(n(7391),n.b),Ae.character208=new URL(n(3090),n.b),Ae.character209=new URL(n(4913),n.b),Ae.character210=new URL(n(7416),n.b),Ae.character256=new URL(n(81),n.b);const De=JSON.parse('{"data":8859105,"character1":21578,"character35":1034,"character83":678,"character96":9958,"character316":218619,"character334":48525,"character560":28058,"character570":2930,"character622":47632,"character627":716042,"character630":363469,"character632":28793,"character663":777314,"character761":29531,"character765":67295,"character796":6491,"character806":10944,"character810":9119,"character813":11300,"character819":11310,"character863":1032,"character871":441,"character1020":21084,"character1028":49340,"character1030":23598,"character1084":615441,"character1086":616205,"character1088":635596,"character1090":636370,"character1092":634154,"character47":6890,"character48":2730,"character172":92170,"character178":349960,"character179":349960,"character180":116480,"character181":27820,"character182":1170,"character183":16120,"character184":2340,"character185":29380,"character186":20280,"character187":1040,"character188":307580,"character189":307580,"character190":102440,"character191":1300,"character192":243750,"character193":243750,"character194":81250,"character195":398320,"character196":243100,"character197":2600,"character198":315900,"character199":315900,"character200":105170,"character201":780,"character202":1300,"character203":313560,"character204":313560,"character205":104390,"character206":8320,"character207":2470,"character208":1950,"character209":13130,"character210":5460,"character256":1820}'),Oe=JSON.parse('{"width":16000,"height":10000,"fps":30,"backgroundColor":13421772}');var Ne=new URL(n(7374),n.b);Ae.data=Ne;for(var Fe=0,Be=Object.entries(Ae);Fe<Be.length;Fe++){var Ie=g()(Be[Fe],2),je=Ie[0],Ue=Ie[1];Ae[je]={url:Ue,size:De[je]}}var Ve={data:"data",properties:Oe,assets:Ae},Ge=function t(e,n){R()(this,t),this.got=!1,this.achName=e,this.description=n};var He=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t,e){var n;return R()(this,i),(n=r.call(this,t,!0,!1)).achNum=e,n}return E()(i,[{key:"clone",value:function(){return new i(this.type,this.achNum)}},{key:"toString",value:function(){return this.formatToString("AchEvent","type","bubbles","cancelable","eventPhase")}}]),i}(rt.flash.events.Event);T()(He,"SEND","sendr");var Ke=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(102,t.frame103),t}return E()(i,[{key:"frame103",value:function(){this.parent.killAch(this)}}]),i}(rt.flash.display.MovieClip);var ze=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var qe=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var We=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Xe=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Ye=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip),Je=n(9168),Ze=n.n(Je),Qe=n(8183),$e=n.n(Qe);var tn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).bmpOffsetX=0,t.bmpOffsetY=0,t.canvasWidth=0,t.alphaFade=!0,t.canvasHeight=0,t}return E()(i,[{key:"alphaFader",value:function(){var t=new rt.flash.geom.ColorTransform(1,1,1,.99,0,0,0,0);this.bmpData.colorTransform(new rt.flash.geom.Rectangle(this.bmpOffsetX,this.bmpOffsetY,this.canvasWidth,this.canvasHeight),t)}},{key:"drawMovieClip",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"normal";1==e&&2==n&&3==r&&(e=t.x,n=t.y,r=t.rotation);var o=new rt.flash.geom.Matrix;o.translate(e-this.bmpOffsetX,n-this.bmpOffsetY),-1==t.scaleX&&(o.scale(-1,1),o.translate(2*t.x,0)),this.bmpData.draw(t,o,i,s)}},{key:"getAlpha",value:function(t,e){return this.bmpData.getPixel32(t,e)>>24&255}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:550,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;this.bmp&&(this.bmpData.dispose(),this.removeChild(this.bmp)),this.bmpData=new rt.flash.display.BitmapData(t,e,!0,16777215),this.bmp=new rt.flash.display.Bitmap(this.bmpData),this.addChild(this.bmp),this.canvasWidth=t,this.canvasHeight=e}},{key:"kill",value:function(){this.bmpData.dispose()}},{key:"lineTo",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,a=new rt.flash.display.MovieClip;a.graphics.lineStyle(i,s,o),a.graphics.moveTo(t,e),a.graphics.lineTo(n,r),this.drawMovieClip(a),a=null}},{key:"ping",value:function(){this.alphaFade&&this.alphaFader()}}]),i}(rt.flash.display.MovieClip);var en=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip),nn=function(){function t(){R()(this,t)}return E()(t,null,[{key:"autoElastic",value:function(t,e,n,r,i){return(e+=(n-t)*r)*i}},{key:"colourMe",value:function(t,e){var n=t.transform.colorTransform;n.color=e,t.transform.colorTransform=n}},{key:"ease",value:function(t,e,n){return t-n*(t-e)/2}},{key:"elastic",value:function(t,e,n,r,i){return(e+=(n-t)*r)*i}},{key:"removeColour",value:function(t){t.transform.colorTransform=new rt.flash.geom.ColorTransform}}]),t}();var rn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).id=0,t.checkPointFlags=new Array,t.playerList=new Array,t}return E()(i,[{key:"addFlag",value:function(t,e,n){for(var r=null,i=0;i<this.playerList.length;i++)if(t==this.playerList[i])return;this.playerList.push(t),(r=new en).x=0,r.y=this.checkPointFlags.length*(r.height/2)-40,nn.colourMe(r.flag.parts1,e),nn.colourMe(r.flag.parts2,n),this.checkPointFlags.push(r),this.addChild(r),t.isMain&&this.dispatchEvent(new ht(ht.SEND,"CHECK"))}},{key:"isNew",value:function(t){for(var e=0;e<this.playerList.length;e++)if(t==this.playerList[e])return!1;return!0}}]),i}(rt.flash.display.MovieClip);var sn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var on=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).posX=0,t.posY=0,t.holdY=0,t.tileSize=25,t.myColour=0,t.touched=!1,t.holdX=0,t.type=1,t.painted=!1,t}return E()(i,[{key:"init",value:function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.holdX=this.x,this.holdY=this.y,this.posX=Math.floor(this.x/this.tileSize),this.posY=Math.floor(this.y/this.tileSize),this.name="tile"+this.posX+"x"+this.posY}}]),i}(rt.flash.display.MovieClip);var an,ln=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(on);!function(t){t[t.FlowNormal=0]="FlowNormal",t[t.FlowDisabled=1]="FlowDisabled",t[t.FlowAlways=2]="FlowAlways",t[t.FlowModeMask=3]="FlowModeMask",t[t.IsProtected=4]="IsProtected",t[t.AllowSuicide=8]="AllowSuicide",t[t.PauseUnaffectPlayer=16]="PauseUnaffectPlayer",t[t.ShowTeleporterName=32]="ShowTeleporterName"}(an||(an={}));var cn=n(4316),un=new TextDecoder,hn=function(){function t(e){R()(this,t),T()(this,"offset",0),this.data=e}return E()(t,[{key:"readByte",value:function(){var t=this.data.getUint8(this.offset);return this.offset++,t}},{key:"readInt32",value:function(){var t=this.data.getInt32(this.offset,!0);return this.offset+=4,t}},{key:"readFloat",value:function(){var t=this.data.getFloat32(this.offset,!0);return this.offset+=4,t}},{key:"readByteLengthString",value:function(){var t=this.readByte(),e=this.data.buffer.slice(this.offset,this.offset+t);return this.offset+=t,un.decode(e)}}]),t}(),fn=/^(.+)#([a-zA-Z0-9+/]+=*)$/,dn={s:"start-point",e:"end-point",b:"tile",h:"half-tile"," ":"invisible-tile",x:"bouncer",k:"spikes",p:"pop-spikes",f:"fall-spikes",l:"laser-cannon",a:"swinging-axe",g:"grinder",c:"checkpoint",t:"teleporter","<":"left-treadmill",">":"right-treadmill",q:"text"},pn=/^(.+)~#-([a-zA-Z0-9+/]+=*)~$/,yn={2:"start-point",1:"end-point",3:"tile",7:"half-tile",4:"invisible-tile",12:"bouncer",6:"spikes",5:"pop-spikes",13:"fall-spikes",14:"laser-cannon",9:"swinging-axe",8:"grinder",16:"checkpoint",15:"teleporter",11:"left-treadmill",10:"right-treadmill",17:"text"},vn=new Set(["pop-spikes","grinder","swinging-axe","bouncer","teleporter","text"]);function mn(t){if(function(t){return fn.test(t)}(t))return function(t){for(var e=fn.exec(t),n=g()(e,3),r=n[1],i=n[2],s=atob(i),o=new DataView((0,cn.inflateRaw)(s).buffer),a=new hn(o),l=a.readInt32(),c=[],u=0;u<l;u++){var h=String.fromCodePoint(a.readByte()),f=dn[h];if(!f)throw new Error("Unknown level object type: ".concat(JSON.stringify(h)));var d=void 0;"text"===f&&(d=a.readByteLengthString());var p=a.readByteLengthString(),y=[a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat()];c.push({type:f,name:p,matrix:y,text:d})}return{name:r,objects:c,flags:0}}(t);if(function(t){return pn.test(t)}(t))return function(t){var e=pn.exec(t),n=g()(e,3),r=n[1],i=n[2],s=atob(i),o=new DataView((0,cn.inflateRaw)(s).buffer),a=new hn(o),l=a.readInt32();if(1447841861!=l){var c=l.toString(16).padStart(8,"0");throw new Error("Invalid level signature: ".concat(c))}var u=a.readByte();if(1!==u)throw new Error("Invalid level version: ".concat(u));a.offset+=2;var h=a.readByte();h&an.IsProtected&&(a.offset+=16);var f=a.readInt32(),d=[];d.push([1,0,0,1,0,0]);for(var p=0;p<f;p++)d.push([a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),0,0]);for(var y=a.readInt32(),v=[],m=0;m<y;m++){var b=a.readByte(),_=yn[127&b];if(!_)throw new Error("Unknown level object type: ".concat(b));var w=void 0,k="";if(vn.has(_)){var x=a.readByteLengthString();"text"===_?w=x:k=x}var R=void 0;(R=128&b?mt()(d[a.readInt32()]):mt()(d[0]))[4]=a.readFloat(),R[5]=a.readFloat(),v.push({type:_,name:k,matrix:R,text:w})}return{name:r,objects:v,flags:h}}(t);throw new Error("Invalid level code")}function gn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return bn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _n=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"flags",an.ShowTeleporterName),T()(Ze()(t),"lockCamX",!1),T()(Ze()(t),"lockCamY",!0),t}return E()(i,[{key:"__preInit",value:function(){this.tMaxX=100,this.tMaxY=50,this.levelName="Multiplayer",this.obstacleColour=13421772,this.createdArray=!1,this.levelColour=3355443,this.lastX=0,this.lastY=0,this.checkPointID=0,this.levelWidth=400,this.maxWidth=0,this.levelHeight=800,this.levelType="SP",this.tArr=new Array,this.toPush=new Array,this.canvas=new tn,this.timeString="",this.timeRank="",this.popSpikes=new Array,this.tiles=new Array,this.halfTiles=new Array,this.plates=new Array,this.laserGuns=new Array,this.spikes=new Array,this.swingingAxes=new Array,this.teleporters=new Array,this.fallingSpikes=new Array,this.grinders=new Array,this.bouncers=new Array,this.laserCannons=new Array,this.checkPoints=new Array,$e()(ct()(i.prototype),"__preInit",this).call(this)}},{key:"addCheckpoint",value:function(t){var e=new rn;this.addChild(e),e.x=t.x,e.y=t.y,e.id=this.checkPointID,this.checkPointID++,this.checkPoints.push(e)}},{key:"applyObstacleColour",value:function(t){nn.colourMe(t,this.obstacleColour)}},{key:"createArray",value:function(){var t=0;this.tArr.splice(0,this.tArr.length);for(var e=0;e<this.tMaxY;e++)for(this.tArr.push(new Array),t=0;t<this.tMaxX;t++)this.tArr[e].push(rt.__internal.avm2.Runtime.uint(0));this.canvas.init(3e3,3e3),this.addChild(this.canvas)}},{key:"createBouncer",value:function(t){this.bouncers.push(t),this.createTileAt(t,99),this.applyObstacleColour(t)}},{key:"createEndPoint",value:function(t){this.createTileAt(t,4)}},{key:"createFallingSpike",value:function(t){this.fallingSpikes.push(t),this.applyObstacleColour(t)}},{key:"createGrinder",value:function(t){this.grinders.push(t),this.applyObstacleColour(t)}},{key:"createHalfBlock",value:function(t){this.createTileAt(t,3)}},{key:"createInvisibleBlock",value:function(t){this.createTileAt(t,98)}},{key:"createLaserCannon",value:function(t){this.laserCannons.push(t),this.applyObstacleColour(t.barrel)}},{key:"createLaserGun",value:function(t){this.laserGuns.push(t),this.applyObstacleColour(t.gunBarrel)}},{key:"createPlate",value:function(t){this.plates.push(t),this.applyObstacleColour(t)}},{key:"createPopSpikes",value:function(t){this.popSpikes.push(t),t.inside.spikes.hitA.visible=!1,this.applyObstacleColour(t)}},{key:"createSpike",value:function(t){this.createSpikeAt(t)}},{key:"createSpikeAt",value:function(t){var e=new sn;e.x=Math.round(t.x),e.y=Math.round(t.y),e.rotation=t.rotation,this.addChild(e),e.hitA.visible=!1,this.applyObstacleColour(e),this.spikes.push(e),t.visible=!1}},{key:"createStartPoint",value:function(t){this.createTileAt(t,2)}},{key:"createSwingingAxe",value:function(t){this.swingingAxes.push(t),t.axe.side0.visible=!1,t.axe.side1.visible=!1,this.applyObstacleColour(t)}},{key:"createTeleporter",value:function(t){this.teleporters.push(t),this.applyObstacleColour(t)}},{key:"createTile",value:function(t){this.createTileAt(t,1)}},{key:"createTileAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.toPush.push([t,e])}},{key:"createTreadmillBlock",value:function(t,e){"L"==e?this.createTileAt(t,5):this.createTileAt(t,6)}},{key:"generateLevel",value:function(){this.preInitCheck(),this.maxWidth=0,this.maxHeight=0,this.canvas.init(3e3,3e3),this.addChild(this.canvas);var t,e=[],n=gn(this.toPush);try{for(n.s();!(t=n.n()).done;){var r=g()(t.value,2),i=r[0],s=r[1],o=void 0;if(o="SP"==this.levelType?new on:new ln,i.rotation%90==0&&0!==i.rotation){i.addChild(o);var a=o.getBounds(this.canvas);i.removeChild(o),o.x=Math.round(a.x),o.y=Math.round(a.y)}else o.x=Math.round(i.x),o.y=Math.round(i.y),o.rotation=i.rotation;switch(o.x>this.maxWidth&&(this.maxWidth=o.x),o.y>this.maxHeight&&(this.maxHeight=o.y),o.typeOf=s,3===o.typeOf?this.halfTiles.push(o):i.rotation%90!=0||99===o.typeOf&&i.name.startsWith("t")||(this.tiles.push(o),o.init()),e.push(o),4!=s&&"SP"==this.levelType&&nn.colourMe(o,this.levelColour),s){case 1:o.x<3e3&&(this.canvas.drawMovieClip(o,o.x,o.y,0,o.transform.colorTransform),o.visible=!1);break;case 2:this.startPoint=o;break;case 4:this.endPoint=o}}}catch(t){n.e(t)}finally{n.f()}for(var l=0,c=e;l<c.length;l++){var u=c[l];this.addChild(u)}var h,f=gn(this.toPush);try{for(f.s();!(h=f.n()).done;){var d=g()(h.value,2),p=d[0];99!=d[1]&&this.removeChild(p)}}catch(t){f.e(t)}finally{f.f()}for(var y=0,v=e;y<v.length;y++){var m=v[y];m.currentFrame!==m.typeOf?m.gotoAndStop(m.typeOf):m.stop()}this.toPush.splice(0,this.toPush.length);for(var b=0;b<this.teleporters.length;b++)this.teleporters[b].init();this.uniqueLevelInit()}},{key:"init",value:function(){this.levelWidth=this.width,this.levelHeight=this.height}},{key:"kill",value:function(){this.canvas.kill()}},{key:"ping",value:function(){}},{key:"preInitCheck",value:function(){}},{key:"repaint",value:function(){for(var t=0;t<this.spikes.length;t++)nn.colourMe(this.spikes[t],this.obstacleColour),this.applyObstacleColour(this.spikes[t]);for(t=0;t<this.swingingAxes.length;t++)nn.colourMe(this.swingingAxes[t],this.obstacleColour);for(t=0;t<this.teleporters.length;t++)nn.colourMe(this.teleporters[t],this.obstacleColour);for(t=0;t<this.fallingSpikes.length;t++)nn.colourMe(this.fallingSpikes[t],this.obstacleColour);for(t=0;t<this.grinders.length;t++)nn.colourMe(this.grinders[t],this.obstacleColour);for(t=0;t<this.laserCannons.length;t++)nn.colourMe(this.laserCannons[t].barrel,this.obstacleColour);for(t=0;t<this.bouncers.length;t++)nn.colourMe(this.bouncers[t],this.obstacleColour)}},{key:"setPlayer",value:function(t){this.player=t}},{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(rt.flash.display.MovieClip),wn=function(){function t(){R()(this,t)}return E()(t,null,[{key:"ceilTo",value:function(t,e){return e*Math.ceil(t/e)}},{key:"chance",value:function(e){return 0==t.random(e)?1:0}},{key:"degToRad",value:function(t){return t*Math.PI/180}},{key:"dist",value:function(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}},{key:"floorTo",value:function(t,e){return e*Math.floor(t/e)}},{key:"getRotationDifference",value:function(t,e){var n=e,r=t-n;return r>180?n+=360:r<-180&&(n-=360),n-t}},{key:"midPoint",value:function(t,e){var n=(t.x+e.x)/2,r=(t.y+e.y)/2;return new rt.flash.geom.Point(n,r)}},{key:"pythagH",value:function(t,e){return Math.sqrt(t*t+e*e)}},{key:"random",value:function(t){return Math.floor(Math.random()*t)}},{key:"randomBoolean",value:function(){return 0!=t.random(2)}},{key:"randomColour",value:function(){return 16777215*Math.random()}},{key:"range",value:function(e){return e-t.random(2*e+1)}},{key:"restrict",value:function(t,e,n){return Math.max(Math.min(t,n),e)}},{key:"roman",value:function(t){for(var e=void 0,n=void 0,r="",i=new Array("IIII","V","XXXX","L","CCCC","D","MMMM"),s=0;s<i.length;s++)n=t%(e=i[s].length+1),r=i[s].substr(0,n)+r,t=(t-n)/e;return(r=(r=(r=(r=(r=r.replace(/DCCCC/g,"CM")).replace(/CCCC/g,"CD")).replace(/LXXXX/g,"XC")).replace(/XXXX/g,"XL")).replace(/VIIII/g,"IX")).replace(/IIII/g,"IV")}},{key:"rotateTo",value:function(t,e,n,r){return 180*-Math.atan2(n-t,r-e)/Math.PI}},{key:"roundDecimal",value:function(t,e){return rt.__internal.avm2.Runtime.int(t*Math.pow(10,e))/Math.pow(10,e)}},{key:"roundTo",value:function(t,e){return e*Math.round(t/e)}},{key:"toHex",value:function(t){for(var e="",n=0,r=t;r>0;)switch(n=r%16,r/=16,n){case 10:e="A"+e;continue;case 11:e="B"+e;continue;case 12:e="C"+e;continue;case 13:e="D"+e;continue;case 14:e="E"+e;continue;case 15:e="F"+e;continue;default:e=n+e;continue}return e}}]),t}();var kn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).thudTresh=2,t.holdDown=!1,t.guyTL=!1,t.guyTM=!1,t.xVel=0,t.guyTR=!1,t.xLove=0,t.guyLM=!1,t.yMax=20,t.cblx=0,t.cbly=0,t.holdCounter=0,t.yAcc=1,t.hops=-8,t.cbmy=0,t.cmx=0,t.cbmx=0,t.crmx=0,t.crmy=0,t.yVel=0,t.bounceTolerance=0,t.cmy=0,t.ctrx=0,t.ctry=0,t.yGrav=.6,t.playerSize=0,t.lastY=0,t.bounce=-.3,t.dXVel=8,t.yLove=3,t.lastX=0,t.modX=0,t.playerJump=!1,t.rotSpeed=1,t.typeOf="none",t.holdUp=!1,t.ctlx=0,t.ctly=0,t.guyRM=!1,t.xMax=30,t.xF=0,t.tileSize=25,t.clmx=0,t.clmy=0,t.guyBM=!1,t.guyBR=!1,t.guyBL=!1,t.ctmy=0,t.cbrx=0,t.cbry=0,t.dYVel=0,t.xAcc=1,t.ctmx=0,t.yF=1,t.jumpCounter=0,t.jumping=!1,t.jumpLevel=!1,t.xGrav=0,t.curLevel=new _n,t.targetObject=Ze()(t),t}return E()(i,[{key:"bounding",value:function(){this.yVel<0?this.checkTile(this.x,this.y+this.yVel,0,this.curLevel)?(this.y=this.y+this.yVel,this.yGrav<0&&(this.y=Math.ceil(this.y))):(this.xVel=this.xVel*this.xF,this.yVel=this.yVel*this.bounce,this.rotSpeed=-1*this.rotSpeed,this.tr?(this.y=this.tr.y+this.tileSize+this.targetObject.height,this.hitBlock(this.tr),this.touchBlock(this.tr)):this.tl&&(this.y=this.tl.y+this.tileSize+this.targetObject.height,this.hitBlock(this.tl),this.touchBlock(this.tl)),this.yVel<this.thudTresh&&this.yVel>0-this.thudTresh&&(this.yVel=0),this.yGrav<0&&(this.jumping=!1)):this.yVel>0&&(this.checkTile(this.x,this.y+this.yVel,1,this.curLevel)?this.y=this.y+this.yVel:(this.yVel<=this.bounceTolerance&&(this.yVel,this.bounceTolerance),this.xVel=this.xVel*this.xF,this.yVel=this.yVel*this.bounce,this.yGrav>0&&(this.jumping=!1),this.bl?(this.y=this.bl.y,this.touchBlock(this.bl)):this.br?(this.y=this.br.y,this.touchBlock(this.br)):this.bm&&(this.y=this.bm.y,this.touchBlock(this.bm)),this.yVel<this.thudTresh&&this.yVel>0-this.thudTresh&&(this.yVel=0),Math.abs(this.yVel)>6?this.rotSpeed=this.rotSpeed*(wn.random(8)-4):this.rotSpeed=.5*this.rotSpeed)),this.xVel<0?this.checkTile(this.x+this.xVel+this.modX,this.y,3,this.curLevel)?this.x=this.x+(this.xVel+this.modX):(this.yVel=this.yVel*this.yF,this.xVel=this.xVel*this.bounce,this.xVel,this.bounceTolerance,this.bl?(this.x=this.bl.x+this.targetObject.width/2+this.tileSize,this.touchBlock(this.bl)):this.br&&(this.x=this.br.x-this.targetObject.width/2+this.tileSize,this.touchBlock(this.br)),this.xVel<this.thudTresh&&this.xVel>0-this.thudTresh&&(this.xVel=0)):this.xVel>0&&(this.checkTile(this.x+this.xVel+this.modX,this.y,2,this.curLevel)?this.x=this.x+(this.xVel+this.modX):(this.yVel=this.yVel*this.yF,this.xVel=this.xVel*this.bounce,this.xVel,this.bounceTolerance,this.br?(this.x=this.br.x-this.targetObject.width/2,this.touchBlock(this.br)):this.bl&&(this.x=this.bl.x+this.targetObject.width/2,this.touchBlock(this.bl)),this.xVel<this.thudTresh&&this.xVel>0-this.thudTresh&&(this.xVel=0))),this.xVel>this.xMax&&(this.xVel=this.xMax),this.xVel<0-this.xMax&&(this.xVel=0-this.xMax),this.yVel>this.yMax&&(this.yVel=this.yMax),this.yVel<0-this.yMax&&(this.yVel=0-this.yMax)}},{key:"bounding2",value:function(){this.yVel<0?this.checkArray(this.x,this.y+this.yVel,0,this.curLevel)?(this.y=this.y+this.yVel,this.yGrav<0&&(this.y=Math.ceil(this.y))):(this.xVel=this.xVel*this.xF,this.yVel=this.yVel*this.bounce,this.rotSpeed=-1*this.rotSpeed,this.tr?(this.y=this.tr.y+this.tileSize+this.targetObject.height,this.hitBlock(this.tr),this.touchBlock(this.tr)):this.tl&&(this.y=this.tl.y+this.tileSize+this.targetObject.height,this.hitBlock(this.tl),this.touchBlock(this.tl)),this.yVel<this.thudTresh&&this.yVel>0-this.thudTresh&&(this.yVel=0),this.yGrav<0&&(this.jumping=!1)):this.yVel>0&&(this.checkArray(this.x,this.y+this.yVel,1,this.curLevel)?this.y=this.y+this.yVel:(this.yVel<=this.bounceTolerance&&(this.yVel,this.bounceTolerance),this.xVel=this.xVel*this.xF,this.yVel=this.yVel*this.bounce,this.yGrav>0&&(this.jumping=!1),this.bl?(this.y=this.bl.y,this.touchBlock(this.bl)):this.br?(this.y=this.br.y,this.touchBlock(this.br)):this.bm&&(this.y=this.bm.y,this.touchBlock(this.bm)),this.yVel<this.thudTresh&&this.yVel>0-this.thudTresh&&(this.yVel=0),Math.abs(this.yVel)>6?this.rotSpeed=this.rotSpeed*(wn.random(8)-4):this.rotSpeed=.5*this.rotSpeed)),this.xVel<0?this.checkArray(this.x+this.xVel,this.y,3,this.curLevel)?this.x=this.x+this.xVel:(this.yVel=this.yVel*this.yF,this.xVel=this.xVel*this.bounce,this.xVel,this.bounceTolerance,this.bl?(this.x=this.bl.x+this.targetObject.width/2+this.tileSize,this.touchBlock(this.bl)):this.br&&(this.x=this.br.x-this.targetObject.width/2+this.tileSize,this.touchBlock(this.br)),this.xVel<this.thudTresh&&this.xVel>0-this.thudTresh&&(this.xVel=0)):this.xVel>0&&(this.checkArray(this.x+this.xVel,this.y,2,this.curLevel)?this.x=this.x+this.xVel:(this.yVel=this.yVel*this.yF,this.xVel=this.xVel*this.bounce,this.xVel,this.bounceTolerance,this.br&&(this.x=this.br.x-this.targetObject.width/2,this.touchBlock(this.br)),this.bl&&(this.x=this.bl.x+this.targetObject.width/2,this.touchBlock(this.bl)),this.xVel<this.thudTresh&&this.xVel>0-this.thudTresh&&(this.xVel=0))),this.xVel>this.xMax&&(this.xVel=this.xMax),this.xVel<0-this.xMax&&(this.xVel=0-this.xMax),this.yVel>this.yMax&&(this.yVel=this.yMax),this.yVel<0-this.yMax&&(this.yVel=0-this.yMax)}},{key:"checkArray",value:function(t,e,n,r){this.guyTL=!1,this.guyTR=!1,this.guyBL=!1,this.guyBR=!1,this.guyBM=!1,this.guyTM=!1,this.guyLM=!1,this.guyRM=!1;var i=this.targetObject.width,s=this.targetObject.height;this.ctlx=t-i/2+1,this.ctly=e-s+1,this.ctrx=t+i/2-1,this.ctry=e-s+1,this.cbrx=t+i/2-1,this.cbry=e-1,this.cblx=t-i/2+1,this.cbly=e-1,this.clmx=t-i/2+1,this.clmy=e-s/2+1,this.ctmx=t+1,this.ctmy=e-s+1,this.crmx=t+i/2-1,this.crmy=e-s/2+1,this.cbmx=t+1,this.cbmy=e-1,this.cmx=this.ctmx,this.cmy=this.clmy;var o=this.curLevel.tArr[Math.floor(this.ctly/this.tileSize)][Math.floor(this.ctlx/this.tileSize)],a=this.curLevel.tArr[Math.floor(this.ctry/this.tileSize)][Math.floor(this.ctrx/this.tileSize)],l=this.curLevel.tArr[Math.floor(this.cbry/this.tileSize)][Math.floor(this.cbrx/this.tileSize)],c=this.curLevel.tArr[Math.floor(this.cbly/this.tileSize)][Math.floor(this.cblx/this.tileSize)],u=this.curLevel.tArr[Math.floor(this.ctmy/this.tileSize)][Math.floor(this.ctmx/this.tileSize)],h=this.curLevel.tArr[Math.floor(this.clmy/this.tileSize)][Math.floor(this.clmx/this.tileSize)],f=this.curLevel.tArr[Math.floor(this.cbmy/this.tileSize)][Math.floor(this.cbmx/this.tileSize)],d=this.curLevel.tArr[Math.floor(this.crmy/this.tileSize)][Math.floor(this.crmx/this.tileSize)];switch(o>0&&(this.guyTL=1==o),a>0&&(this.guyTR=1==a),l>0&&(1==l||2==l&&this.yVel>0?this.guyBR=!0:this.guyBR=!1),c>0&&(1==c||2==c&&this.yVel>0?this.guyBL=!0:this.guyBL=!1),u>0&&(this.guyTM=1==u),f>0&&(this.guyBM=1==f),h>0&&(this.guyLM=1==h),d>0&&(this.guyRM=1==d),this.yGrav>0?((this.guyBM||this.guyBL||this.guyBR)&&(this.yLove=0,this.holdCounter=0),0==this.playerSize&&(this.guyBM&&this.guyBL||this.guyBM&&this.guyBR)&&(this.jumpLevel=!0),1==this.playerSize&&this.guyBR&&this.guyBL&&(this.jumpLevel=!0)):((this.guyTM||this.guyTL||this.guyTR)&&(this.yLove=0,this.holdCounter=0),(this.guyTM&&this.guyTL||this.guyTM&&this.guyTR)&&(this.jumpLevel=!0)),n){case 0:if(this.guyTL||this.guyTR)return!1;case 1:if(this.guyBR||this.guyBL)return!1;case 2:if(this.guyTR||this.guyBR)return!1;case 3:default:if(this.guyTL||this.guyBL)return!1}return!0}},{key:"checkTile",value:function(t,e,n,r){this.guyTL=!1,this.guyTR=!1,this.guyBL=!1,this.guyBR=!1,this.guyBM=!1,this.guyTM=!1,this.guyLM=!1,this.guyRM=!1;var i=this.targetObject.width,s=this.targetObject.height;switch(this.ctlx=t-i/2+1,this.ctly=e-s+1,this.ctrx=t+i/2-1,this.ctry=e-s+1,this.cbrx=t+i/2-1,this.cbry=e-1,this.cblx=t-i/2+1,this.cbly=e-1,this.clmx=t-i/2+1,this.clmy=e-s/2+1,this.ctmx=t+1,this.ctmy=e-s+1,this.crmx=t+i/2-1,this.crmy=e-s/2+1,this.cbmx=t+1,this.cbmy=e-1,this.cmx=this.ctmx,this.cmy=this.clmy,this.tl=this.curLevel.getChildByName("tile"+Math.floor(this.ctlx/this.tileSize)+"x"+Math.floor(this.ctly/this.tileSize)),this.tr=this.curLevel.getChildByName("tile"+Math.floor(this.ctrx/this.tileSize)+"x"+Math.floor(this.ctry/this.tileSize)),this.br=this.curLevel.getChildByName("tile"+Math.floor(this.cbrx/this.tileSize)+"x"+Math.floor(this.cbry/this.tileSize)),this.bl=this.curLevel.getChildByName("tile"+Math.floor(this.cblx/this.tileSize)+"x"+Math.floor(this.cbly/this.tileSize)),this.tm=this.curLevel.getChildByName("tile"+Math.floor(this.ctmx/this.tileSize)+"x"+Math.floor(this.ctmy/this.tileSize)),this.lm=this.curLevel.getChildByName("tile"+Math.floor(this.clmx/this.tileSize)+"x"+Math.floor(this.clmy/this.tileSize)),this.bm=this.curLevel.getChildByName("tile"+Math.floor(this.cbmx/this.tileSize)+"x"+Math.floor(this.cbmy/this.tileSize)),this.rm=this.curLevel.getChildByName("tile"+Math.floor(this.crmx/this.tileSize)+"x"+Math.floor(this.crmy/this.tileSize)),this.mb=this.curLevel.getChildByName("tile"+Math.floor(this.cbmx/this.tileSize)+"x"+Math.floor(this.cbly/this.tileSize)),this.tl&&(1==this.tl.type?(this.guyTL=!0,this.pass(this.tl)):this.guyTL=!1),this.tr&&(1==this.tr.type?(this.guyTR=!0,this.pass(this.tr)):this.guyTR=!1),this.br&&(1==this.br.type?(this.guyBR=!0,this.pass(this.br)):2==this.br.type&&this.yVel>0?this.guyBR=!0:this.guyBR=!1),this.bl&&(1==this.bl.type?(this.guyBL=!0,this.pass(this.bl)):2==this.bl.type&&this.yVel>0?this.guyBL=!0:this.guyBL=!1),this.tm&&(1==this.tm.type?(this.guyTM=!0,this.pass(this.tm)):this.guyTM=!1),this.bm&&(1==this.bm.type?(this.guyBM=!0,this.pass(this.bm)):this.guyBM=!1),this.lm&&(1==this.lm.type?(this.guyLM=!0,this.pass(this.lm)):this.guyLM=!1),this.rm&&(1==this.rm.type?(this.guyRM=!0,this.pass(this.rm)):this.guyRM=!1),this.yGrav>0?((this.guyBM||this.guyBL||this.guyBR)&&(this.yLove=0,this.holdCounter=0),0==this.playerSize&&((this.guyBM&&this.guyBL||this.guyBM&&this.guyBR)&&(this.jumpLevel=!0),this.guyBL&&!this.guyTL&&(this.jumpLevel=!0),this.guyBR&&!this.guyTR&&(this.jumpLevel=!0)),1==this.playerSize&&(this.guyBR&&this.guyBL&&(this.jumpLevel=!0),this.guyBL&&!this.guyTL&&(this.jumpLevel=!0),this.guyBR&&!this.guyTR&&(this.jumpLevel=!0))):((this.guyTM||this.guyTL||this.guyTR)&&(this.yLove=0,this.holdCounter=0),(this.guyTM&&this.guyTL||this.guyTM&&this.guyTR)&&(this.jumpLevel=!0)),n){case 0:if(this.guyTL||this.guyTR)return!1;case 1:if(this.guyBR||this.guyBL)return!1;case 2:if(this.guyTR||this.guyBR)return!1;case 3:default:if(this.guyTL||this.guyBL)return!1}return!0}},{key:"hitBlock",value:function(t){}},{key:"init",value:function(t){this.curLevel=t,this.lastX=this.x,this.lastX=this.y}},{key:"normalHorizontal",value:function(){this.xVel=this.xVel+this.xGrav,this.xGrav>0?(1==this.xLove&&(this.holdUp||this.xVel++,this.xVel>=0&&(this.xLove=2,this.xVel=0)),2!=this.xLove&&3!=this.xLove||this.xVel>0&&(this.xLove=3),3!=this.xLove||this.holdUp||(this.xLove=0,this.holdCounter=0),0==this.xLove&&this.xVel>1.5&&(this.xVel=3),0==this.xLove&&(this.playerJump=!1)):(1==this.xLove&&(this.holdUp||this.xVel--,this.yVel<=0&&(this.xLove=2,this.xVel=0)),2!=this.xLove&&3!=this.xLove||this.xVel<0&&(this.xLove=3),3!=this.xLove||0!=this.xVel||this.holdUp||(this.xLove=0,this.holdCounter=0),0==this.xLove&&this.yVel<1.5&&(this.xLove=3),0==this.xLove&&(this.playerJump=!1))}},{key:"normalVertical",value:function(){this.yVel=this.yVel+this.yGrav,this.yGrav>0?(1==this.yLove&&(this.holdUp||this.yVel++,this.yVel>=0&&(this.yLove=2,this.yVel=0)),2!=this.yLove&&3!=this.yLove||this.yVel>0&&(this.yLove=3),3!=this.yLove||0!=this.yVel||this.holdUp||(this.yLove=0,this.holdCounter=0),0==this.yLove&&this.yVel>1.5&&(this.yLove=3),0==this.yLove&&(this.playerJump=!1)):(1==this.yLove&&(this.holdUp||this.yVel--,this.yVel<=0&&(this.yLove=2,this.yVel=0)),2!=this.yLove&&3!=this.yLove||this.yVel<0&&(this.yLove=3),3!=this.yLove||0!=this.yVel||this.holdUp||(this.yLove=0,this.holdCounter=0),0==this.yLove&&this.yVel<1.5&&(this.yLove=3),0==this.yLove&&(this.playerJump=!1)),0!=this.yLove&&(this.jumpLevel=!1)}},{key:"pass",value:function(t){}},{key:"touchBlock",value:function(t){}},{key:"updateTileInteraction",value:function(){this.lastX=this.x,this.lastY=this.y,this.normalVertical(),this.bounding(),"egg"==this.typeOf&&(this.y=Math.floor(this.y)),"deadaphant"==this.typeOf&&(this.y=Math.floor(this.y))}}]),i}(rt.flash.display.MovieClip);var xn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelNum=0,t.colour=16777215,t.gameMode=0,t.deadCounter=0,t}return E()(i,[{key:"hitBlock",value:function(t){}},{key:"ping",value:function(){this.playerSize=1,this.thudTresh=5,this.xF=.7,this.targetObject=this.hitA,this.updateTileInteraction()}},{key:"touchBlock",value:function(t){}}]),i}(kn);var Rn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Sn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var En=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).bounces=0,t.addFrameScript(0,t.frame1),t.parent.createBouncer(Ze()(t)),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Cn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Tn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).goal=0,t.counter=0,t}return E()(i,[{key:"ping",value:function(){if(this.counter++,this.x=0-this.parent.x,this.counter>=this.goal)return this.counter=0,this.setGoal(),this.cameraFlash.x=wn.random(800),this.cameraFlash.rotation=wn.random(360),this.cameraFlash.y=300+wn.random(200),void this.cameraFlash.play()}},{key:"setGoal",value:function(){this.goal=wn.random(20)+5}}]),i}(rt.flash.display.MovieClip);var Ln=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t,e){var n;return R()(this,i),(n=r.call(this,t,!0))._color=e,n}return E()(i,[{key:"clone",value:function(){return new i(this.type,this.color)}},{key:"toString",value:function(){return this.formatToString("ColorPickerEvent","type","bubbles","cancelable","color")}},{key:"color",get:function(){return this._color}}]),i}(rt.flash.events.Event);T()(Ln,"CHANGE","change"),T()(Ln,"ENTER","enter"),T()(Ln,"ITEM_ROLL_OUT","itemRollOut"),T()(Ln,"ITEM_ROLL_OVER","itemRollOver");var Mn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t){var e;R()(this,i),(e=r.call(this)).colour=0,e.colour2=0,e.playerObject=t,e.addEventListener(rt.flash.events.Event.ENTER_FRAME,e.ping,!1,0,!0),e.addEventListener(rt.flash.events.MouseEvent.CLICK,e.clicky,!1,0,!0),e.pickerA.addEventListener(Ln.ITEM_ROLL_OVER,e.roll),e.pickerB.addEventListener(Ln.ITEM_ROLL_OVER,e.roll),e.pickerA.addEventListener(Ln.CHANGE,e.roll),e.pickerB.addEventListener(Ln.CHANGE,e.roll),e.backToMenuButton.addEventListener(rt.flash.events.MouseEvent.CLICK,e.backButt,!1,0,!0),e.pickerA.selectedColor=e.playerObject.colour,e.pickerB.selectedColor=e.playerObject.colour2,e.runnerBar.runner.colour=e.playerObject.colour,e.runnerBar.runner.colour2=e.playerObject.colour2,e.runnerBar.runner.headType=e.playerObject.headType,e.runnerBar.runner.handType=e.playerObject.handType,e.tagOf.text=e.playerObject.userName;for(var n=0;n<24;n++)e["box"+n].head.gotoAndStop(n+1),e.playerObject.achs[n]?(e["box"+n].lock.visible=!1,e["box"+n].whiteOutline.visible=!0):(e["box"+n].head.visible=!1,e["box"+n].lock.visible=!0,e["box"+n].whiteOutline.visible=!1);for(n=0;n<24;n++)e["item"+n].arm.handGear.gotoAndStop(n+1),e.playerObject.achs[n+24]?(e["item"+n].lock.visible=!1,e["item"+n].whiteOutline.visible=!0):(e["item"+n].arm.handGear.visible=!1,e["item"+n].lock.visible=!0,e["item"+n].whiteOutline.visible=!1);return e}return E()(i,[{key:"backButt",value:function(){this.dispatchEvent(new ht(ht.GOTO,"SaveGame")),this.dispatchEvent(new ht(ht.GOTO,"CharacterSelection","Back"))}},{key:"clicky",value:function(){for(var t=0;t<24;t++)this["box"+t].whiteOutline.hitTestPoint(this.mouseX,this.mouseY)&&(this.runnerBar.runner.headType=this.playerObject.headType=t+1);for(t=0;t<24;t++)this["item"+t].whiteOutline.hitTestPoint(this.mouseX,this.mouseY)&&(this.runnerBar.runner.handType=this.playerObject.handType=t+1)}},{key:"kill",value:function(){this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping),this.pickerA.removeEventListener(Ln.ITEM_ROLL_OVER,this.roll),this.pickerB.removeEventListener(Ln.ITEM_ROLL_OVER,this.roll),this.pickerA.removeEventListener(Ln.CHANGE,this.roll),this.pickerB.removeEventListener(Ln.CHANGE,this.roll),this.backToMenuButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.backButt),this.dispatchEvent(new ut({type:"modify-end"}))}},{key:"ping",value:function(){this.runnerBar.runner.setColours(),this.tagOf.text=this.playerObject.userName}},{key:"roll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t.currentTarget;e==this.pickerA?(this.runnerBar.runner.colour=e.selectedColor,this.playerObject.colour=e.selectedColor):(this.runnerBar.runner.colour2=e.selectedColor,this.playerObject.colour2=e.selectedColor)}}]),i}(rt.flash.display.MovieClip);var Pn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.addCheckpoint(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var An=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Dn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var On=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Nn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Fn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Bn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var In=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var jn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Un=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Vn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.Sprite);var Gn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Hn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Kn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t){var e;return R()(this,i),e=r.call(this),T()(Ze()(e),"user",void 0),T()(Ze()(e),"timer",15),e.user=t,e.whoBeat.text=e.user+" just beat the level!",e}return E()(i,[{key:"ping",value:function(t,e){this.x=t,this.y=e,this.timeOf.text=String(this.timer)}}]),i}(rt.flash.display.MovieClip);var zn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createEndPoint(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var qn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1,14,t.frame15,29,t.frame30),t}return E()(i,[{key:"frame1",value:function(){this.stop()}},{key:"frame15",value:function(){this.parent.loadNextSinglePlayerLevel()}},{key:"frame30",value:function(){this.parent.endFadeOut(this)}}]),i}(rt.flash.display.MovieClip);var Wn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Xn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Yn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Jn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t,e,n){var s;return R()(this,i),(s=r.call(this,i.SCROLL,!1,!1))._direction=t,s._delta=e,s._position=n,s}return E()(i,[{key:"clone",value:function(){return new i(this._direction,this._delta,this._position)}},{key:"toString",value:function(){return this.formatToString("ScrollEvent","type","bubbles","cancelable","direction","delta","position")}},{key:"delta",get:function(){return this._delta}},{key:"direction",get:function(){return this._direction}},{key:"position",get:function(){return this._position}}]),i}(rt.flash.events.Event);T()(Jn,"SCROLL","scroll");var Zn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).achievements=new Array,t}return E()(i,[{key:"addListeners",value:function(){this.holder.backToButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping,!1,0,!0)}},{key:"buttons",value:function(t){switch(t.currentTarget){case this.holder.backToButton:this.dispatchEvent(new ht(ht.GOTO,"FlairMenu","Back"))}}},{key:"handleScrollBarScroll",value:function(t){var e=this.height-50-this.holder.scrollBar_mc.height;this.y=0+this.holder.scrollBar_mc.percent*-e}},{key:"init",value:function(t,e){var n=null;this.playerObject=t,this.achievements=e,this.addListeners();for(var r=0;r<48;r++)n=e[r],this["s"+r].nam.text=n.achName,this["s"+r].desc.text=n.description,this.playerObject.achs[r]?(this["s"+r].lock.visible=!1,r>=24?(this["s"+r].headgear.handGear.gotoAndStop(r-23),this["s"+r].headgear.head.visible=!1,this["s"+r].headgear.head2.visible=!1):(this["s"+r].headgear.head.gotoAndStop(r+1),this["s"+r].headgear.handGear.visible=!1)):this["s"+r].headgear.visible=!1;this.holder.scrollBar_mc.addEventListener(Jn.SCROLL,this.handleScrollBarScroll,!1,0,!0)}},{key:"kill",value:function(){this.holder.backToButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping)}},{key:"ping",value:function(){this.holder.y=0-this.y}},{key:"updateScrollBar",value:function(){var t=this.height-50-this.holder.scrollBar_mc.height;this.holder.scrollBar_mc.maxScrollPosition=t,this.y=0+this.holder.scrollBar_mc.percent*-t}}]),i}(rt.flash.display.MovieClip);var Qn=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var $n=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(634,t.frame635,689,t.frame690),t}return E()(i,[{key:"frame635",value:function(){this.parent.parent.endEnding()}},{key:"frame690",value:function(){this.parent.endEnding()}}]),i}(rt.flash.display.MovieClip);function tr(){return rt.flash.display.Stage.__current.__children[0]}var er=function(){function t(){R()(this,t),this.stageHeight=500,this.lockX=!1,this.lockY=!1,this.enforceLimits=!0,this.yPos=0,this.driftSpeed=.6,this.stageWidth=800,this.camX=0,this.camY=0,this.xPos=0,this.limits=new Array(400,2e3,0,0)}return E()(t,[{key:"init",value:function(t){this.target=t}},{key:"move",value:function(t,e,n){if(!this.lockX&&this.limits[0]<this.limits[1]){var r=-t+this.stageWidth/2,i=this.stageWidth/2-this.limits[0],s=this.stageWidth/2-this.limits[1];this.enforceLimits&&(r=Math.max(Math.min(r,i),s)),this.target.x=n?nn.ease(this.target.x,r,this.driftSpeed):r}if(!this.lockY){var o=-e+this.stageHeight/2,a=this.stageHeight/2-this.limits[2],l=this.stageHeight/2-this.limits[3];this.enforceLimits&&(o=Math.max(Math.min(o,a),l)),this.target.y=n?nn.ease(this.target.y,o,this.driftSpeed):o}this.camX=this.target.x,this.camY=this.target.y}},{key:"ping",value:function(t,e){this.move(t,e,!0)}},{key:"rotateAt",value:function(t,e,n){this.affineTransform=this.target.transform.matrix,this.affineTransform.translate(-e,-n),this.affineTransform.rotate(t),this.affineTransform.translate(e,n),this.target.transform.matrix=this.affineTransform}},{key:"scaleAt",value:function(t,e,n){this.affineTransform=this.target.transform.matrix,this.affineTransform.translate(-e,-n),this.affineTransform.scale(t,t),this.affineTransform.translate(e,n),this.target.transform.matrix=this.affineTransform}}]),t}();var nr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).objects=new Array,t}return E()(i,[{key:"killObject",value:function(t){this.objects[t].parent.removeChild(this.objects[t]),this.objects[t]=null,this.objects.splice(t,1)}},{key:"manage",value:function(t){this.objects.push(t)}},{key:"ping",value:function(){for(var t=null,e=0;e<this.objects.length;e++)(t=this.objects[e]).timerKill?(t.ping(),t.killCounter--,t.killCounter<=0&&(this.killObject(e),e--)):t.currentFrame==t.totalFrames&&(this.killObject(e),e--)}}]),i}(rt.flash.display.MovieClip),rr=function(){function t(){R()(this,t)}return E()(t,null,[{key:"clearKeys",value:function(e){t.keysDown=new Object}},{key:"initialize",value:function(e,n){t.dualKey=n,e.addEventListener(rt.flash.events.KeyboardEvent.KEY_DOWN,t.keyPressed),e.addEventListener(rt.flash.events.KeyboardEvent.KEY_UP,t.keyReleased),e.addEventListener(rt.flash.events.Event.DEACTIVATE,t.clearKeys),t.initialized=!0}},{key:"isDown",value:function(e){if(!t.initialized)throw new Error("Key class has yet been initialized.");if("number"==typeof e)return Boolean(e in t.keysDown);if(t.dualKey){if(e==t.LEFT)return Boolean(t.A in t.keysDown)||Boolean(t.LEFTKEY in t.keysDown);if(e==t.RIGHT)return Boolean(t.D in t.keysDown)||Boolean(t.RIGHTKEY in t.keysDown);if(e==t.UP)return Boolean(t.W in t.keysDown)||Boolean(t.UPKEY in t.keysDown);if(e==t.DOWN)return Boolean(t.S in t.keysDown)||Boolean(t.DOWNKEY in t.keysDown)}return!1}},{key:"isInitialized",value:function(){return t.initialized}},{key:"keyPressed",value:function(e){t.keysDown[e.keyCode]=!0}},{key:"keyReleased",value:function(e){e.keyCode in t.keysDown&&delete t.keysDown[e.keyCode]}}]),t}();T()(rr,"A",65),T()(rr,"allLetters",new Array("a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z")),T()(rr,"ARROWKEYS","arrowKeys"),T()(rr,"D",68),T()(rr,"DOWN","down"),T()(rr,"DOWNKEY",rt.flash.ui.Keyboard.DOWN),T()(rr,"dualKey",!1),T()(rr,"EIGHT",56),T()(rr,"FIVE",53),T()(rr,"FOUR",52),T()(rr,"initialized",!1),T()(rr,"keysDown",new Object),T()(rr,"LEFT","left"),T()(rr,"LEFTKEY",rt.flash.ui.Keyboard.LEFT),T()(rr,"M",77),T()(rr,"NINE",57),T()(rr,"ONE",49),T()(rr,"P",80),T()(rr,"Q",81),T()(rr,"RIGHT","right"),T()(rr,"RIGHTKEY",rt.flash.ui.Keyboard.RIGHT),T()(rr,"S",83),T()(rr,"SEVEN",55),T()(rr,"SIX",54),T()(rr,"THREE",51),T()(rr,"TWO",50),T()(rr,"UP","up"),T()(rr,"UPKEY",rt.flash.ui.Keyboard.UP),T()(rr,"W",87),T()(rr,"WASD","wasd"),T()(rr,"ZERO",48);var ir=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).isMain=!0,t.level=15,t.oldX=0,t.placing=0,t.wins=295,t.oldY=0,t.id=0,t.kudos=10,t.curCheck=0,t.matches=1254,t.headType=3,t.toX=0,t.toY=0,t.handType=12,t.colour=16777215,t.time=45,t.xV=0,t.colour2=16777215,t.tCounter=0,t.userName="bob",t.xp=1500,t.completedLevel=!1,t.yV=0,t}return E()(i,[{key:"addCheckPoint",value:function(t){var e;null===(e=this.checkPoints[t])||void 0===e||e.addFlag(this,this.colour,this.colour2)}},{key:"duck",value:function(){this.gotoAndStop(4)}},{key:"fuel",value:function(){this.setColours()}},{key:"handleSkin",value:function(){var t=this.parent;(!t.isPaused||t.level.flags&an.PauseUnaffectPlayer)&&(this.player.hitHalf?this.duck():this.player.jumpLevel?rr.isDown(rr.LEFT)?(rr.isDown(rr.DOWN)?this.duck():this.player.burningFlow?this.gotoAndStop(5):this.gotoAndStop(2),this.scaleX=-1):rr.isDown(rr.RIGHT)?(rr.isDown(rr.DOWN)?this.duck():this.player.burningFlow?this.gotoAndStop(5):this.gotoAndStop(2),this.scaleX=1):rr.isDown(rr.DOWN)?this.duck():this.gotoAndStop(1):this.gotoAndStop(3),this.x=this.player.x,this.y=this.player.y)}},{key:"init",value:function(t,e){this.player=t,this.colour=this.player.colour,this.colour2=this.player.colour2,this.checkPoints=e}},{key:"ping",value:function(){this.handleSkin(),this.setColours()}},{key:"setChecks",value:function(t){this.checkPoints=t}},{key:"setColours",value:function(){var t=null;this.body.head.gotoAndStop(this.headType),this.body.handGear.handGear.gotoAndStop(this.handType);for(var e=new Array(this.body.cb.i,this.body.db.i,this.body.head.hat,this.body.handGear.handGear),n=0;n<e.length;n++)t=e[n],nn.colourMe(t,this.colour2);var r=new Array(this.body.aa.o,this.body.aa.i,this.body.ba.o,this.body.ba.i,this.body.ab.o,this.body.ab.i,this.body.cb.o,this.body.db.o,this.body.head.o,this.body.body.o,this.body.bb.o,this.body.bb.i,this.body.ca.o,this.body.ca.i,this.body.da.o,this.body.da.i);for(n=0;n<r.length;n++)t=r[n],nn.colourMe(t,this.colour);this.youArrow&&nn.colourMe(this.youArrow.lilArrow,this.colour)}}]),i}(rt.flash.display.MovieClip);function sr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct()(t);if(e){var i=ct()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return at()(this,n)}}var or="false"!==localStorage.isBeamVisible,ar=function(t){st()(n,t);var e=sr(n);function n(){return R()(this,n),e.apply(this,arguments)}return E()(n,null,[{key:"isVisible",get:function(){return or},set:function(t){or=t,localStorage.isBeamVisible=String(t)}}]),n}(rt.flash.display.Shape),lr=function(t){st()(n,t);var e=sr(n);function n(){var t;return R()(this,n),t=e.call(this),T()(Ze()(t),"beam",new ar),t.addFrameScript(0,t.frame1),t.beam.visible=!1,t.addChildAt(t.beam,0),t}return E()(n,[{key:"frame1",value:function(){this.stop()}},{key:"ping",value:function(){$e()(ct()(n.prototype),"ping",this).call(this),this.beam.visible=this.isMain&&ar.isVisible}},{key:"setColours",value:function(){$e()(ct()(n.prototype),"setColours",this).call(this);var t=new rt.flash.geom.ColorTransform;t.alphaMultiplier=.5,t.color=this.colour,this.beam.transform.colorTransform=t}}]),n}(ir);var cr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).ghosts=new Array,t}return E()(i,[{key:"addGhosts",value:function(){for(var t=null,e=0;e<this.logs.length;e++)e!=this.logs.length-1&&(t=new lr,this.addChild(t),this.ghosts.push(t),t.alpha=.2)}},{key:"handleGhosts",value:function(t){for(var e=null,n=null,r=0;r<this.ghosts.length;r++)e=this.ghosts[r],t<this.logs[r].length&&(n=this.logs[r][t],e.x=n[0],e.y=n[1],e.gotoAndStop(n[2]),e.scaleX=n[3])}},{key:"init",value:function(t){this.logs=t}},{key:"killGhosts",value:function(){for(var t=0;t<this.ghosts.length;t++)this.removeChild(this.ghosts[t]),this.ghosts[t]=null;this.ghosts.splice(0,this.ghosts.length)}},{key:"ping",value:function(t){this.handleGhosts(t)}},{key:"reset",value:function(){this.killGhosts(),this.addGhosts()}}]),i}(rt.flash.display.MovieClip);var ur=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(78,t.frame79),t}return E()(i,[{key:"frame79",value:function(){this.dispatchEvent(new ht(ht.GOTO,"LevelEnd","Lobby"))}}]),i}(rt.flash.display.MovieClip);var hr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip),fr=function(){function t(){R()(this,t),this.isAtCheckpoint=!1,this.maxLogLength=1e3,this.maxLogs=1,this.playHead=0,this.logs=new Array}return E()(t,[{key:"newLog",value:function(){this.logs.length>this.maxLogs&&this.logs.splice(0,1);var t=new Array;this.logs.push(t),this.curLog=this.logs[this.logs.length-1]}},{key:"ping",value:function(t){this.curLog.length<this.maxLogLength&&(this.curLog.push(new Array(t.x,t.y,t.currentFrame,t.body.currentFrame,t.scaleX,this.isAtCheckpoint)),this.playHead=this.curLog.length-1)}},{key:"setFromLog",value:function(t){t.x=this.curLog[this.playHead][0],t.y=this.curLog[this.playHead][1],t.gotoAndPlay(this.curLog[this.playHead][2]),t.body.gotoAndPlay(this.curLog[this.playHead][3]),t.scaleX=this.curLog[this.playHead][4]}}]),t}();var dr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).bodyParts=new Array,t}return E()(i,[{key:"addDeadBody",value:function(t,e){var n=0,r=null,i=t;for(n=0;n<6;n++)(r=new xn).x=i.x,r.y=i.y,r.gotoAndStop(n+1),r.init(this.level),nn.colourMe(r,e),r.colour=e,i.y>500?(r.xVel=wn.range(5),r.yVel=-10-wn.random(20)):(r.xVel=wn.range(5),r.yVel=wn.range(5)),this.addChild(r),this.bodyParts.push(r)}},{key:"destroy",value:function(t){var e=null,n=this.bodyParts[t];n.y<=500&&((e=new rt.flash.geom.ColorTransform).color=n.colour,this.bg.drawMovieClip(n,1,2,3,e)),this.removeChild(n),this.bodyParts[t]=null,this.bodyParts.splice(t,1)}},{key:"handleBodyParts",value:function(){for(var t=null,e=0;e<this.bodyParts.length;e++)(t=this.bodyParts[e]).ping(),this.bg.lineTo(t.lastX,t.lastY,t.x,t.y,1,16777215,.3),(0==Math.round(t.xVel)&&0==Math.round(t.yVel)||t.y>500)&&(t.deadCounter++,t.deadCounter>5&&this.destroy(e))}},{key:"init",value:function(t,e){this.level=t,this.bg=e}},{key:"ping",value:function(){this.handleBodyParts()}}]),i}(rt.flash.display.Sprite),pr=function(){function t(){R()(this,t)}return E()(t,[{key:"stopSound",value:function(){}}],[{key:"handleMute",value:function(){t.muted=!t.muted;var e=new rt.flash.media.SoundTransform;t.muted?e.volume=0:e.volume=1,rt.flash.media.SoundMixer.soundTransform=e}},{key:"killAll",value:function(){rt.flash.media.SoundMixer.stopAll()}},{key:"loopSound",value:function(t){(new(rt.flash.utils.getDefinitionByName(t))).play(0,999999)}},{key:"playSound",value:function(t){(new(rt.flash.utils.getDefinitionByName(t))).play(0,1)}},{key:"stopAllSounds",value:function(){rt.flash.media.SoundMixer.stopAll()}}]),t}();function yr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return vr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}T()(pr,"muted",!1);var mr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).burningFlow=!1,t.isMain=!0,t.placing=0,t.level=15,t.wins=295,t.gameName="01234567",t.kudos=10,t.playerXNormalMax=8,t.playerXBurningMax=50,t.playerYMax=15,t.flowPoints=0,t.matches=1254,t.gameMode=0,t.burningXAcc=3,t.rewinding=!1,t.handType=0,t.playerXMax=8,t.headType=0,t.time=0,t.teleporting=!1,t.fullFlow=!1,t.levelNum=0,t.normalXAcc=.8,t.kudosToGive=2,t.hitHalf=!1,t.xp=1500,t.completedLevel=!1,t.beltSpeed=2,t.colour=wn.randomColour(),t.colour2=wn.randomColour(),t.userName="Naruto"+wn.random(1e3),t}return E()(i,[{key:"checkPointInteraction",value:function(){for(var t=0;t<this.curLevel.checkPoints.length;t++)this.hitTestObject(this.curLevel.checkPoints[t])&&this.curLevel.startPoint!=this.curLevel.checkPoints[t]&&this.curLevel.checkPoints[t].isNew(this)&&(pr.playSound("CheckpointSound"),this.curLevel.startPoint=this.curLevel.checkPoints[t],this.curLevel.checkPoints[t].addFlag(this,this.colour,this.colour2))}},{key:"doTheJump",value:function(){this.jumpCounter++,this.holdUp=!0,0==this.yLove&&this.jumpLevel&&!this.hitHalf&&(pr.playSound("JumpSound"),this.playerJump=!0,this.jumpLevel=!1,this.yVel=this.hops,this.yLove=1,this.parent.playerObject.jumps++,this.parent.playerObject.jumps>=1e3&&this.dispatchEvent(new He(He.SEND,6)))}},{key:"handleFlow",value:function(){var t=tr().multiplayer.game.level.flags&an.FlowModeMask;t!==an.FlowDisabled&&(this.burningFlow?(t!==an.FlowAlways&&(this.flowPoints=this.flowPoints-5),rr.isDown(rt.flash.ui.Keyboard.SPACE)||rr.isDown(rt.flash.ui.Keyboard.SHIFT)?this.flowPoints<=0&&(this.flowPoints=0,this.burningFlow=!1,this.parent.stopBurningFlowMusic(),this.fullFlow&&this.dispatchEvent(new He(He.SEND,8))):(this.burningFlow=!1,this.parent.stopBurningFlowMusic())):(t===an.FlowAlways?(this.flowPoints=400,this.fullFlow=!0):(Math.abs(this.xVel)>2?this.flowPoints=this.flowPoints+2:this.flowPoints=this.flowPoints-20,this.flowPoints<0&&(this.flowPoints=0),this.flowPoints>400?(this.flowPoints=400,this.dispatchEvent(new He(He.SEND,7)),this.fullFlow=!0):this.fullFlow=!1),(rr.isDown(rt.flash.ui.Keyboard.SPACE)||rr.isDown(rt.flash.ui.Keyboard.SHIFT))&&this.flowPoints>=100&&(this.burningFlow=!0,this.parent.startBurningFlowMusic(),pr.playSound("Takeoff"))))}},{key:"handleHalfTiles",value:function(){var t=null;this.hitHalf=!1;for(var e=0;e<this.curLevel.halfTiles.length;e++)t=this.curLevel.halfTiles[e],this.hitTestObject(t)&&(this.hitHalf=!0,0==this.jumpLevel?this.xVel=0:this.holdDown||(this.xVel=.7*this.xVel))}},{key:"hitBlock",value:function(t){}},{key:"initPlayer",value:function(){this.xF=1,this.dXVel=5,this.xMax=20,this.playerXMax=8,this.playerYMax=20,this.xAcc=.8,this.normalXAcc=.8,this.burningXAcc=1.5,(tr().multiplayer.game.level.flags&an.FlowModeMask)===an.FlowAlways&&(this.flowPoints=400,this.fullFlow=!0)}},{key:"kill",value:function(){this.dispatchEvent(new ht(ht.SEND,"KILL"))}},{key:"levelInteraction",value:function(){var t=this.curLevel.maxHeight;(t<=550&&this.y>550||t>550&&this.y>t+50)&&this.kill(),this.hitTestObject(this.curLevel.endPoint)&&(this.completedLevel=!0,this.parent.finishLevel())}},{key:"movePlayer",value:function(){rr.isDown(rr.UP)?this.holdUp||(this.doTheJump(),this.holdUp=!0):(this.holdUp=!1,this.jumpCounter=0),rr.isDown(rr.DOWN)?(this.holdDown||(this.holdDownX=this.x),this.holdDown=!0,this.xF=.9,this.scaleY=.5):(this.holdDown&&Math.abs(this.holdDownX-this.x)>200&&this.dispatchEvent(new He(He.SEND,9)),this.holdDown=!1,this.xF=.7,this.scaleY=1),rr.isDown(rr.LEFT)?this.holdDown||this.xVel>0-this.playerXMax&&(this.xVel=this.xVel-this.xAcc):rr.isDown(rr.RIGHT)&&(this.holdDown||this.xVel<this.playerXMax&&(this.xVel=this.xVel+this.xAcc)),rr.isDown(rr.LEFT)||rr.isDown(rr.RIGHT)?(this.xF=1,this.holdDown&&!this.hitHalf&&(this.xVel=.95*this.xVel)):this.xF=.5,this.burningFlow?(this.playerXMax=this.playerXBurningMax,this.xAcc=this.burningXAcc):(this.xAcc=this.normalXAcc,this.playerXMax=nn.ease(this.playerXMax,this.playerXNormalMax,.3)),this.handleFlow()}},{key:"ping",value:function(){if(!this.completedLevel){this.playerSize=1,this.typeOf="deadaphant",this.thudTresh=10;var t=this.parent;t.isPaused||this.movePlayer(),(!t.isPaused||t.level.flags&an.PauseUnaffectPlayer)&&(this.handleHalfTiles(),this.updateTileInteraction()),this.spikeInteraction(),this.levelInteraction(),this.teleporterInteraction(),this.checkPointInteraction()}}},{key:"spikeInteraction",value:function(){for(var t=0;t<this.curLevel.spikes.length;t++)if(this.hitTestObject(this.curLevel.spikes[t].hitA))return void this.kill();for(t=0;t<this.curLevel.swingingAxes.length;t++)if(this.hitTestObject(this.curLevel.swingingAxes[t].axe)&&(this.hitTestObject(this.curLevel.swingingAxes[t].axe.side0)||this.hitTestObject(this.curLevel.swingingAxes[t].axe.side1)))return void this.kill();for(t=0;t<this.curLevel.popSpikes.length;t++)if(this.hitTestObject(this.curLevel.popSpikes[t].inside.spikes.hitA))return void this.kill();for(t=0;t<this.curLevel.grinders.length;t++)if(wn.dist(this.x,this.y,this.curLevel.grinders[t].x,this.curLevel.grinders[t].y)<this.curLevel.grinders[t].dist)return void this.kill();var e,n=yr(this.curLevel.bouncers);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.hitTestObject(r)&&1==r.currentFrame){var i=r.rotation*(Math.PI/180),s=0==i?0:Math.round(20*Math.sin(i)),o=Math.round(-20*Math.cos(i));return 0!=s&&(this.xVel=s),this.yVel=o,this.yLove=this.yVel>0?-1:1,r.bounces++,10==r.bounces&&this.dispatchEvent(new He(He.SEND,10)),this.playerJump=!0,this.jumpLevel=!1,r.gotoAndPlay(2),void pr.playSound("BouncerSound")}}}catch(t){n.e(t)}finally{n.f()}for(t=0;t<this.curLevel.plates.length;t++)this.hitTestObject(this.curLevel.plates[t])?(this.curLevel.plates[t].gotoAndStop(2),this.curLevel["lg"+this.curLevel.plates[t].name.substr(1,1)].gotoAndStop(2)):(this.curLevel.plates[t].gotoAndStop(1),this.curLevel["lg"+this.curLevel.plates[t].name.substr(1,1)].gotoAndStop(1));var a,l=yr(this.curLevel.fallingSpikes);try{for(l.s();!(a=l.n()).done;){var c=a.value,u=Math.round(c.rotation),h=void 0;switch(u){case 0:case 180:case-180:h=!0;break;case 90:case-90:h=!1;break;default:continue}if(0==c.smashState)(h?Math.abs(this.x-c.x)<10:Math.abs(this.y-c.y)<10)&&(c.smashState=1,pr.playSound("SpikeDrop"));else if(1==c.smashState){c.spikeIn.y-=20;var f,d=yr(this.curLevel.tiles);try{for(d.s();!(f=d.n()).done;)if(f.value.hitTestObject(c.spikeIn.hitA)){c.smashState=2,pr.playSound("Thud");break}}catch(t){d.e(t)}finally{d.f()}}else 2==c.smashState&&(c.spikeIn.y+=10,c.spikeIn.y>0&&(c.smashState=0,c.spikeIn.y=0));if(this.hitTestObject(c.spikeIn.hitA))return void this.kill()}}catch(t){l.e(t)}finally{l.f()}}},{key:"teleporterInteraction",value:function(){var t=0;if(this.teleporting){for(t=0;t<this.curLevel.teleporters.length;t++)if(this.hitTestObject(this.curLevel.teleporters[t]))return;this.teleporting=!1}else for(t=0;t<this.curLevel.teleporters.length;t++)if(this.hitTestObject(this.curLevel.teleporters[t]))return this.teleporting=!0,void(this.curLevel.teleporters[t].partner&&(this.x=this.curLevel.teleporters[t].partner.x,this.y=this.curLevel.teleporters[t].partner.y,this.parent.emitBeam(this.curLevel.teleporters[t].x-17,this.curLevel.teleporters[t].y,25),this.parent.emitBeam(this.x-17,this.y,25),pr.playSound("WhooshSound")))}},{key:"touchBlock",value:function(t){5==t.typeOf?this.xVel=this.xVel+(0-this.beltSpeed):6==t.typeOf?this.xVel=this.xVel+this.beltSpeed:this.xVel>this.playerXMax?this.xVel=this.playerXMax:this.xVel<0-this.playerXMax&&(this.xVel=0-this.playerXMax)}}]),i}(kn);var gr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}},{key:"ping",value:function(){this.parent.levelNum<100?this.x=0-this.parent.x/10:(this.x=0-this.parent.x,this.y=0-this.parent.y),3==this.currentFrame&&(this.cA.ping(),this.cB.ping())}}]),i}(rt.flash.display.MovieClip);var br=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip),_r=function(){function t(){R()(this,t),this.frameBased=!0,this.completeString="",this.timerCounter=0,this.timerInc=0}return E()(t,[{key:"getFrameTime",value:function(){return this.timerCounter}},{key:"getRealTime",value:function(e){return t.translateTime(e)}},{key:"getTimeAsSeconds",value:function(){return Math.floor(this.timerCounter/t.fr)%60}},{key:"getTimeAsString",value:function(){return this.completeString}},{key:"getTimeAsTotalSeconds",value:function(){return Math.floor(this.timerCounter/t.fr)}},{key:"handleCounter",value:function(){this.frameBased&&(this.timerCounter=this.timerCounter+1,this.completeString=t.translateTime(this.timerCounter))}},{key:"initTimer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.frameBased=!1,this.timer=new rt.flash.utils.Timer(t),this.timerInc=t,this.timer.addEventListener("timer",this.timerHandler),this.timer.start()}},{key:"killTimer",value:function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener("timer",this.timerHandler))}},{key:"ping",value:function(){this.handleCounter()}},{key:"resetTime",value:function(){this.timerCounter=0}},{key:"setTime",value:function(t){this.timerCounter=t}},{key:"setTimeAsTotalSeconds",value:function(e){this.timerCounter=e*t.fr}},{key:"timerHandler",value:function(e){this.timerCounter=this.timerCounter+Math.ceil(t.fr*this.timerInc/1e3)}}],[{key:"translateTime",value:function(e){var n,r,i=Math.round(e%t.fr/t.fr*100);n=i<10?"0"+i:String(i);var s=Math.floor(e/t.fr)%60;r=s<10?"0"+s:String(s);var o=Math.floor(e/(60*t.fr));return(o<10?"0"+o:String(o))+":"+r+"."+n}}]),t}();T()(_r,"fr",30);var wr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).flowCount=0,t.levelNum=0,t.flow.flowInside.flowBar.scaleX=0,t.flow.flowReady.visible=!1,t}return E()(i,[{key:"movePanel",value:function(){this.x=0-this.handyCam.camX,this.y=0-this.handyCam.camY}},{key:"movePlayer",value:function(){}},{key:"ping",value:function(t,e){this.handyCam=t,this.player=e,this.movePanel(),this.updateFlow()}},{key:"updateFlow",value:function(){var t,e,n=null===(t=tr().multiplayer)||void 0===t||null===(e=t.game)||void 0===e?void 0:e.level;if(n){var r=n.flags&an.FlowModeMask;switch(r){case an.FlowDisabled:return void(this.flow.visible=!1);case an.FlowNormal:this.flow.visible=!0,this.flow.flowInside.flowBar.scaleX=nn.ease(this.flow.flowInside.flowBar.scaleX,this.player.flowPoints/400,.9);break;case an.FlowAlways:this.flow.visible=!0,this.flow.flowInside.flowBar.scaleX=1}this.player.burningFlow?(this.flowCount++,1==this.flowCount&&this.flow.flowReady.gotoAndPlay(31),this.flow.flowInside.filters=new Array(new rt.flash.filters.GlowFilter(39423,1,15,15,1.5))):(this.flowCount=this.flowCount-3,this.bordering.filters=new Array,this.flow.flowInside.filters=new Array,this.player.flowPoints>=100?(nn.colourMe(this.flow.flowInside,16777215),0==this.flow.flowReady.visible&&r!==an.FlowAlways&&(this.flow.flowReady.visible=!0,this.flow.flowReady.gotoAndPlay(2),pr.playSound("FlowReady"))):(this.flow.flowReady.visible=!1,nn.colourMe(this.flow.flowInside,11184810))),this.flowCount=Math.min(this.flowCount,100),this.flowCount<=0?(this.flowCount=0,this.bordering.filters=new Array):this.bordering.filters=new Array(new rt.flash.filters.GlowFilter(39423,Math.min(this.flowCount/10,1),0,Math.min(15,this.flowCount),Math.min(10,this.flowCount/10)))}}}]),i}(rt.flash.display.MovieClip);var kr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var xr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Rr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Sr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Er=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).timeTotal=0,t}return i}(rt.flash.display.MovieClip);var Cr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Tr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t,e){var n;return R()(this,i),(n=r.call(this)).skin=t,n.playerData=e,n.nameOf.text=n.playerData.userName,nn.colourMe(n.lilArrow,n.playerData.colour),n}return i}(rt.flash.display.MovieClip);var Lr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Mr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Pr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Ar=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Dr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Or=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Nr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Fr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Br=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Ir=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"isPressingKill",!1),t.xCamX=375,t.yCamY=375,t.updateMethod=0,t.cLeft=!1,t.fastSound=!1,t.tCounter=0,t.levelFinished=!1,t.firstSoundPlay=!0,t.cUp=!1,t.updateRate=7,t.mode="PRACTICE",t.songPlaying="none",t.levelNum=0,t.tryFrame=0,t.deathScreens=0,t.cRight=!1,t.level30Okay=!1,t.timeCounter=0,t.mpLevel=100,t.cDown=!1,t.goAhead=!1,t.rewindCounter=0,t.spaceDown=!1,t.buildStr="0.2.3",t.cheerCounter=0,t.isPaused=!1,t.tConnected=!1,t.camera=new er,t.logger=new fr,t.ghosting=new cr,t.placingBonuses=new Array(250,150,100,50),t.bg=new tn,t.skinLayer=new rt.flash.display.MovieClip,t.morgue=new dr,t.uiPanel=new wr,t.timer=new _r,t.emit=new nr,t.robots=new Array,t.tempShape=new rt.flash.display.Shape,t.playerBars=new Array,t.checkPoints=new Array,t.youArrows=new Array,t.skyLine=new gr,t.sForward=new kr,t.sBackward=new xr,t.sFast=new Rr,t.players=new Array,t.tCounterGoal=t.updateRate,t.keysPressed=new Array(!1,!1,!1,!1),t.updaters=new Array(0,0,0,0,0,0,0,0),t.finalPlacingArray=new Array,t.playerSkins=new Array,t}return E()(i,[{key:"added",value:function(t){this.stage.focus=this.stage}},{key:"addSkin",value:function(){this.skin&&this.removeChild(this.skin),this.skin=new lr,this.addChild(this.skin),this.skin.init(this.player,this.level.checkPoints),this.skin.headType=this.player.headType,this.skin.handType=this.player.handType}},{key:"checkPoint",value:function(){this.tConnected&&this.tubes.onCheckpoint(this.curLevel.startPoint.id)}},{key:"chooseMultiplayerSong",value:function(){this.startFinal()}},{key:"chooseSong",value:function(){this.levelNum<=2?this.startInside():this.levelNum<=9?this.startStadium():this.levelNum<=10?this.startInside():this.levelNum<=14?this.startLab():this.levelNum<=15?this.startInside():this.levelNum<=16?(this.startLab(),pr.stopAllSounds(),this.songPlaying="none"):this.levelNum<=19?this.startLab():this.levelNum<=24?this.startSkyline():this.levelNum<=29?this.startFinal():this.levelNum}},{key:"collectSign",value:function(){this.playerObject.signs[this.levelNum]=!0;for(var t=0,e=0;e<this.playerObject.signs.length;e++)1==this.playerObject.signs[e]&&t++;t>=1&&this.dispatchEvent(new He(He.SEND,15)),t>=8&&this.dispatchEvent(new He(He.SEND,16)),t>=15&&this.dispatchEvent(new He(He.SEND,17)),t>=24&&this.dispatchEvent(new He(He.SEND,18)),t>=30&&this.dispatchEvent(new He(He.SEND,19)),this.updateUISign(),this.uiPanel.caution.gotoAndPlay(2)}},{key:"countDownFinish",value:function(){this.goAhead=!0}},{key:"countdownStart",value:function(){this.levelStart=new hr,this.levelStart.gotoAndPlay(1),this.addChild(this.levelStart),this.uiPanel&&this.contains(this.uiPanel)&&(this.levelStart.startBox.levelName.nameOf.text=this.uiPanel.levName.text)}},{key:"createNewLevel",value:function(){this.levelFinished=!1,this.tryFrame=0,this.checkPoints.splice(0,this.checkPoints.length),this.level.kill(),this.removeChild(this.level),this.level=null,this.curLevel=null,this.setLevel(),this.player.init(this.level),this.player.initPlayer(),this.player.visible=!1,this.camera.camX=0,this.camera.camY=0,this.x=0,this.y=0,"SP"===this.mode?this.uiPanel.placing.visible=!1:this.uiPanel.placing.visible=!0,this.finalPlacingArray.splice(0,this.finalPlacingArray.length);for(var t=0;t<this.playerBars.length;t++)this.uiPanel.removeChild(this.playerBars[t]),this.playerBars[t]=null;this.playerBars.splice(0,this.playerBars.length),this.startLevel()}},{key:"emitBeam",value:function(t,e,n){var r=new Sr;this.addChild(r),r.x=t,r.y=e,r.width=n,nn.colourMe(r,this.player.colour),this.emit.manage(r)}},{key:"endMPGame",value:function(){var t=null,e=NaN,n=null;this.player.rewinding&&this.stopRewinding(),this.removeChild(this.endCountdown),this.endCountdown=null,this.levelEnd=new ur,this.addChild(this.levelEnd),this.levelEnd.x=0-this.x,this.levelEnd.y=0-this.y,this.goAhead=!1;for(var r=new Array,i=0;i<this.players.length;i++)0==this.players[i].completedLevel&&r.push(this.players[i]);for(;r.length>0;){for(t=r[0],e=0,i=0;i<r.length;i++)t.x>r[i].x&&(t=r[i],e=Number(i));n=new Er,this.uiPanel.addChild(n),n.x=800,n.y=180+30*this.playerBars.length,n.timeTotal=0,n.nameOf.text=t.userName,n.player=t,this.playerBars.push(n),this.finalPlacingArray.push(n),r.splice(e,1)}}},{key:"endEnding",value:function(){this.level30Okay=!0}},{key:"endFadeOut",value:function(){this.fadeOut&&(this.fadeOut.stop(),this.removeChild(this.fadeOut),this.fadeOut=null)}},{key:"endSoundBackward",value:function(t){this.soundBackward.stop(),this.soundBackward=this.sBackward.play(0,99999)}},{key:"endSoundFast",value:function(t){this.soundFast.stop(),this.soundFast=this.sFast.play(0,99999)}},{key:"endSoundForward",value:function(t){this.soundForward.stop(),this.soundForward=this.sForward.play(0,99999)}},{key:"exitOut",value:function(){pr.stopAllSounds(),"SP"===this.mode?(this.playerObject.gameLevel=this.levelNum,0!=this.levelNum&&(this.playerObject.gameTime=this.timer.getTimeAsTotalSeconds()),this.dispatchEvent(new ht(ht.GOTO,"Game","SinglePlayerMenu"))):"PRACTICE"===this.mode?this.dispatchEvent(new ht(ht.GOTO,"Game","EndPractice")):"MP"===this.mode&&this.dispatchEvent(new ht(ht.GOTO,"Game","QuitMP"))}},{key:"finishLevel",value:function(){var t=NaN;if("SP"===this.mode||"PRACTICE"===this.mode)this.levelFinished=!0,this.fadeOut=new qn,this.fadeOut.gotoAndPlay(2),this.player.burningFlow&&(this.player.burningFlow=!1,this.stopBurningFlowMusic()),this.organizeDepth(),this.addChild(this.fadeOut),this.fadeOut.x=0-this.x,this.fadeOut.y=0-this.y;else if("MP"===this.mode)for(this.uiPanel.arrowKeysToPan.gotoAndStop(2),this.xCamX=this.player.x,this.yCamY=this.player.y,this.levelFinished=!0,t=0;t<this.players.length;t++)this.players[t].isPlayer&&(this.players[t].time=this.timer.getFrameTime(),this.iAmDone(this.players[t]))}},{key:"handleCamera",value:function(){if("SP"!==this.mode){var t=this.level.maxWidth,e=Math.max(this.level.maxHeight,225);"MP"===this.mode&&this.player.completedLevel?(rr.isDown(rr.LEFT)&&(this.xCamX-=20),rr.isDown(rr.RIGHT)&&(this.xCamX+=20),rr.isDown(rr.UP)&&(this.yCamY-=20),rr.isDown(rr.DOWN)&&(this.yCamY+=20),this.xCamX=Math.min(Math.max(this.xCamX,400),t-400),this.yCamY=Math.min(Math.max(this.yCamY,250),e-225),this.camera.limits=new Array(400,t-400,250,e-225),this.camera.ping(this.xCamX,this.yCamY)):this.levelFinished||(this.camera.limits=new Array(400,t-400,250,e-225),this.camera.ping(this.player.x,this.player.y))}else if(this.camera.limits=new Array(400,this.level.maxWidth-400,0,0),this.player.burningFlow){var n=new rt.flash.geom.ColorTransform;n.color=16777215,this.camera.ping(this.player.x+200,this.player.y),this.skin.filters=new Array(new rt.flash.filters.GlowFilter(39423,1,15,15,1.5,1,!1,!0)),this.bg.drawMovieClip(this.skin,1,2,3,n)}else this.camera.ping(this.player.x,this.player.y),this.skin.filters=new Array}},{key:"handleCheering",value:function(){}},{key:"handleLaserCannons",value:function(){for(var t=null,e=NaN,n=NaN,r=NaN,i=NaN,s=NaN,o=!1,a=NaN,l=NaN,c=NaN,u=NaN,h=NaN,f=NaN,d=NaN,p=null,y=this.level.laserCannons,v=0;v<y.length;v++){for((t=y[v]).setAngle=wn.rotateTo(this.player.x,this.player.y,t.x,t.y),e=.1,e=t.timeOut>=25?.5:.1,t.rotation=nn.ease(t.rotation,t.rotation+wn.getRotationDifference(t.rotation,t.fakeAngle),e),r=(n=10)*Math.sin(Math.PI/180*t.setAngle),i=0-n*Math.cos(Math.PI/180*t.setAngle),s=50,o=!1,a=3;a<s;a++)if(l=r*a+t.x,c=i*a+t.y,this.level.canvas.getAlpha(l,c)>0){this.tempShape.graphics.clear(),this.tempShape.graphics.lineStyle(1,16777215,1),this.tempShape.graphics.moveTo(t.x,t.y),this.tempShape.graphics.lineTo(l,c),this.addChild(this.tempShape),this.player.hitTestObject(this.tempShape)&&(o=!0,t.fakeAngle=t.setAngle),this.tempShape.graphics.clear();break}if(o&&(t.timeOut=0,0==t.beam.visible&&pr.playSound("Zap"),t.beam.visible=!0),t.timeOut++,t.timeOut>=25)t.fakeAngle=t.defaultAngle,t.beam.visible=!1;else for(u=n*Math.sin(Math.PI/180*t.rotation),h=0-n*Math.cos(Math.PI/180*t.rotation),a=3;a<s;){if(l=u*a+t.x,c=h*a+t.y,wn.dist(l,c,this.player.x,this.player.y)<10&&!this.player.rewinding)return void this.kill();if(this.level.canvas.getAlpha(l,c)>0){for(f=wn.dist(t.x,t.y,l,c)-30,t.beam.height=f,d=0;d<5;d++)(p=new Cr).x=l+wn.range(5),p.y=c+wn.range(2),p.scaleX=.5*Math.random()+.5,p.scaleY=.5*Math.random()+.5,this.addChild(p),this.emit.manage(p);break}a++}}}},{key:"handleYouArrows",value:function(){for(var t=0;t<this.youArrows.length;t++)this.youArrows[t].x=nn.ease(this.youArrows[t].x,this.youArrows[t].skin.x,.8),this.youArrows[t].y=nn.ease(this.youArrows[t].y,this.youArrows[t].skin.y-30,.8)}},{key:"hotKeys",value:function(){rr.isDown(rt.flash.ui.Keyboard.SPACE)?this.spaceDown||(this.spaceDown=!0):this.spaceDown=!1}},{key:"hub",value:function(t){switch(t.sender){case"KILL":this.kill();break;case"CHECK":this.checkPoint()}}},{key:"iAmDone",value:function(t){if(!t.completedLevel){t.completedLevel=!0;var e=new Er;this.uiPanel.addChild(e),e.x=800,e.y=180+30*this.playerBars.length,e.timeTotal=t.time,e.nameOf.text=t.userName,e.player=t,this.playerBars.push(e),this.tSortTimes()}}},{key:"init",value:function(t,e,n){var r;this.addChild(this.skyLine),this.playerObject=e,"SP"===this.mode?(0==this.playerObject.gameLevel?this.timer.setTimeAsTotalSeconds(0):this.timer.setTimeAsTotalSeconds(this.playerObject.gameTime),this.levelNum=n):"MP"===this.mode?(this.tubes=t,this.updateMethod=0,this.levelNum=n):"PRACTICE"===this.mode&&(this.timer.setTimeAsTotalSeconds(0),this.levelNum=n),this.setLevel(),this.player=new mr,this.player.x=-200,this.player.y=-200,this.player.userName=this.playerObject.userName,this.player.xp=this.playerObject.xp,this.player.kudos=this.playerObject.kudos,this.player.wins=this.playerObject.wins,this.player.matches=this.playerObject.matches,this.player.headType=this.playerObject.headType,this.player.handType=this.playerObject.handType,this.player.colour=this.playerObject.colour,this.player.colour2=this.playerObject.colour2,this.player.init(this.level),this.player.initPlayer(),this.player.visible=!1,"MP"!==this.mode?this.uiPanel.placing.visible=!1:this.uiPanel.placing.visible=!!(null===(r=this.tubes)||void 0===r?void 0:r.player),this.bg.init(2e3,800),this.addChild(this.bg),this.addSkin(),this.ghosting.init(this.logger.logs),this.addChild(this.ghosting),this.addChild(this.player),this.addChild(this.morgue),this.morgue.init(this.level,this.bg),this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping,!1,0,!0),this.addEventListener(ht.SEND,this.hub,!1,0,!0),this.addEventListener(rt.flash.events.Event.ADDED_TO_STAGE,this.added,!1,0,!0),this.uiPanel.exitButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.exitOut,!1,0,!0),this.uiPanel.muteButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.muteOut,!1,0,!0),this.uiPanel.pauseButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.pauseOut,!1,0,!0),this.uiPanel.qualityButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.qualityOut,!1,0,!0),this.camera.init(this),this.camera.lockX=this.level.lockCamX,this.camera.lockY=this.level.lockCamY,this.addChild(this.uiPanel),this.addChild(this.emit),this.level.createArray(),this.startLevel(),this.updatePing(0);var i=new Tr(this.skin,this.player);this.addChild(i),this.youArrows.push(i),this.initSounds(),this.organizeDepth(),"SP"===this.mode?this.chooseSong():(this.chooseMultiplayerSong(),this.stage.focus=this.stage)}},{key:"initMP",value:function(){var t=null,e=null;this.players=this.tubes.players,this.player.x=this.level.startPoint.x+17.5,this.player.y=this.level.startPoint.y;for(var n=0;n<this.players.length;n++)this.players[n].completedLevel=!1,this.players[n].isPlayer?(this.players[n].time=0,this.playerSkins.push(null),this.skin.x=this.player.x,this.skin.y=this.player.y):((t=new lr).x=this.players[n].xPos,t.y=this.players[n].yPos,t.setChecks(this.level.checkPoints),t.isMain=!1,this.skinLayer.addChild(t),this.playerSkins.push(t),e=new Tr(t,this.players[n]),this.youArrows.push(e),t.youArrow=e,this.addChild(e));this.bg.ping(),this.skyLine.ping(),this.uiPanel.ping(this.camera,this.player),this.level.setPlayer(this.player),this.levelStart.x=-this.camera.camX,this.levelStart.y=-this.camera.camY,this.tubes.player||(this.player.completedLevel=!0,this.skin.visible=!1,this.finishLevel())}},{key:"initPractice",value:function(){this.bg.ping(),this.skyLine.ping(),this.uiPanel.ping(this.camera,this.player),this.level.setPlayer(this.player),this.goAhead=!0}},{key:"initSounds",value:function(){this.soundRatio=this.sForward.length/this.sBackward.length,this.firstSoundPlay=!0}},{key:"kill",value:function(){this.player.rewinding||("SP"===this.mode&&16==this.levelNum&&0==this.playerObject.gameDeaths&&this.dispatchEvent(new He(He.SEND,14)),this.deathScreens=0,this.morgue.addDeadBody(this.player,this.player.colour),this.player.flowPoints=0,this.player.burningFlow=!1,this.skin.filters=new Array,this.uiPanel.ping(this.camera,this.player),"SP"===this.mode?(this.playerObject.gameDeaths++,this.startRewinding()):"MP"!==this.mode&&"PRACTICE"!==this.mode||(this.logger.newLog(),this.skin.visible=!0,this.player.xVel=0,this.player.yVel=0,this.player.x=this.level.startPoint.x+12.5,this.player.y=this.level.startPoint.y))}},{key:"killS",value:function(){var t,e,n,r;this.player.rewinding&&this.stopRewinding(),this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping),this.removeEventListener(ht.SEND,this.hub),this.removeEventListener(rt.flash.events.Event.ADDED_TO_STAGE,this.added),this.uiPanel.exitButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.exitOut),this.uiPanel.muteButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.muteOut),this.uiPanel.pauseButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.pauseOut),this.uiPanel.qualityButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.qualityOut),this.bg.kill(),null===(t=this.level)||void 0===t||t.kill(),null===(e=this.soundBackward)||void 0===e||e.stop(),null===(n=this.soundFast)||void 0===n||n.stop(),null===(r=this.soundForward)||void 0===r||r.stop()}},{key:"loadNextSinglePlayerLevel",value:function(){if("PRACTICE"!==this.mode){if(this.levelNum++,this.chooseSong(),this.playerObject.gameLevel=this.levelNum,0!=this.levelNum&&(this.playerObject.gameTime=this.timer.getTimeAsTotalSeconds()),3==this.levelNum&&(this.dispatchEvent(new He(He.SEND,0)),pr.playSound("Cheer")),this.levelNum>=4&&this.levelNum<=9&&(1==wn.random(10)?pr.playSound("Cheer"):pr.playSound("Cheer2")),10==this.levelNum&&(this.dispatchEvent(new He(He.SEND,1)),0==this.playerObject.gameDeaths&&this.dispatchEvent(new He(He.SEND,13))),15==this.levelNum&&this.dispatchEvent(new He(He.SEND,2)),20==this.levelNum&&this.dispatchEvent(new He(He.SEND,3)),25==this.levelNum&&this.dispatchEvent(new He(He.SEND,4)),30==this.levelNum&&this.dispatchEvent(new He(He.SEND,5)),this.deathScreens++,10==this.deathScreens&&this.dispatchEvent(new He(He.SEND,11)),31==this.levelNum)return this.playerObject.gameLevel=0,void this.dispatchEvent(new ht(ht.GOTO,"Game","End"));this.uiPanel.levelNum=this.levelNum,this.player.levelNum=this.levelNum,this.createNewLevel(),this.organizeDepth(),this.addChild(this.fadeOut),this.fadeOut.x=0-this.x,this.fadeOut.y=0-this.y,this.skyLine.x=0,this.skyLine.y=0,this.dispatchEvent(new ht(ht.GOTO,"SaveGame"))}else this.dispatchEvent(new ht(ht.GOTO,"Game","EndPractice"))}},{key:"muteOut",value:function(){pr.handleMute()}},{key:"organizeDepth",value:function(){this.addChild(this.skyLine),this.levelNum<=2?this.skyLine.gotoAndStop(2):this.levelNum<=9?this.skyLine.gotoAndStop(3):10==this.levelNum?this.skyLine.gotoAndStop(2):this.levelNum<=14?this.skyLine.gotoAndStop(4):this.levelNum<=16?this.skyLine.gotoAndStop(2):this.levelNum<=19?this.skyLine.gotoAndStop(5):this.levelNum<=24?this.skyLine.gotoAndStop(6):this.levelNum<=30?this.skyLine.gotoAndStop(1):this.skyLine.gotoAndStop(7),this.addChild(this.level),this.addChild(this.bg),30==this.levelNum&&(this.bg.visible=!1),this.addChild(this.player),this.addChild(this.skin),this.addChild(this.skinLayer),this.addChild(this.morgue),this.addChild(this.uiPanel),this.addChild(this.emit)}},{key:"pauseOut",value:function(){this.isPaused=!this.isPaused}},{key:"ping",value:function(){var t;if(!this.isPaused||"SP"!==this.mode){if(this.tryFrame++,"MP"===this.mode&&this.tUpdateFriendsENT(),null===(t=this.endCountdown)||void 0===t||t.ping(-this.x,-this.y),!this.goAhead)return this.skin.x=this.player.x,this.skin.y=this.player.y,this.gotoAndStop(1),void this.skin.fuel();if(30==this.levelNum&&!this.level30Okay)return this.skin.gotoAndStop(2),this.uiPanel.exitButton.visible=!1,this.uiPanel.muteButton.visible=!1,this.uiPanel.qualityButton.visible=!1,void(this.uiPanel.pauseButton.visible=!1);var e=rr.isDown(rt.flash.ui.Keyboard.K);e&&!this.isPressingKill&&this.level.flags&an.AllowSuicide&&this.player.kill(),this.isPressingKill=e,this.player.rewinding?this.rewind():(this.player.ping(),this.skin.ping(),this.logger.ping(this.skin)),this.handleCamera(),this.handleLaserCannons(),this.uiPanel.ping(this.camera,this.player),this.emit.ping(),this.ghosting.ping(this.tryFrame),this.hotKeys(),this.bg.ping(),this.morgue.ping(),this.levelFinished||30!=this.levelNum&&this.timer.ping(),30!=this.levelNum?this.uiPanel.timeDisp.text=this.timer.getTimeAsString():this.uiPanel.timeDisp.text=" ",this.level.timeString=this.timer.getTimeAsString(),30==this.levelNum&&this.setRank(),this.level.setPlayer(this.player),this.level.uniqueLevelPing(),this.skyLine.ping(),this.handleCheering(),this.static&&(this.static.x=0-this.x,this.static.y=0-this.y),"SP"===this.mode&&this.levelNum<30&&this.player.hitTestObject(this.level.cautionSign)&&this.level.cautionSign.visible&&(this.level.cautionSign.visible=!1,pr.playSound("Scratcher"),this.collectSign()),rr.isDown(rt.flash.ui.Keyboard.P)&&"SP"!==this.mode&&(this.isPaused=!this.isPaused)}}},{key:"qualityOut",value:function(){"LOW"!=this.stage.quality?"HIGH"!=this.stage.quality||(this.stage.quality="LOW"):this.stage.quality="HIGH"}},{key:"reset",value:function(){for(var t=0;t<this.level.popSpikes.length;t++)this.level.popSpikes[t].inside.gotoAndPlay(this.level.popSpikes[t].name.substr(1,2));for(t=0;t<this.level.swingingAxes.length;t++)this.level.swingingAxes[t].axe.gotoAndPlay(this.level.swingingAxes[t].name.substr(1,2))}},{key:"rewind",value:function(){var t=null;this.skin.visible=!1;var e=!1,n=15;this.rewindCounter++,this.logger.playHead-n<0&&(n=Number(this.logger.playHead),e=!0);for(var r=0;r<n;r++)this.logger.playHead--,this.logger.setFromLog(this.skin),this.player.x=this.skin.x,this.player.y=this.skin.y,this.skin.ping(),!e&&this.skin.hitTestObject(this.level.startPoint)&&(e=!0),(t=new rt.flash.geom.ColorTransform).alphaMultiplier=.2,this.bg.drawMovieClip(this.skin,1,2,3,t,"normal");e&&this.stopRewinding()}},{key:"runTest",value:function(){for(var t=NaN,e=0,n=0,r=0;r<10;r++){for(t=rt.flash.utils.getTimer(),e=0;e<500;e++)this.ping();n=Number(n+(rt.flash.utils.getTimer()-t))}}},{key:"setLevel",value:function(){this.level=tr().createLevel(this.levelNum),this.level.init(),this.addChild(this.level),this.curLevel=this.level,this.morgue.init(this.level,this.bg),0==this.levelNum&&(this.playerObject.gameDeaths=0)}},{key:"setPlayerName",value:function(t){this.playerObject.gameName=t,this.player.gameName=t}},{key:"setRank",value:function(){this.timer.getTimeAsTotalSeconds()>1200?this.level.timeRank="TAKING MY TIME   ":this.timer.getTimeAsTotalSeconds()>1e3?this.level.timeRank="PRETTY FAIR JOB  ":this.timer.getTimeAsTotalSeconds()>900?this.level.timeRank="PACING OKAY      ":this.timer.getTimeAsTotalSeconds()>720?(this.dispatchEvent(new He(He.SEND,20)),this.level.timeRank="MAYBE A JOG      "):this.timer.getTimeAsTotalSeconds()>540?(this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.level.timeRank="POWERWALKER      "):this.timer.getTimeAsTotalSeconds()>510?(this.level.timeRank="FAIR PERFORMANCE ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22))):this.timer.getTimeAsTotalSeconds()>480?(this.level.timeRank="MODERATE PACE    ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22))):this.timer.getTimeAsTotalSeconds()>450?(this.level.timeRank="IMPRESSIVE TIME  ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22))):this.timer.getTimeAsTotalSeconds()>420?(this.level.timeRank="FAIRLY QUICK     ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22))):this.timer.getTimeAsTotalSeconds()>390?(this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22)),this.dispatchEvent(new He(He.SEND,23)),this.level.timeRank="ZIPPING AROUND   "):this.timer.getTimeAsTotalSeconds()>360?(this.level.timeRank="ZOOM ZOOM ZOOMER ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22)),this.dispatchEvent(new He(He.SEND,23))):this.timer.getTimeAsTotalSeconds()>330?(this.level.timeRank="WICKED FAST PACE ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22)),this.dispatchEvent(new He(He.SEND,23))):(this.level.timeRank="TOP RANKING RUN  ",this.dispatchEvent(new He(He.SEND,20)),this.dispatchEvent(new He(He.SEND,21)),this.dispatchEvent(new He(He.SEND,22)),this.dispatchEvent(new He(He.SEND,23)))}},{key:"startBurningFlowMusic",value:function(){this.soundFast=this.sFast.play(this.soundForward.position,1),this.soundFast.addEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundFast),this.soundForward.removeEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundForward),this.soundForward.stop(),this.fastSound=!0}},{key:"startFinal",value:function(){"final"!=this.songPlaying&&(pr.stopAllSounds(),this.songPlaying="final",this.sForward=new Wn,this.sBackward=new Yn,this.sFast=new Xn,this.initSounds(),this.startForwardMusic())}},{key:"startForwardMusic",value:function(){var t=0;this.fastSound=!1,this.firstSoundPlay?(this.firstSoundPlay=!1,this.soundForward=this.sForward.play(0,1),this.soundForward.addEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundForward)):(t=rt.__internal.avm2.Runtime.int((this.sBackward.length-this.soundBackward.position)*this.soundRatio),pr.stopAllSounds(),t<this.sForward.length&&t>0?this.soundForward=this.sForward.play(t,1):this.soundForward=this.sForward.play(0,1),this.soundForward.addEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundForward),this.soundBackward.removeEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundBackward),this.soundBackward.stop())}},{key:"startInside",value:function(){"inside"!=this.songPlaying&&(pr.stopAllSounds(),this.songPlaying="inside",this.sForward=new kr,this.sBackward=new xr,this.sFast=new Rr,this.initSounds(),this.startForwardMusic())}},{key:"startLab",value:function(){"lab"!=this.songPlaying&&(pr.stopAllSounds(),this.songPlaying="lab",this.sForward=new Lr,this.sBackward=new Mr,this.sFast=new Pr,this.initSounds(),this.startForwardMusic())}},{key:"startLevel",value:function(){this.level.generateLevel(),this.logger.newLog(),this.ghosting.reset(),this.startPlayer(this.player),this.player.xVel=0,this.player.yVel=0,this.tryFrame=0,this.player.completedLevel=!1,this.uiPanel.levelNum=this.levelNum,this.player.levelNum=this.levelNum,30!=this.levelNum?this.uiPanel.levDisplay.text="Stage "+(this.levelNum+1):this.uiPanel.levDisplay.text="Ending",this.levelNum<=2?this.uiPanel.levName.text="Getting Out":this.levelNum<=9?this.uiPanel.levName.text="The Stadium":this.levelNum<=10?this.uiPanel.levName.text="The Audit":this.levelNum<=14?this.uiPanel.levName.text="Lab Testing":this.levelNum<=16?this.uiPanel.levName.text="The Path to Freedom":this.levelNum<=19?this.uiPanel.levName.text="Backrooms":this.levelNum<=24?this.uiPanel.levName.text="Outside":this.levelNum<=32?this.uiPanel.levName.text="Skyline City Limits":this.levelNum<=100?this.uiPanel.levName.text="Marathon":this.levelNum<=101?this.uiPanel.levName.text="Front Door":this.levelNum<=102?this.uiPanel.levName.text="Crossroads":this.levelNum<=103?this.uiPanel.levName.text="Tubes":this.levelNum<=104?this.uiPanel.levName.text="Death Wall":this.levelNum<=105?this.uiPanel.levName.text="The Maze":this.levelNum<=106?this.uiPanel.levName.text="Lunge":this.levelNum<=107?this.uiPanel.levName.text="Unfriendly Teleporters":this.levelNum<=108?this.uiPanel.levName.text="Funk":this.levelNum<=109?this.uiPanel.levName.text="Cubicles":this.levelNum<=110?this.uiPanel.levName.text="Over and Under":this.levelNum<=111?this.uiPanel.levName.text="Zipper":this.levelNum<=112?this.uiPanel.levName.text="Jumper":this.levelNum<=113?this.uiPanel.levName.text="Slip and Slide":this.levelNum<=114?this.uiPanel.levName.text="Wombat":this.levelNum<=115?this.uiPanel.levName.text="Fuzz Balls":this.levelNum<=116?this.uiPanel.levName.text="Secret Staircase":this.levelNum<=117?this.uiPanel.levName.text="Cubey":this.levelNum<=118?this.uiPanel.levName.text="Descending":this.levelNum<=119?this.uiPanel.levName.text="Treadmillvania":this.uiPanel.levName.text=this.level.name,this.updateUISign(),this.reset(),"MP"===this.mode&&(this.tConnected=!0),this.organizeDepth(),this.camera.limits=[400,this.level.maxWidth-375,250,this.level.maxHeight<225?225:this.level.maxHeight-225],this.camera.move(this.player.x,this.player.y,!1)}},{key:"startPlayer",value:function(t){this.player,t.x=this.level.startPoint.x+12.5,t.y=this.level.startPoint.y;var e=new Sr;this.addChild(e),e.x=this.level.startPoint.x,e.y=this.level.startPoint.y,this.emit.manage(e)}},{key:"startReverseMusic",value:function(){this.fastSound?(this.soundBackward=this.sBackward.play((this.sForward.length-this.soundFast.position)/this.soundRatio,1),this.soundBackward.addEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundBackward),this.soundFast.removeEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundFast),this.soundFast.stop(),this.fastSound=!1):(this.soundBackward=this.sBackward.play((this.sForward.length-this.soundForward.position)/this.soundRatio,1),this.soundBackward.addEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundBackward),this.soundForward.removeEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundForward),this.soundForward.stop())}},{key:"startRewinding",value:function(){this.player.rewinding=!0,this.startReverseMusic(),this.dispatchEvent(new ht(ht.SEND,"StartJitter","StartJitter")),this.static=new br,this.addChild(this.static)}},{key:"startSinglePlayer",value:function(){this.goAhead=!0}},{key:"startSkyline",value:function(){"skyline"!=this.songPlaying&&(pr.stopAllSounds(),this.songPlaying="skyline",this.sForward=new Ar,this.sBackward=new Dr,this.sFast=new Or,this.initSounds(),this.startForwardMusic())}},{key:"startStadium",value:function(){"stadium"!=this.songPlaying&&(pr.stopAllSounds(),this.songPlaying="stadium",this.sForward=new Nr,this.sBackward=new Fr,this.sFast=new Br,this.initSounds(),this.startForwardMusic())}},{key:"stopBurningFlowMusic",value:function(){this.soundForward=this.sForward.play(this.soundFast.position,1),this.soundForward.addEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundForward),this.soundFast.removeEventListener(rt.flash.events.Event.SOUND_COMPLETE,this.endSoundFast),this.soundFast.stop(),this.fastSound=!1}},{key:"stopRewinding",value:function(){this.player.rewinding=!1,this.logger.newLog(),this.skin.visible=!0,this.player.xVel=0,this.player.yVel=0,this.player.x=this.level.startPoint.x+12.5,this.player.y=this.level.startPoint.y,this.dispatchEvent(new ht(ht.SEND,"EndJitter","EndJitter")),this.removeChild(this.static),this.static=null,this.rewindCounter>150&&this.dispatchEvent(new He(He.SEND,12)),this.startForwardMusic()}},{key:"tCheck",value:function(t,e){for(var n=0;n<this.players.length;n++)if(this.players[n].id===t)return void this.playerSkins[n].addCheckPoint(e)}},{key:"tMarkTime",value:function(t,e){t.completedLevel=!0,t.time=Number(e)}},{key:"tRemovePlayer",value:function(t){for(var e=void 0,n=0;n<this.players.length;n++)if(this.players[n].id==t){for(e=0;e<this.youArrows.length;e++)this.youArrows[e].skin==this.playerSkins[n]&&(this.removeChild(this.youArrows[e]),this.youArrows[e]=null,this.youArrows.splice(e,1));return this.skinLayer.removeChild(this.playerSkins[n]),this.playerSkins[n]=null,void this.playerSkins.splice(n,1)}}},{key:"tSortTimes",value:function(){var t=null,e=NaN,n=new Array;this.finalPlacingArray.splice(0,this.finalPlacingArray.length);for(var r=0;r<this.playerBars.length;r++)n.push(this.playerBars[r]);for(;n.length>0;){for(t=n[0],e=0,r=0;r<n.length;r++)t.timeTotal>n[r].timeTotal&&(t=n[r],e=Number(r));this.finalPlacingArray.push(t),n.splice(e,1)}for(r=0;r<this.finalPlacingArray.length;r++)this.finalPlacingArray[r].y=180+36*r,this.finalPlacingArray[r].timeOf.text=this.timer.getRealTime(this.finalPlacingArray[r].timeTotal),this.finalPlacingArray[r].posOf.text=String(r+1);this.endCountdown||(this.endCountdown=new Kn(this.playerBars[0].player.userName),this.addChild(this.endCountdown)),this.finalPlacingArray.length==this.players.length&&(this.endCountdown||(this.endCountdown=new Kn(this.playerBars[0].player.userName),this.addChild(this.endCountdown)))}},{key:"tUpdateFriendsENT",value:function(){for(var t=NaN,e=1,n=0;n<this.playerSkins.length;n++){if(this.players[n].isPlayer)this.players[n].xPos=this.skin.x,this.players[n].yPos=this.skin.y,this.players[n].fr=this.skin.currentFrame,this.players[n].xScale=this.skin.scaleX;else{for(this.players[n].tCounter++,this.players[n].tCounter>this.players[n].tCounterGoal?(this.playerSkins[n].x=this.players[n].xPos,this.playerSkins[n].y=this.players[n].yPos):(this.playerSkins[n].x=this.players[n].oldX+this.players[n].xV*this.players[n].tCounter,this.playerSkins[n].y=this.players[n].oldY+this.players[n].yV*this.players[n].tCounter),this.playerSkins[n].colour=this.players[n].colour,this.playerSkins[n].colour2=this.players[n].colour2,this.playerSkins[n].headType=this.players[n].headType,this.playerSkins[n].handType=this.players[n].handType,this.playerSkins[n].scaleX=this.players[n].xScale,this.playerSkins[n].gotoAndStop(this.players[n].fr),this.playerSkins[n].setColours(),t=0;t<this.curLevel.fallingSpikes.length;t++)0!=this.curLevel.fallingSpikes[t].rotation&&180!=this.curLevel.fallingSpikes[t].rotation||0==this.curLevel.fallingSpikes[t].smashState&&Math.abs(this.playerSkins[n].x-this.curLevel.fallingSpikes[t].x)<10&&(this.curLevel.fallingSpikes[t].smashState=1);this.player.x<this.playerSkins[n].x&&e++}for(t=0;t<this.playerBars.length;t++)if(this.playerBars[t].player==this.players[n]){this.playerBars[t].timeTotal!=this.players[n].time&&(this.playerBars[t].timeTotal=this.players[n].time,this.tSortTimes());break}}if(this.updatePlayerPosition(e),1==this.updateMethod)for(n=0;n<this.robots.length;n++);this.handleYouArrows()}},{key:"updatePing",value:function(t){}},{key:"updatePlayerPosition",value:function(t){this.levelFinished||(this.uiPanel.placing.positionNum.text=String(t),this.uiPanel.placing.nth.text=1==t?"st":2==t?"nd":3==t?"rd":"th",this.uiPanel.placing.totalPlayers.text="of "+this.players.length+" runners")}},{key:"updateUISign",value:function(){for(var t=0,e=0;e<this.playerObject.signs.length;e++)1==this.playerObject.signs[e]&&t++;this.uiPanel.caution.signsTot.text=t+"/30","SP"===this.mode&&(this.playerObject.signs[this.levelNum]?(this.level.cautionSign.visible=!1,this.uiPanel.caution.gotoAndStop(11)):this.uiPanel.caution.gotoAndStop(1)),"SP"!==this.mode&&(this.uiPanel.caution.visible=!1)}}]),i}(rt.flash.display.MovieClip);var jr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Ur=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).dist=t.width,t.parent.createGrinder(Ze()(t)),t.dist=t.width/2,t}return i}(rt.flash.display.MovieClip);var Vr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createHalfBlock(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Gr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createInvisibleBlock(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Hr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Kr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(14,t.frame15),t}return E()(i,[{key:"frame15",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var zr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var qr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).timeOut=30,t.setAngle=0,t.defaultAngle=0,t.foundTarget=!1,t.fakeAngle=0,t.parent.createLaserCannon(Ze()(t)),t.beam.visible=!1,t.defaultAngle=t.rotation,t}return E()(i,[{key:"ping",value:function(t){this.foundTarget}}]),i}(rt.flash.display.MovieClip);var Wr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t.parent.createLaserGun(Ze()(t)),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Xr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).flags=an.FlowDisabled,t}return E()(i,[{key:"uniqueLevelInit",value:function(){this.addChild(this.blackOver)}},{key:"uniqueLevelPing",value:function(){this.__1532.ping(),this._6530.ping(),this._OPEN_.ping()}}]),i}(_n);var Yr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Jr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).touching=!1,t.turnstile=new Yr,t.flags=an.FlowDisabled,t}return E()(i,[{key:"uniqueLevelInit",value:function(){this.sign.TICKERAB.changeString("        "),this.addChild(this.turnstile),this.turnstile.x=1217.15,this.turnstile.y=429.25,this.addChild(this.blackOver)}},{key:"uniqueLevelPing",value:function(){this.sign.TICKERAB.ping(),this.touching?this.player.hitTestObject(this.turnstile)||(this.touching=!1):this.player.hitTestObject(this.turnstile)&&(this.touching=!0,this.turnstile.play(),this.sign.TICKERAB.changeString("^^^^^^^^"),this.player.parent.setPlayerName(this.sign.TICKERAB.word))}}]),i}(_n);var Zr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).touching=!1,t.hasTouched=!1,t}return E()(i,[{key:"uniqueLevelInit",value:function(){this.sign.TICKE.changeString("     ",!0),this.addChild(this.turnstile),this.addChild(this.blackOver)}},{key:"uniqueLevelPing",value:function(){this.sign.TICKE.ping();var t=NaN;if(this.touching)this.player.hitTestObject(this.turnstile)||(this.touching=!1);else if(!this.hasTouched&&this.player.hitTestObject(this.turnstile)){for(this.touching=!0,this.hasTouched=!0,this.turnstile.play(),this.sign.TICKE.changeString("AUDIT",!0),this.slidingDoor.play(),this.parent.startLab(),t=0;t<7;t++)this["b"+t].gotoAndStop(2),this["b"+t].beacon.gotoAndPlay(wn.random(this["b"+t].beacon.totalFrames-1)+1);this.addChild(this.redPing),this.redPing.gotoAndStop(2)}}}]),i}(_n);var Qr=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var $r=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ti=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ei=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ni=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ri=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ii=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var si=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var oi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ai=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var li=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"preInitCheck",value:function(){this.levelColour=0,this.obstacleColour=0,this.repaint()}},{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ci=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ui=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var hi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var fi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var di=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var pi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var yi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var vi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var mi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var gi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).levelType="MP",t}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var bi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"preInitCheck",value:function(){this.levelColour=0,this.obstacleColour=0,this.repaint()}},{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var _i=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"preInitCheck",value:function(){this.levelColour=0,this.obstacleColour=0,this.repaint()}},{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var wi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"preInitCheck",value:function(){this.levelColour=0,this.obstacleColour=0,this.repaint()}},{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var ki=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){this.addChild(this.blackOver),this.addChild(this.sign)}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var xi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).triggeredLight=!1,t.flags=an.FlowDisabled,t}return E()(i,[{key:"uniqueLevelInit",value:function(){this.addChild(this.lightOn)}},{key:"uniqueLevelPing",value:function(){this.triggeredLight||this.player.x>970&&(this.triggeredLight=!0,this.lightOn.play(),this.parent.startLab())}}]),i}(_n);var Ri=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Si=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ei=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ci=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){this.addChild(this.blackOver)}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ti=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Li=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Mi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Pi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ai=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Di=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Oi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ni=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Fi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Bi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ii=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){this.sign.TICKERAB.changeString(this.parent.playerObject.gameName),this.addChild(this.sign)}},{key:"uniqueLevelPing",value:function(){this.sign.TICKERAB.ping()}}]),i}(_n);var ji=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).touching=!1,t.hasTouched=!1,t}return E()(i,[{key:"endEnding",value:function(){this.ending.visible=!1,this.ending.stop(),this.removeChild(this.ending)}},{key:"uniqueLevelInit",value:function(){this.sign.TICKERA.changeString("        ",!0),this.sign.TICKERB.changeString("                 ",!0),this.addChild(this.turnstile),this.addChild(this.ending),this.parent.bg.visible=!1}},{key:"uniqueLevelPing",value:function(){this.sign.TICKERA.ping(),this.sign.TICKERB.ping(),this.touching?this.player.hitTestObject(this.turnstile)||(this.touching=!1):!this.hasTouched&&this.player.hitTestObject(this.turnstile)&&(this.touching=!0,this.hasTouched=!0,this.turnstile.play(),this.sign.TICKERA.changeString(this.timeString,!1),this.sign.TICKERB.changeString(this.timeRank,!1))}}]),i}(_n);var Ui=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Vi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Gi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Hi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var Ki=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"uniqueLevelInit",value:function(){}},{key:"uniqueLevelPing",value:function(){}}]),i}(_n);var zi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).triggeredLight=!1,t}return E()(i,[{key:"uniqueLevelInit",value:function(){this.sign.TICKERAB.changeString(this.parent.playerObject.gameName),this.addChild(this.sign)}},{key:"uniqueLevelPing",value:function(){this.sign.TICKERAB.ping(),this.triggeredLight||this.player.x>1775&&(this.triggeredLight=!0,pr.playSound("Cheer2"),pr.playSound("Cheer"))}}]),i}(_n);var qi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createStartPoint(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Wi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createTile(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Xi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createSpike(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Yi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createPopSpikes(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Ji=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).smashState=0,t.parent.createFallingSpike(Ze()(t)),t.smashState=0,t}return i}(rt.flash.display.MovieClip);var Zi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createSwingingAxe(Ze()(t)),t}return i}(rt.flash.display.MovieClip);var Qi=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).letter="a",t.type="1",t.parent.createTeleporter(Ze()(t)),t}return E()(i,[{key:"init",value:function(){this.letter=this.name.substr(1,1),this.type=this.name.substr(2,1),"1"==this.type&&(this.partner=this.parent.getChildByName("t".concat(this.letter,"2"))),"2"==this.type&&(this.partner=this.parent.getChildByName("t".concat(this.letter,"1"))),this.lett.text=this.letter,this.parent.flags&an.ShowTeleporterName||(this.lett.visible=!1)}}]),i}(rt.flash.display.MovieClip);var $i=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createTreadmillBlock(Ze()(t),"L"),t}return i}(rt.flash.display.MovieClip);var ts=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).parent.createTreadmillBlock(Ze()(t),"R"),t}return i}(rt.flash.display.MovieClip);var es=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"txt",new rt.flash.text.TextField),t.txt.__container.layoutBounds[2]=1e3,t.txt.__container.layoutBounds[3]=1e3,t.txt.__container.wordWrap=!0,t.txt.__container.multiline=!0,t.txt.__container.defaultTextFormat.color=4294967295,t.txt.__container.defaultTextFormat.font="Bitstream Vera Sans",t.txt.__container.defaultTextFormat.size=12,t.txt.__container.layout(),t.txt.width=50,t.txt.height=50,t.addChild(t.txt),t}return i}(rt.flash.display.Sprite);function ns(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t){var e;return R()(this,i),(e=r.call(this)).levelType="MP",e.lockCamX=!1,e.lockCamY=!1,e.initUserLevel(t),e}return E()(i,[{key:"initUserLevel",value:function(t){var e=this;this.name=t.name,this.flags=t.flags;var n,r=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ns(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ns(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(t.objects);try{var i=function(){var t,r=n.value,i=rt.flash.display.DisplayObject.__initChar((function(){return e.makeObject(r.type)}),(function(t){e.addChild(t),t.name=r.name,""!==t.name&&(e[t.name]=t);var n=new rt.flash.geom.Matrix;n.a=r.matrix[0],n.b=r.matrix[1],n.c=r.matrix[2],n.d=r.matrix[3],n.tx=r.matrix[4],n.ty=r.matrix[5],t.transform.matrix=n}));i instanceof es&&(i.txt.text=null!==(t=r.text)&&void 0!==t?t:"")};for(r.s();!(n=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}},{key:"makeObject",value:function(t){switch(t){case"start-point":return new qi;case"end-point":return new zn;case"tile":return new Wi;case"half-tile":return new Vr;case"invisible-tile":return new Gr;case"bouncer":return new En;case"spikes":return new Xi;case"pop-spikes":return new Yi;case"fall-spikes":return new Ji;case"laser-cannon":return new qr;case"swinging-axe":return new Zi;case"grinder":return new Ur;case"checkpoint":return new Pn;case"teleporter":return new Qi;case"left-treadmill":return new $i;case"right-treadmill":return new ts;case"text":return new es}}}]),i}(_n),is=function(){function t(){R()(this,t)}return E()(t,null,[{key:"cash",value:function(e){return t.delimit(e,",",3,2)}},{key:"commaSnob",value:function(t){if(t<1e3)return String(t);for(var e=String(t).length,n=new Array,r=0;r<e;r++)n.push(String(t).charAt(e-1-r));var i="";for(r=0;r<e;r++)i=r%3==0&&0!=r?n[r]+","+i:n[r]+i;return i}},{key:"delimit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=null,s=t.toFixed(r);"0."==s&&0==r&&(s="0");var o=r>0?1:0;if(s.length<=n+(r+o))return s;for(var a=s.substring(s.length-(r+o),s.length),l=s.substring(0,s.length-(r+o)),c=new Array,u=l.length;u>=0;u-=n)""!=(i=l.substring(u-n,u))&&c.unshift(i);for(var h="",f=0;f<c.length;f++)h+=c[f]+(f!=c.length-1?e:"");return h+a}},{key:"hexToString",value:function(t){return String(t)}},{key:"lower",value:function(t){return t.toLowerCase()}},{key:"parseSentence",value:function(t){for(var e=null,n=0,r=0,i=new Array,s=0;s<t.length;s++)if(" "==t.charAt(s)){for(e="",n=rt.__internal.avm2.Runtime.uint(r);n<s;n++)e+=t.charAt(n);r=rt.__internal.avm2.Runtime.uint(s+1)," "!=e&&e.length>=1&&i.push(e)}return i.push(t.substr(r,t.length)),i}},{key:"upper",value:function(t){return t.toUpperCase()}}]),t}();var ss=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"roundXP",null),T()(Ze()(t),"roundKudos",null),T()(Ze()(t),"isNew",!1),t}return E()(i,[{key:"init",value:function(t){this.player=t,this.updateBox()}},{key:"updateBox",value:function(){this.playerInfo.text=this.player.userName,this.xp.text=is.commaSnob(this.player.xp)+" XP";var t=this.player.xp;this.levelTitle.text=this.parent.parent.parent.getRankByXP(t),this.levelNum.text=this.parent.parent.parent.getLevelByXP(t),this.kudos.text=is.commaSnob(this.player.kudos),this.matchNum.text=is.commaSnob(this.player.matches)+" Matches",this.wins.text=is.commaSnob(this.player.wins)+" Wins",this.skinner.colour=this.player.colour,this.skinner.colour2=this.player.colour2,this.skinner.headType=this.player.headType,this.skinner.handType=this.player.handType,nn.colourMe(this.backdrop,this.player.colour),nn.colourMe(this.side,this.player.colour2),this.skinner.fuel();var e=this.player,n=e.kudoReceived,r=e.xpRound;if(this.isNew)this.roundKudos=null,this.kudosThisRound.text=" ";else if(this.roundKudos!==n){var i;n>(null!==(i=this.roundKudos)&&void 0!==i?i:n)&&(pr.playSound("GetKudos"),this.giveKudo.play()),this.roundKudos=n,this.kudosThisRound.text=n>0?"+"+n:"0"}this.isNew?(this.roundXP=null,this.xpThisRound.text=" "):this.roundXP!==r&&(this.roundXP=r,this.xpThisRound.text=is.commaSnob(r)+" XP")}}]),i}(rt.flash.display.MovieClip);var os=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"init",value:function(t,e){this.levelNum.text=String(t),this.levelStr.text=String(e),this.okayButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.okay)}},{key:"okay",value:function(t){this.okayButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.okay),this.parent&&this.parent.removeChild(this)}}]),i}(rt.flash.display.MovieClip);var as=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);function ls(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).timeToGo=5,t.players=new Array,t.bars=new Array,t.ranking=new Array,t.timer=new _r,t.addFrameScript(0,t.frame1),t}return E()(i,[{key:"addBar",value:function(){var t=this,e=new as;this.addChild(e),this.bars.push(e),e.kudosButton.addEventListener(rt.flash.events.MouseEvent.CLICK,(function(){return t.giveKudo(e)})),e.kudosButton.visible=!1,this.levelUpWindow&&this.contains(this.levelUpWindow)&&this.addChild(this.levelUpWindow)}},{key:"backTo",value:function(t){this.dispatchEvent(new ht(ht.GOTO,"Lobby","Back"))}},{key:"frame1",value:function(){this.stop(),this.dispatchEvent(new ht(ht.SEND,"Results","Init"))}},{key:"giveKudo",value:function(t){this.tubes.giveKudo(t.boxy.player);var e=this.players.findIndex((function(t){return t.isPlayer}));this.players[e].kudosToGive--}},{key:"init",value:function(t){this.tubes=t,this.backToMenuButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.backTo,!1,0,!0),this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping,!1,0,!0),this.addEventListener(rt.flash.events.MouseEvent.CLICK,this.mouseClick,!1,0,!0),this.players=this.tubes.players,this.initPlayers()}},{key:"initPlayers",value:function(){for(var t=0;t<this.players.length;t++)this.addBar(),this.updateBar(t),this.bars[t].kudosButton.visible=!1}},{key:"kill",value:function(){this.backToMenuButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.backTo),this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping),this.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.mouseClick)}},{key:"mouseClick",value:function(){for(var t=0;t<this.bars.length;t++)if(this.bars[t].sMute.hitTestPoint(this.mouseX,this.mouseY))return this.tubes.isPlayerMuted(this.players[t])?(this.tubes.unMutePlayer(this.players[t]),void this.bars[t].sMute.gotoAndStop(1)):(this.tubes.mutePlayer(this.players[t]),void this.bars[t].sMute.gotoAndStop(2))}},{key:"ping",value:function(){var t;if(this.parent){this.players.length>1?this.nextInfo.text="Next game will start in "+this.timeToGo+" second(s)":this.nextInfo.text="Waiting for more players...",this.sortPlayers();var e=null!==(t=this.tubes.player)&&void 0!==t?t:this.tubes.multiplayer.playerObject;this.xpDisp.text=is.commaSnob(e.xp)+" XP";var n=this.parent.getLevelByXP(e.xp),r=this.parent.getRankByXP(e.xp),i=this.parent.ranks[n+1],s=this.parent.ranks[n],o=i-e.xp;this.xpAndLevel.text=String(n),this.xpTill.text=is.commaSnob(o)+" XP until the next Level",this.xpBar.barIn.scaleX=nn.ease(this.xpBar.barIn.scaleX,(e.xp-s)/(i-s),.3),this.levelRank.text=r;var a=this.players.find((function(t){return t.isPlayer}));a&&this.tubes.room.rewards.some((function(t){return t.id===a.id}))&&(this.kudosLeft.text="Kudos To Give: "+a.kudosToGive);var l,c=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ls(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ls(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(this.bars);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.kudosButton.visible=!u.boxy.player.isPlayer&&!u.boxy.isNew&&a&&a.kudosToGive>0}}catch(t){c.e(t)}finally{c.f()}}}},{key:"removeBar",value:function(t){this.removeChild(this.bars[t]),this.bars[t]=null,this.bars.splice(t,1)}},{key:"sendMessage",value:function(){}},{key:"sortPlayers",value:function(){for(var t=new Map(this.tubes.room.rewards.map((function(t){return[t.id,t.placing]}))),e=t.size+1,n=this.players.slice().sort((function(n,r){var i,s;return(null!==(i=t.get(n.id))&&void 0!==i?i:e+n.id)-(null!==(s=t.get(r.id))&&void 0!==s?s:e+r.id)})),r=0;r<this.players.length;r++)this.bars[r].x=50,this.bars[r].y=nn.ease(this.bars[r].y,100+50*n.indexOf(this.players[r]),.3)}},{key:"updateBar",value:function(t){var e=t,n=this.bars[e],r=this.players[e];n&&r&&(n.x=50,n.boxy.init(r),this.tubes.room.rewards.some((function(t){return t.id===r.id}))?(n.timeDisp.text=r.time>0?this.timer.getRealTime(r.time):"No Finish",n.placingNum.text=String(r.placing),n.boxy.kudoImage.visible=!0,n.boxy.isNew=!1):(n.timeDisp.text="New!",n.placingNum.text="-",n.boxy.kudoImage.visible=!1,n.boxy.isNew=!0),1==r.isPlayer?(n.playerBorder.visible=!0,n.sMute.visible=!1):n.playerBorder.visible=!1,this.tubes.isPlayerMuted(r)?n.sMute.gotoAndStop(2):n.sMute.gotoAndStop(1),n.boxy.updateBox())}},{key:"checkLevelUp",value:function(t,e){var n=this.parent.getLevelByXP(t),r=this.parent.getLevelByXP(e);if(!(r<=n)){var i=this.parent.getRankByXP(e);this.levelUpWindow=new os,this.levelUpWindow.init(r,i),this.addChild(this.levelUpWindow)}}}]),i}(rt.flash.display.MovieClip);var us=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"init",value:function(){this.okayButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.okay),this.noThankYouButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.noThankYou)}},{key:"noThankYou",value:function(t){this.okayButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.okay),this.noThankYouButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.noThankYou),this.parent&&this.parent.removeChild(this)}},{key:"okay",value:function(t){this.okayButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.okay),this.noThankYouButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.noThankYou),this.dispatchEvent(new ht(ht.GOTO,"ExitPathLink")),this.parent&&this.parent.removeChild(this)}}]),i}(rt.flash.display.MovieClip);var hs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return R()(this,i),(t=r.call(this)).agDomain=!1,t.mpButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.mpButtonHandler,!1,0,!0),t.spButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.spButtonHandler,!1,0,!0),t.fButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.fButtonHandler,!1,0,!0),t.mButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.mButtonHandler,!1,0,!0),t.twitterButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.tButtonHandler,!1,0,!0),t.facebookButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.fbButtonHandler,!1,0,!0),t.armorGamesButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.agButtonHandler,!1,0,!0),t.gogogo.addEventListener(rt.flash.events.MouseEvent.CLICK,t.goHandler,!1,0,!0),t.muteButton.addEventListener(rt.flash.events.MouseEvent.CLICK,t.muteOut,!1,0,!0),t.agDomain=e,t}return E()(i,[{key:"agButtonHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"ArmorGames"))}},{key:"fbButtonHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"Facebook"))}},{key:"fButtonHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"MainMenu","Flair"))}},{key:"goHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"DeleteAllData"))}},{key:"kill",value:function(){this.mpButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.mpButtonHandler),this.spButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.spButtonHandler),this.fButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.fButtonHandler),this.mButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.mButtonHandler),this.twitterButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.tButtonHandler),this.facebookButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.fbButtonHandler),this.armorGamesButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.agButtonHandler),this.gogogo.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.goHandler),this.muteButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.muteOut),this.parent.killAGISaver()}},{key:"mButtonHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"MainMenu","CharacterEdit"))}},{key:"mpButtonHandler",value:function(){this.agDomain?this.dispatchEvent(new ht(ht.GOTO,"MainMenu","Multiplayer")):(this.warning=new us,this.addChild(this.warning),this.warning.init())}},{key:"muteOut",value:function(){pr.handleMute()}},{key:"spButtonHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"MainMenu","SinglePlayer"))}},{key:"tButtonHandler",value:function(){this.dispatchEvent(new ht(ht.GOTO,"Twitter"))}}]),i}(rt.flash.display.MovieClip);var fs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var ds=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var ps=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"buttons",value:function(t){switch(t.currentTarget){case this.qp:this.dispatchEvent(new ut({type:"connect-multiplayer"}));break;case this.backToMenuButton:this.dispatchEvent(new ht(ht.GOTO,"MultiplayerMenu","Back"))}}},{key:"customGo",value:function(t){this.dispatchEvent(new ht(ht.GOTO,"MultiplayerMenu","CharacterSelection"))}},{key:"init",value:function(t){this.playerObject=t,this.qp.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.backToMenuButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.customizeButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.customGo,!1,0,!0),this.nameDisp.text="Welcome, "+this.playerObject.userName+"!",this.playerInfo.xpDisp.text=is.commaSnob(this.playerObject.xp)+" XP",this.playerInfo.kudosDisp.text=is.commaSnob(this.playerObject.kudos)+" Kudos",this.playerInfo.winDisp.text=is.commaSnob(this.playerObject.wins)+" Wins",this.playerInfo.matchDisp.text=is.commaSnob(this.playerObject.matches)+" Matches";var e=this.parent.getLevelByXP(this.playerObject.xp),n=this.parent.getRankByXP(this.playerObject.xp),r=this.parent.ranks[e+1],i=this.parent.ranks[e],s=r-this.playerObject.xp;this.playerInfo.xpAndLevel.text=e+" "+n,this.playerInfo.xpTill.text=is.commaSnob(s)+" XP until the next Level",this.playerInfo.xpBar.barIn.scaleX=(this.playerObject.xp-i)/(r-i),this.runnerBar.runner.gotoAndStop(2),this.runnerBar.runner.colour=this.playerObject.colour,this.runnerBar.runner.colour2=this.playerObject.colour2,this.runnerBar.runner.headType=this.playerObject.headType,this.runnerBar.runner.handType=this.playerObject.handType,this.runnerBar.runner.fuel()}},{key:"kill",value:function(){this.qp.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.backToMenuButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.customizeButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.customGo)}}]),i}(rt.flash.display.MovieClip);var ys=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"addListeners",value:function(){this.playButt.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.viewButt.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.eraseButt.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.backToButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.customizeButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.deleteSure.yesButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.deleteSure.noButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0)}},{key:"buttons",value:function(t){switch(t.currentTarget){case this.playButt:this.dispatchEvent(new ht(ht.GOTO,"SinglePlayerMenu","StartGame"));break;case this.viewButt:this.dispatchEvent(new ht(ht.GOTO,"SinglePlayerMenu","ViewHighscores"));break;case this.eraseButt:this.deleteSure.visible=!0;break;case this.backToButton:this.dispatchEvent(new ht(ht.GOTO,"SinglePlayerMenu","BackButton"));break;case this.customizeButton:this.dispatchEvent(new ht(ht.GOTO,"SinglePlayerMenu","CharacterSelection"));break;case this.deleteSure.yesButton:this.dispatchEvent(new ht(ht.GOTO,"SinglePlayerMenu","Delete"));break;case this.deleteSure.noButton:this.deleteSure.visible=!1}}},{key:"init",value:function(t){this.playerObject=t,this.addListeners(),this.nameDisp.text="Welcome, "+this.playerObject.userName+"!",this.playerObject.bestTime<=9999999?this.bestTime.text=_r.translateTime(this.playerObject.bestTime):this.bestTime.text="No Run",0==this.playerObject.gameLevel?this.currentProgress.text="Not Started":this.currentProgress.text="Level "+(1+this.playerObject.gameLevel);for(var e=0,n=0;n<this.playerObject.signs.length;n++)1==this.playerObject.signs[n]&&e++;this.signsCollected.text=e+"/30",this.deleteSure.visible=!1,this.runnerBar.runner.gotoAndStop(2),this.runnerBar.runner.colour=this.playerObject.colour,this.runnerBar.runner.colour2=this.playerObject.colour2,this.runnerBar.runner.headType=this.playerObject.headType,this.runnerBar.runner.handType=this.playerObject.handType,this.runnerBar.runner.fuel(),this.dispatchEvent(new ut({type:"sp-menu-start"}))}},{key:"kill",value:function(){this.playButt.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.viewButt.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.eraseButt.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.backToButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.customizeButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.deleteSure.yesButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.deleteSure.noButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons),this.dispatchEvent(new ut({type:"sp-menu-end"}))}}]),i}(rt.flash.display.MovieClip);var vs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"xpRound",0),T()(Ze()(t),"kudoReceived",0),t.completedLevel=!1,t.isMain=!0,t.level=15,t.oldX=0,t.placing=-1,t.hostTime=0,t.wins=295,t.oldY=0,t.id=0,t.kudos=10,t.yPos=250,t.host=!1,t.isPlayer=!1,t.curCheck=0,t.xScale=1,t.matches=1254,t.xPos=250,t.toX=0,t.toY=0,t.headType=3,t.tCounterGoal=0,t.handType=3,t.colour=16777215,t.time=0,t.xV=0,t.colour2=16777215,t.tCounter=0,t.kudosToGive=0,t.fr=1,t.userName="bob",t.xp=1500,t.yV=0,t.ping=wn.random(400),t.timer=new _r,t}return E()(i,[{key:"init",value:function(){}}]),i}(rt.flash.display.MovieClip);function ms(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return gs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gs(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function gs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"locate","QPL"),T()(Ze()(t),"room",void 0),T()(Ze()(t),"playerId",void 0),T()(Ze()(t),"players",[]),T()(Ze()(t),"playerMap",new Map),T()(Ze()(t),"positionVersions",new Map),T()(Ze()(t),"ticks",0),T()(Ze()(t),"lastReportedPosition",null),T()(Ze()(t),"lastReportTick",0),T()(Ze()(t),"lastXP",null),t}return E()(i,[{key:"player",get:function(){var t,e=this;return null===(t=this.room.players.find((function(t){return t.id===e.playerId})))||void 0===t?void 0:t.data}},{key:"multiplayer",get:function(){return this.parent}}]),E()(i,[{key:"init",value:function(t,e){this.room=t,this.playerId=e,this.players.length=0,this.playerMap.clear(),this.positionVersions.clear(),this.lastReportedPosition=null,this.lastReportTick=0}},{key:"ping",value:function(){var t=this;this.ticks++;var e,n=null,r=!1,i=ms(this.room.players);try{for(i.s();!(e=i.n()).done;){var s,o=e.value,a=o.id,l=o.localId,c=o.data,u=this.playerMap.get(l);if(u||((u=new vs).userName=c.displayName,u.id=l,u.isPlayer=a===this.playerId,u.placing=this.players.length,this.playerMap.set(l,u),this.players.push(u),null===(s=this.multiplayer.lobby)||void 0===s||s.addBar()),u.level=this.multiplayer.getLevelByXP(c.xp),u.xp=c.xp,u.kudos=c.kudos,u.wins=c.wins,u.matches=c.matches,u.colour=c.primaryColor,u.colour2=c.secondaryColor,u.headType=c.headType,u.handType=c.handType,u.isPlayer){if(n=u,this.multiplayer.lobby){var h,f=null!==(h=this.lastXP)&&void 0!==h?h:c.xp;this.lastXP=c.xp,this.multiplayer.lobby.checkLevelUp(f,c.xp)}this.multiplayer.playerObject.xp!==u.xp&&(this.multiplayer.playerObject.xp=u.xp,r=!0),this.multiplayer.playerObject.kudos!==u.kudos&&(this.multiplayer.playerObject.kudos=u.kudos,r=!0),this.multiplayer.playerObject.wins!==u.wins&&(this.multiplayer.playerObject.wins=u.wins,r=!0),this.multiplayer.playerObject.matches!==u.matches&&(this.multiplayer.playerObject.matches=u.matches,r=!0)}}}catch(t){i.e(t)}finally{i.f()}for(var d=function(e){var n,r,i=t.players[e];if(t.room.players.some((function(t){return t.localId===i.id})))return"continue";null===(n=t.multiplayer.lobby)||void 0===n||n.removeBar(e),null===(r=t.multiplayer.game)||void 0===r||r.tRemovePlayer(i.id),t.players.splice(e,1),t.playerMap.delete(i.id)},p=0;p<this.players.length;p++)d(p);var y,v=ms(this.room.rewards);try{for(v.s();!(y=v.n()).done;){var m=y.value,b=this.playerMap.get(m.id);b&&(b.placing=m.placing,b.kudosToGive=m.availableKudos,b.xpRound=m.matchXP,b.kudoReceived=m.receivedKudos)}}catch(t){v.e(t)}finally{v.f()}this.checkAcheievements(),r&&this.dispatchEvent(new ht(ht.GOTO,"SaveGame"));for(var _=0;_<this.players.length;_++){var w;null===(w=this.multiplayer.lobby)||void 0===w||w.updateBar(_)}switch(this.room.phase){case"Lobby":if("Lobby"!=this.locate){"QPL"===this.locate?this.dispatchEvent(new ht(ht.GOTO,"QuickPlayLobby","OpenLobby")):this.multiplayer.game&&!this.multiplayer.game.levelEnd&&this.multiplayer.game.endMPGame();break}var k,x=ms(this.room.positions);try{for(x.s();!(k=x.n()).done;){var R=k.value,S=this.playerMap.get(R[0]);S&&(S.time=R[6])}}catch(t){x.e(t)}finally{x.f()}this.multiplayer.lobby.timeToGo!==this.room.timer&&(this.multiplayer.lobby.timeToGo=this.room.timer,this.room.timer<=5&&pr.playSound("Boop1"));break;case"InGame":if("Game"!=this.locate){var E,C=ms(this.players);try{for(C.s();!(E=C.n()).done;)E.value.time=0}catch(t){C.e(t)}finally{C.f()}this.positionVersions.clear(),this.room.nextLevelCode.length>0&&tr().setUserLevel(mn(this.room.nextLevelCode)),pr.playSound("Boop2"),this.dispatchEvent(new ht(ht.GOTO,"QPL"===this.locate?"QuickPlayLobby":"Lobby","StartGame"));break}if(this.multiplayer.game.levelNum!==this.room.nextLevel){this.multiplayer.game&&!this.multiplayer.game.levelEnd&&this.multiplayer.game.endMPGame();break}if(n){var T=[n.id,this.ticks,Math.round(n.xPos),Math.round(n.yPos),n.fr,n.xScale,n.time],L=!1;if(this.lastReportedPosition&&this.ticks>this.lastReportTick+6){for(var M=2;M<T.length;M++)if(T[M]!==this.lastReportedPosition[M]){L=!0;break}}else this.lastReportedPosition||(L=!0);L&&(this.lastReportedPosition=T,this.lastReportTick=this.ticks,this.dispatchEvent(new ut({type:"report-position",position:T})))}var A,D=ms(this.room.positions);try{for(D.s();!(A=D.n()).done;){var O,N=g()(A.value,7),F=N[0],B=N[1],I=N[2],j=N[3],U=N[4],V=N[5],G=N[6],H=this.playerMap.get(F);H&&H!==n&&this.positionVersions.get(H.id)!==B&&(H.oldX=H.xPos,H.oldY=H.yPos,H.xPos=I,H.yPos=j,H.fr=U,H.xScale=V,this.positionVersions.set(H.id,B),H.tCounter=0,H.tCounterGoal=6,H.xPos!==H.oldX?H.xV=(H.xPos-H.oldX)/H.tCounterGoal:H.xV=0,H.yPos!==H.oldY?H.yV=(H.yPos-H.oldY)/H.tCounterGoal:H.yV=0,H.time=G,H.time>0&&!H.completedLevel&&(null===(O=this.multiplayer.game)||void 0===O||O.iAmDone(H)))}}catch(t){D.e(t)}finally{D.f()}var K,z=ms(this.room.checkpoints);try{for(z.s();!(K=z.n()).done;){var q=P()(K.value),W=q[0],X=q.slice(1),Y=this.playerMap.get(W);if(Y&&Y!==n){var J,Z=ms(X);try{for(Z.s();!(J=Z.n()).done;){var Q,$=J.value;null===(Q=this.multiplayer.game)||void 0===Q||Q.tCheck(W,$)}}catch(t){Z.e(t)}finally{Z.f()}}}}catch(t){z.e(t)}finally{z.f()}this.multiplayer.game.endCountdown&&(this.multiplayer.game.endCountdown.timer=this.room.timer)}}},{key:"disconnect",value:function(){this.dispatchEvent(new ut({type:"disconnect-multiplayer"}))}},{key:"onConnectionLost",value:function(){this.dispatchEvent(new ht(ht.GOTO,"Tubes","TimeOut"))}},{key:"onCheckpoint",value:function(t){this.dispatchEvent(new ut({type:"report-checkpoint",id:t}))}},{key:"giveKudo",value:function(t){var e,n=null===(e=this.room.players.find((function(e){return e.localId===t.id})))||void 0===e?void 0:e.id;n&&this.dispatchEvent(new ut({type:"give-kudo",targetId:n}))}},{key:"isPlayerMuted",value:function(t){return!1}},{key:"unMutePlayer",value:function(t){}},{key:"mutePlayer",value:function(t){}},{key:"checkAcheievements",value:function(){var t=this.players.find((function(t){return t.isPlayer}));if(t){this.player.wins>=1&&this.dispatchEvent(new He(He.SEND,24)),this.player.wins>=10&&this.dispatchEvent(new He(He.SEND,25)),this.player.wins>=100&&this.dispatchEvent(new He(He.SEND,26)),this.player.kudos>=10&&this.dispatchEvent(new He(He.SEND,27)),this.player.kudos>=100&&this.dispatchEvent(new He(He.SEND,28)),this.player.kudos>=250&&this.dispatchEvent(new He(He.SEND,29)),this.player.matches>=5&&this.dispatchEvent(new He(He.SEND,30)),this.player.matches>=25&&this.dispatchEvent(new He(He.SEND,31)),this.player.matches>=100&&this.dispatchEvent(new He(He.SEND,32)),this.player.matches>=250&&this.dispatchEvent(new He(He.SEND,33));var e=this.room.rewards.find((function(e){return e.id===t.id}));(null==e?void 0:e.receivedKudos)>=5&&this.dispatchEvent(new He(He.SEND,34)),(null==e?void 0:e.receivedKudos)>=7&&this.dispatchEvent(new He(He.SEND,35));var n=this.multiplayer.getLevelByXP(this.player.xp);n>=3&&this.dispatchEvent(new He(He.SEND,36)),n>=5&&this.dispatchEvent(new He(He.SEND,37)),n>=8&&this.dispatchEvent(new He(He.SEND,38)),n>=10&&this.dispatchEvent(new He(He.SEND,39)),n>=15&&this.dispatchEvent(new He(He.SEND,40)),n>=20&&this.dispatchEvent(new He(He.SEND,41)),n>=25&&this.dispatchEvent(new He(He.SEND,42)),n>=30&&this.dispatchEvent(new He(He.SEND,43)),n>=35&&this.dispatchEvent(new He(He.SEND,44)),n>=38&&this.dispatchEvent(new He(He.SEND,45)),n>=39&&this.dispatchEvent(new He(He.SEND,46)),n>=40&&this.dispatchEvent(new He(He.SEND,47))}}}]),i}(rt.flash.display.MovieClip);var _s=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).isSinglePlayer=!1,t.xpLevels=41,t.xpBase=125,t.ranks=new Array,t.levelNames=new Array("Novice","Walker","Jogger","Runner","Sprinter","Windwalker","Speedrunner","Marathoner","Earthrunner","Pacer","Drifter","Voyager","Nimble","Expeditive","Quick","Outlast","Spring","Survivor","Swift","Trekker","Tour","Grace","Agility","Fast","Zoom","Fervor","Rush","Fly","Momentum","Haste","Fleetness","Forge","Drive","Boost","Velocity","Swiftness","Accelerator","Impel","Breakneck","Run Master","Grandmaster","Grandmaster"),t}return E()(i,[{key:"getLevelByXP",value:function(t){for(var e=0;e<this.ranks.length;e++)if(t<this.ranks[e])return e-1;return this.ranks.length-1}},{key:"getRankByXP",value:function(t){for(var e=0;e<this.ranks.length;e++)if(t<this.ranks[e])return this.levelNames[e-1];return this.levelNames[this.ranks.length-1]}},{key:"getXPBetweenLevels",value:function(t){for(var e=0;e<this.ranks.length;e++)if(t<this.ranks[e])return this.ranks[e]-this.ranks[e-1];return 99999999}},{key:"gotRoomList",value:function(){}},{key:"init",value:function(t){this.initRanks(),this.playerObject=t,this.multiplayerMenu=new ps,this.addChild(this.multiplayerMenu),this.multiplayerMenu.init(this.playerObject),this.isSinglePlayer=!0,this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping,!1,0,!0)}},{key:"init2",value:function(t){this.playerObject=t,this.singlePlayerMenu=new ys,this.addChild(this.singlePlayerMenu),this.singlePlayerMenu.init(this.playerObject),this.isSinglePlayer=!1}},{key:"initRanks",value:function(){for(var t=0;t<this.xpLevels;t++)0==t?this.ranks.push(0):this.ranks.push(this.ranks[t-1]+t*this.xpBase);this.ranks.push(this.ranks[this.ranks.length-1])}},{key:"ping",value:function(t){var e;(null===(e=this.tubes)||void 0===e?void 0:e.room)&&this.tubes.ping()}},{key:"quickJoinRoom",value:function(){this.startGame()}},{key:"startGame",value:function(){}},{key:"startQPM",value:function(){this.tubes=new bs,this.addChild(this.tubes)}},{key:"startRoom",value:function(){}},{key:"startSinglePlayer",value:function(){this.game=new Ir,this.game.mode="SP",this.isSinglePlayer=!0,this.game.init(this.tubes,this.playerObject,this.playerObject.gameLevel),this.addChild(this.game),this.game.startSinglePlayer()}},{key:"step",value:function(t){this.quickPlayLobby&&(this.quickPlayLobby.step=t)}},{key:"updateUserCount",value:function(t,e){this.quickPlayLobby&&this.quickPlayLobby.updateUserCount(t,e)}}]),i}(rt.flash.display.MovieClip);var ws=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).id=0,t.userName="bob",t}return i}(rt.flash.display.MovieClip);var ks=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"init",value:function(){this.okayButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.okay)}},{key:"okay",value:function(t){this.okayButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.okay),this.parent&&this.parent.removeChild(this)}}]),i}(rt.flash.display.MovieClip);var xs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(t,e){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return R()(this,i),(n=r.call(this,new rt.flash.display.BitmapData(s>0?s:t.height,e,!0,0)))._mustRender=!1,n._texture=t,n._cameraHeight=e,n._cameraY=e,n._oldCamY=0,n._rect=new rt.flash.geom.Rectangle(0,0,n._texture.width,n._texture.height),n._topIndex=0,n._bottomIndex=0,n._renderPoint=new rt.flash.geom.Point,n.preRender(),n}return E()(i,[{key:"destroy",value:function(){this._texture.dispose(),this._texture=null,this.bitmapData.dispose(),this.bitmapData=null}},{key:"preRender",value:function(){for(this._renderHeight=this.bitmapData.height,this._renderPoint.y=0,this.bitmapData.lock();this._renderHeight>0;)this._rect.y=this._bottomIndex,this._renderHeight>this._texture.height-this._bottomIndex?this._rect.height=this._texture.height-this._bottomIndex:this._rect.height=this._renderHeight,this._renderHeight=this._renderHeight-this._rect.height,this.bitmapData.copyPixels(this._texture,this._rect,this._renderPoint),this._renderPoint.y=this._renderPoint.y+this._rect.height,this._bottomIndex=this._bottomIndex+this._rect.height,this._bottomIndex>=this._texture.height&&(this._bottomIndex=0);this.bitmapData.unlock()}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||this._mustRender){var e=this._oldCamY-this._cameraY;if(this._oldCamY=this._cameraY,0!=e){if(e>this.bitmapData.height&&(e=this.bitmapData.height),this._renderHeight=Math.abs(e),this.bitmapData.lock(),this.bitmapData.scroll(0,e),e<0)for(this._renderPoint.y=this.bitmapData.height+e;this._renderHeight>0;)this._rect.y=this._bottomIndex,this._renderHeight>this._texture.height-this._bottomIndex?this._rect.height=this._texture.height-this._bottomIndex:this._rect.height=this._renderHeight,this.bitmapData.copyPixels(this._texture,this._rect,this._renderPoint),this._renderHeight=this._renderHeight-this._rect.height,this._renderPoint.y=this._renderPoint.y+this._rect.height,this._bottomIndex>=this._texture.height?this._bottomIndex=this._rect.height-(this._texture.height-this._bottomIndex):this._bottomIndex=this._bottomIndex+this._rect.height,this._topIndex>=this._texture.height?this._topIndex=this._rect.height-(this._texture.height-this._topIndex):this._topIndex=this._topIndex+this._rect.height;else for(;this._renderHeight>0;)this._renderHeight>this._texture.height-(this._texture.height-this._topIndex)?(this._rect.height=this._texture.height-(this._texture.height-this._topIndex),this._rect.y=this._topIndex-this._rect.height,this._renderPoint.y=e-this._rect.height):(this._rect.height=this._renderHeight,this._rect.y=this._topIndex-this._rect.height,this._renderPoint.y=0),this.bitmapData.copyPixels(this._texture,this._rect,this._renderPoint),this._renderHeight=this._renderHeight-this._rect.height,this._renderPoint.y=this._renderPoint.y-this._rect.height,this._bottomIndex<=0?this._bottomIndex=this._texture.height-(this._rect.height-this._bottomIndex):this._bottomIndex=this._bottomIndex-this._rect.height,this._topIndex<=0?this._topIndex=this._texture.height-(this._rect.height-this._topIndex):this._topIndex=this._topIndex-this._rect.height;this.bitmapData.unlock(),this._mustRender=!1}}}},{key:"cameraHeight",get:function(){return this._cameraHeight},set:function(t){this._cameraHeight=t,this._mustRender=!0}},{key:"cameraY",get:function(){return this._cameraY},set:function(t){this._cameraY=t,this._mustRender=!0}}]),i}(rt.flash.display.Bitmap);var Rs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Ss=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t.parent.createPlate(Ze()(t)),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Es=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).numPlayers=0,t.step=0,t.totalPlayers=1,t.gameReady=!1,t.startCounter=0,t}return E()(i,[{key:"buttons",value:function(t){switch(t.currentTarget){case this.backToMenuButton:this.dispatchEvent(new ht(ht.GOTO,"QuickPlayLobby","Back"))}}},{key:"init",value:function(){this.backToMenuButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons,!1,0,!0),this.step=0,this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.ping,!1,0,!0)}},{key:"kill",value:function(){this.backToMenuButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.buttons)}},{key:"ping",value:function(t){0==this.step&&(this.connectionMeter.matcher.width=nn.ease(this.connectionMeter.matcher.width,0,.3),this.playerCountText.text="Connecting..."),1==this.step&&(this.connectionMeter.matcher.width=nn.ease(this.connectionMeter.matcher.width,20,.3),this.playerCountText.text="Poking Server..."),2==this.step&&(this.connectionMeter.matcher.width=nn.ease(this.connectionMeter.matcher.width,182,.3),this.playerCountText.text="Finding Room..."),3==this.step&&(this.connectionMeter.matcher.width=nn.ease(this.connectionMeter.matcher.width,345+166/this.totalPlayers*this.numPlayers,.3)),4==this.step&&(this.connectionMeter.matcher.width=nn.ease(this.connectionMeter.matcher.width,511,.3),this.gameReady=!0)}},{key:"updateUserCount",value:function(t,e){this.playerCountText.text=t+"/"+e+" Players Found",this.numPlayers=t,this.totalPlayers=e,t>1&&(this.gameReady=!0,this.step=4)}}]),i}(rt.flash.display.MovieClip);var Cs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.display.MovieClip);var Ts=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).isMain=!1,t.playerXMax=8,t.l=!1,t.time=0,t.teleporting=!1,t.id=5,t.levelNum=0,t.d=!1,t.playerYMax=15,t.hitHalf=!1,t.r=!1,t.gameMode=0,t.u=!1,t.beltSpeed=2,t.userName="hello",t.colour=wn.randomColour(),t.colour2=wn.randomColour(),t}return E()(i,[{key:"doTheJump",value:function(){this.jumpCounter++,this.holdUp=!0,0==this.yLove&&this.jumpLevel&&!this.hitHalf&&(this.playerJump=!0,this.jumpLevel=!1,this.yVel=this.hops,this.yLove=1)}},{key:"handleHalfTiles",value:function(){var t=null;this.hitHalf=!1;for(var e=0;e<this.curLevel.halfTiles.length;e++)t=this.curLevel.halfTiles[e],this.hitTestObject(t)&&(this.hitHalf=!0,0==this.jumpLevel?this.xVel=0:this.holdDown||(this.xVel=.7*this.xVel))}},{key:"hitBlock",value:function(t){}},{key:"initPlayer",value:function(){this.xF=1,this.dXVel=5,this.xMax=20,this.playerXMax=8,this.playerYMax=20,this.xAcc=.8}},{key:"levelInteraction",value:function(){for(var t=0;t<this.curLevel.bouncers.length;t++)if(this.hitTestObject(this.curLevel.bouncers[t])&&1==this.curLevel.bouncers[t].currentFrame)return this.yVel=-20,this.playerJump=!0,this.jumpLevel=!1,this.yLove=1,void this.curLevel.bouncers[t].gotoAndPlay(2)}},{key:"movePlayer",value:function(){this.u?this.holdUp||(this.doTheJump(),this.holdUp=!0):(this.holdUp=!1,this.jumpCounter=0),this.d?(this.holdDown=!0,this.xF=.9,this.scaleY=.5):(this.holdDown=!1,this.xF=.7,this.scaleY=1),this.l?this.holdDown||this.xVel>0-this.playerXMax&&(this.xVel=this.xVel-this.xAcc):this.r&&(this.holdDown||this.xVel<this.playerXMax&&(this.xVel=this.xVel+this.xAcc)),this.l||this.r?(this.xF=1,this.holdDown&&!this.hitHalf&&(this.xVel=.95*this.xVel)):this.xF=.5}},{key:"ping",value:function(){this.playerSize=1,this.typeOf="deadaphant",this.thudTresh=10,this.movePlayer(),this.handleHalfTiles(),this.updateTileInteraction(),this.levelInteraction(),this.teleporterInteraction()}},{key:"teleporterInteraction",value:function(){var t=0;if(this.teleporting){for(t=0;t<this.curLevel.teleporters.length;t++)if(this.hitTestObject(this.curLevel.teleporters[t]))return;this.teleporting=!1}else for(t=0;t<this.curLevel.teleporters.length;t++)if(this.hitTestObject(this.curLevel.teleporters[t]))return this.teleporting=!0,void(this.curLevel.teleporters[t].partner&&(this.x=this.curLevel.teleporters[t].partner.x,this.y=this.curLevel.teleporters[t].partner.y,this.parent.emitBeam(this.curLevel.teleporters[t].x-17,this.curLevel.teleporters[t].y,25),this.parent.emitBeam(this.x-17,this.y,25)))}},{key:"touchBlock",value:function(t){5==t.typeOf?this.xVel=this.xVel+(0-this.beltSpeed):6==t.typeOf?this.xVel=this.xVel+this.beltSpeed:this.xVel>this.playerXMax?this.xVel=this.playerXMax:this.xVel<0-this.playerXMax&&(this.xVel=0-this.playerXMax)}}]),i}(kn);var Ls=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound),Ms=function t(){R()(this,t)};T()(Ms,"HORIZONTAL","horizontal"),T()(Ms,"VERTICAL","vertical");var Ps=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this))._position=0,t._maxScrollPosition=1,t._thumbHeld=!1,t._oldPosition=0,t.addEventListener(rt.flash.events.Event.ADDED_TO_STAGE,t.handleAddedToStage,!1,0,!0),t._position=0,t._maxScrollPosition=1,t}return E()(i,[{key:"handleAddedToStage",value:function(t){this.removeEventListener(rt.flash.events.Event.ADDED_TO_STAGE,this.handleAddedToStage),this._position=0,this._maxScrollPosition=1,this.update(),this.thumb_mc.y=this.bar_mc.y,this.addEventListener(rt.flash.events.MouseEvent.MOUSE_DOWN,this.handleMouseDown,!1,0,!0),this.stage.addEventListener(rt.flash.events.MouseEvent.MOUSE_UP,this.handleMouseUp,!1,0,!0),this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.handleEnterFrame,!1,0,!0)}},{key:"handleEnterFrame",value:function(t){this._thumbHeld&&(this.thumb_mc.y=this.mouseY-this.thumb_mc.height/2,this.thumb_mc.y>this.bar_mc.height-this.thumb_mc.height&&(this.thumb_mc.y=this.bar_mc.height-this.thumb_mc.height),this.thumb_mc.y<this.bar_mc.y&&(this.thumb_mc.y=this.bar_mc.y),this._oldPosition=this._position,this._position=this._maxScrollPosition*(this.thumb_mc.y/(this.bar_mc.height-this.thumb_mc.height)),this.dispatchEvent(new Jn(Ms.VERTICAL,this._position-this._oldPosition,this._position)))}},{key:"handleMouseDown",value:function(t){this._thumbHeld=!0}},{key:"handleMouseUp",value:function(t){this._thumbHeld=!1}},{key:"update",value:function(){this.thumb_mc.y=this._position/this._maxScrollPosition*(this.bar_mc.height-this.thumb_mc.height),this.on=this._position!=this._maxScrollPosition}},{key:"height",get:function(){return this.bar_mc.height}},{key:"maxScrollPosition",get:function(){return this._maxScrollPosition},set:function(t){this._maxScrollPosition=t,this._maxScrollPosition<0&&(this._maxScrollPosition=0),this._position=this._maxScrollPosition*(this.thumb_mc.y/(this.bar_mc.height-this.thumb_mc.height)),this.update()}},{key:"on",get:function(){return this.thumb_mc.visible},set:function(t){this.thumb_mc.visible=t,this.buttonMode=t}},{key:"percent",get:function(){return 0==this._maxScrollPosition?0:this._position/this._maxScrollPosition}},{key:"scrollPosition",get:function(){return this._position},set:function(t){this._position=t,this._position>this._maxScrollPosition&&(this._position=this._maxScrollPosition),this._position<0&&(this._position=0),this.update()}}]),i}(rt.flash.display.MovieClip);var As=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(Ps);var Ds=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Os=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Ns=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Fs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Bs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return R()(this,i),(t=r.call(this)).setCounter=0,t.prevChar="A",t.characters=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0"," ","!",",",".","_",":"),t.startingCharacter=2+wn.random(t.characters.length-3),t.curCharacter=t.startingCharacter,t.prevCharacter=t.startingCharacter-1,t.goalCharacter=wn.random(t.characters.length-1),t.curChar=t.characters[t.startingCharacter],t.goalCharacter=null==e?t.getPosition(t.name):t.getPosition(e),n&&(t.startingCharacter=t.goalCharacter),t}return E()(i,[{key:"checkLetters",value:function(){var t=this.goalCharacter-this.curCharacter;t<0&&(t+=this.characters.length),this.setCounter++,t>=3?(this.setCounter=0,this.swapLetters(),this.filters=new Array(new rt.flash.filters.BlurFilter(0,8,1))):t>=2?(this.filters=new Array(new rt.flash.filters.BlurFilter(0,5,1)),this.setCounter>3&&(this.setCounter=0,this.swapLetters())):t>=1?(this.filters=new Array,this.setCounter>5&&(this.setCounter=0,this.swapLetters())):0==t&&this.currentFrame==this.totalFrames&&(this.setCharacters(),this.stop())}},{key:"getPosition",value:function(t){for(var e=0;e<this.characters.length;e++)if(t==this.characters[e])return e;return 0}},{key:"newCharacter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.goalCharacter;"^"==t&&(t=this.characters[wn.random(36)]),this.goalCharacter=this.getPosition(t),e&&(this.curCharacter=this.goalCharacter,this.prevCharacter=n,this.curChar=this.characters[this.curCharacter],this.prevChar=this.characters[this.prevCharacter],this.setCharacters(),this.gotoAndPlay(1))}},{key:"ping",value:function(){this.checkLetters()}},{key:"setCharacters",value:function(){this.above.let.text=this.prevChar,this.topBack.let.text=this.curChar,this.belowNow.let.text=this.curChar,this.bottomBack.let.text=this.prevChar}},{key:"swapLetters",value:function(){this.gotoAndPlay(1),this.prevCharacter=this.curCharacter,this.curCharacter++,this.curCharacter==this.characters.length&&(this.curCharacter=0),this.curChar=this.characters[this.curCharacter],this.prevChar=this.characters[this.prevCharacter],this.setCharacters()}}]),i}(rt.flash.display.MovieClip);function Is(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var js=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;R()(this,i);var n=null;(t=r.call(this)).tickers=new Array,t.word="",t.bg.visible=!1,null==e&&(e=t.name),t.word=e;for(var s=0;s<e.length;s++)(n=new Bs(e.substr(s,1),!0)).x=s*n.width+2,n.y=0,t.addChild(n),t.tickers.push(n);return t}return E()(i,[{key:"changeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;this.word=t;for(var r=0;r<this.tickers.length;r++)n=this.tickers[r],t.substr(r,1)!=n.characters[n.goalCharacter]&&n.newCharacter(t.substr(r,1),e);if(t.length>this.tickers.length)for(r=Number(this.tickers.length);r<t.length;r++)(n=new Bs(t.substr(r,1),!0)).x=r*n.width+2,n.y=0,this.addChild(n),this.tickers.push(n);var i="";for(r=0;r<this.tickers.length;r++)i+=this.tickers[r].characters[this.tickers[r].goalCharacter];this.word=i}},{key:"ping",value:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Is(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(this.tickers);try{for(e.s();!(t=e.n()).done;)t.value.ping()}catch(t){e.e(t)}finally{e.f()}}}]),i}(rt.flash.display.MovieClip);var Us=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"init",value:function(){this.okayButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.okay)}},{key:"okay",value:function(t){this.okayButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.okay),this.parent&&this.parent.removeChild(this)}}]),i}(rt.flash.display.MovieClip);var Vs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return E()(i,[{key:"ping",value:function(){this.cA.ping(),this.cB.ping()}}]),i}(rt.flash.display.MovieClip);var Gs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Hs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){return R()(this,i),r.call(this)}return i}(rt.flash.media.Sound);var Ks=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1,309,t.frame310),t}return E()(i,[{key:"frame1",value:function(){this.gotoAndPlay(2)}},{key:"frame310",value:function(){this.stop(),this.dispatchEvent(new ht(ht.GOTO,"endIntro"," "))}}]),i}(rt.flash.display.MovieClip);var zs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var qs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(1,t.frame2),t}return E()(i,[{key:"frame2",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Ws=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1,19,t.frame20),t}return E()(i,[{key:"frame1",value:function(){this.stop()}},{key:"frame20",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Xs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Ys=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Js=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Zs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var Qs=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var $s=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1,30,t.frame31),t}return E()(i,[{key:"frame1",value:function(){this.stop()}},{key:"frame31",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var to=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var eo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var no=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var ro=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var io=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(95,t.frame96),t}return E()(i,[{key:"frame96",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var so=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1,62,t.frame63),t}return E()(i,[{key:"frame1",value:function(){this.stop()}},{key:"frame63",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip),oo=function t(){R()(this,t),T()(this,"userName",void 0),T()(this,"colour",void 0),T()(this,"colour2",void 0),T()(this,"headType",void 0),T()(this,"handType",void 0),T()(this,"xp",void 0),T()(this,"kudos",void 0),T()(this,"matches",void 0),T()(this,"wins",void 0),T()(this,"jumps",void 0),T()(this,"deaths",void 0),T()(this,"gameDeaths",void 0),T()(this,"gameLevel",void 0),T()(this,"gameName",void 0),T()(this,"gameTime",void 0),T()(this,"bestTime",void 0),T()(this,"ping",void 0),T()(this,"signs",void 0),T()(this,"achs",void 0)};var ao=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"userLevel",null),t.addFrameScript(0,t.frame1,1,t.frame2,2,t.frame3),t}return E()(i,[{key:"achCenter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null;0==this.achievements[t.achNum].got&&(this.achievements[t.achNum].got=!0,this.playerObj.achs[t.achNum]=!0,e=new Ke,this.addChild(e),pr.playSound("AchSound"),t.achNum>=24?(e.ach.box.handGear.gotoAndStop(t.achNum-23),e.ach.box.head.visible=!1,e.ach.box.head2.visible=!1):(e.ach.box.head.gotoAndStop(t.achNum+1),e.ach.box.handGear.visible=!1),e.ach.achTitle.text=this.achievements[t.achNum].achName)}},{key:"agiLoginPop",value:function(t){this.agi&&(this.agi.showLogin(this.loginPopCheck,this),this.agiLogin.hitA.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.agiLoginPop))}},{key:"checkDomain",value:function(){return!!this.agDomain}},{key:"closeHandler",value:function(){this.isHS?(this.multiplayer&&this.contains(this.multiplayer)&&this.multiplayer.singlePlayerMenu.addListeners(),this.isHS=!1):(this.isLoggedIn=this.agi.isLoggedIn(),pr.playSound("Cheer2"),this.isLoggedIn&&this.loadGame(),this.agiLogin.hitA.addEventListener(rt.flash.events.MouseEvent.CLICK,this.agiLoginPop),this.fixUpAgiLogin())}},{key:"deleteAllData",value:function(){this.newGame(),this.saveGame(),this.loadGamez()}},{key:"endMenus",value:function(){this.endUIBackground(),pr.stopAllSounds(),this.contains(this.agiLogin)&&this.removeChild(this.agiLogin)}},{key:"endUIBackground",value:function(){this.removeChild(this.uiBackground),this.uiBackground=null,this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.uiBG)}},{key:"fixUpAgiLogin",value:function(){this.agiLogin&&this.contains(this.agiLogin)&&(this.isLoggedIn?this.agiLogin.disp.htmlText="You are logged in as <FONT COLOR='#"+wn.toHex(this.playerObj.colour)+"'>"+this.playerObj.userName+"</FONT>! [Click to Logout]":this.agiLogin.disp.htmlText="You are currently not logged in [Click to Login]")}},{key:"frame1",value:function(){this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.preload),this.preloader.muteButton.addEventListener(rt.flash.events.MouseEvent.CLICK,this.muteOut,!1,0,!0),this.stop(),this.url=this.stage.loaderInfo.url,this.urlStart=this.url.indexOf("://")+3,this.urlEnd=this.url.indexOf("/",this.urlStart),this.domain=this.url.substring(this.urlStart,this.urlEnd),this.LastDot=this.domain.lastIndexOf(".")-1,this.domEnd=this.domain.lastIndexOf(".",this.LastDot)+1,this.domain=this.domain.substring(this.domEnd,this.domain.length),this.currentDomain=this.domain,this.agDomain=!0}},{key:"frame2",value:function(){this.play()}},{key:"frame3",value:function(){rr.initialize(this.stage,!0),this.stop(),this.myCountry="Other",this.achievements=new Array,this.achievements.push(new Ge("Underground","Finish the underground portion")),this.achievements.push(new Ge("Stadium","Finish the stadium portion")),this.achievements.push(new Ge("Lab","Complete the lab stages")),this.achievements.push(new Ge("Outside","Complete the escape sequence")),this.achievements.push(new Ge("Bridge","Complete the bridge")),this.achievements.push(new Ge("Limits","Reach the city limits and win")),this.achievements.push(new Ge("Jump","Jump 1,000 times")),this.achievements.push(new Ge("Fill","Fill FLOW to maximum")),this.achievements.push(new Ge("Burn","Burn a full FLOW bar")),this.achievements.push(new Ge("Slide","Slide for more than 8 blocks")),this.achievements.push(new Ge("Bounce","Bounce 10 times on a platform")),this.achievements.push(new Ge("Survive","Go 10 screens without dying")),this.achievements.push(new Ge("Rewind","Rewind for more than 5 seconds")),this.achievements.push(new Ge("Freewind","Don't die before level 11")),this.achievements.push(new Ge("Mindwind","Don't die before the extermination room level 16, then die")),this.achievements.push(new Ge("Signage","Collect a caution sign")),this.achievements.push(new Ge("SignEight","Collect 25% of caution signs")),this.achievements.push(new Ge("SignFifteen","Collect 50% of caution signs")),this.achievements.push(new Ge("SignTwentyFour","Collect 75% of caution signs")),this.achievements.push(new Ge("SignAll","Collect all caution signs")),this.achievements.push(new Ge("Fast","Beat single player in 15 minutes")),this.achievements.push(new Ge("Faster","Beat single player in 12 minutes")),this.achievements.push(new Ge("Fastest","Beat single player in 9 minutes")),this.achievements.push(new Ge("Perfect","Beat single player in 7 minutes")),this.achievements.push(new Ge("First","Win a multiplayer race")),this.achievements.push(new Ge("Ten","Win ten races")),this.achievements.push(new Ge("Hundred","Win one hundred races")),this.achievements.push(new Ge("Kudomonger","Earn 10 kudos")),this.achievements.push(new Ge("Kudomonster","Earn 100 kudos")),this.achievements.push(new Ge("Kudomaster","Earn 250 kudos")),this.achievements.push(new Ge("Matched","Run 5 Races")),this.achievements.push(new Ge("Matchy","Run 25 Races")),this.achievements.push(new Ge("Matchier","Run 100 Races")),this.achievements.push(new Ge("Matchiest","Run 250 Races")),this.achievements.push(new Ge("Reel","Earn 5 kudos in one race")),this.achievements.push(new Ge("Rack","Earn 7 kudos in one race")),this.achievements.push(new Ge("Runner","Reach Level 3")),this.achievements.push(new Ge("Windwalker","Reach Level 5")),this.achievements.push(new Ge("Earthrunner","Reach Level 8")),this.achievements.push(new Ge("Drifter","Reach Level 10")),this.achievements.push(new Ge("Outlast","Reach Level 15")),this.achievements.push(new Ge("Tour","Reach Level 20")),this.achievements.push(new Ge("Fervor","Reach Level 25")),this.achievements.push(new Ge("Fleetness","Reach Level 30")),this.achievements.push(new Ge("Swiftness","Reach Level 35")),this.achievements.push(new Ge("Breakneck","Reach Level 38")),this.achievements.push(new Ge("Runmaster","Reach Level 39")),this.achievements.push(new Ge("Grandmaster","Reach Level 40")),this.peopleNames=new Array("John","Tony","Dan","Fil","Ian","Mike","Larry","Krin","Con","Louissi","Justin"),this.titles=new Array("Rifle","Cannon","Frostbite","Wolf","Claws","Saw","Shock"),this.animals=new Array("Donkey","Llama","Platypus","Hedgehog","Giraffe","Velociraptor","Otter","Hippo","Elephant","Kangaroo","Marmot","Falcon","Tiger","Cheetah","Muskrat","Deer","Badger","Lemur","Possum","Wildebeest","Whale","Dolphin","Swordfish"),this.playerObj=new oo,this.playerObj.ping=0,this.savedGame=rt.flash.net.SharedObject.getLocal("Exit-Path"),this.loadGame(),this.saveGame(),this.isLoggedIn=!1,this.multiplayer=new _s,this.singlePlayer=!0,this.agIntro=new Xe,this.addChild(this.agIntro),this.agiLogin=new We,this.agiLogin.hitA.addEventListener(rt.flash.events.MouseEvent.CLICK,this.agiLoginPop),this.charSelectFromMainMenu=!1,this.charSelectFromMulti=!0,this.twitterLink=new rt.flash.net.URLRequest("http://twitter.com/armorgames/"),this.armorGamesLink=new rt.flash.net.URLRequest("http://armorgames.com/"),this.exitPathLink=new rt.flash.net.URLRequest("http://armorgames.com/play/5917/exit-path"),this.facebookLink=new rt.flash.net.URLRequest("http://www.facebook.com/pages/Armor-Games/19522089061"),this.addEventListener(ht.GOTO,this.hub,!1,0,!0),this.addEventListener(ht.SEND,this.messageCenter,!1,0,!0),this.addEventListener(He.SEND,this.achCenter,!1,0,!0),this.bitmapData=new rt.flash.display.BitmapData(800,500),this.bitmapData.draw(this.multiplayer,null,null,null),this.rewind=new Cs,this.psb=new xs(this.bitmapData,500,800),this.clearBitmap=new rt.flash.display.BitmapData(800,500,!0,0)}},{key:"getAGIName",value:function(){return this.agi?this.agi.getUserProfile().username:this.getRandomName()}},{key:"getAGISaver",value:function(){this.agi&&this.contains(this.agi)}},{key:"getRandomName",value:function(){return"Guest_"+this.animals[wn.random(this.animals.length)]+wn.random(1e5)}},{key:"highscoresHandler",value:function(){}},{key:"highscoreSub",value:function(){}},{key:"hub",value:function(t){var e=NaN;if("Twitter"==t.sender&&rt.flash.net.navigateToURL(this.twitterLink,"_blank"),"Facebook"==t.sender&&rt.flash.net.navigateToURL(this.facebookLink,"_blank"),"ArmorGames"==t.sender&&rt.flash.net.navigateToURL(this.armorGamesLink,"_blank"),"ExitPathLink"==t.sender&&rt.flash.net.navigateToURL(this.exitPathLink,"_blank"),"endIntro"==t.sender)return this.removeChild(this.agIntro),this.mainMenu=new hs(this.agDomain),this.startMenus(),this.addChild(this.mainMenu),void this.startMainMenu();if("SaveGame"==t.sender&&this.saveGame(),"DeleteAllData"==t.sender&&this.deleteAllData(),"LevelEnd"==t.sender&&(this.multiplayer.game.removeChild(this.multiplayer.game.levelEnd),this.multiplayer.game.levelEnd=null,this.multiplayer.game.killS(),this.multiplayer.removeChild(this.multiplayer.game),this.multiplayer.game=null,this.startLowMenu(),this.multiplayer.lobby=new cs,this.multiplayer.addChild(this.multiplayer.lobby),this.multiplayer.lobby.init(this.multiplayer.tubes),this.multiplayer.tubes.locate="Lobby",this.multiplayer.addChild(this.multiplayer.tubes)),"MainMenu"==t.sender)switch(this.killAgiLogin(),t.msg){case"Multiplayer":this.mainMenu.kill(),this.removeChild(this.mainMenu),this.mainMenu=null,this.multiplayer=new _s,this.addChild(this.multiplayer),this.multiplayer.init(this.playerObj),this.isLoggedIn||(this.notLoggedIn=new ks,this.addChild(this.notLoggedIn),this.notLoggedIn.init());break;case"SinglePlayer":this.mainMenu.kill(),this.removeChild(this.mainMenu),this.mainMenu=null,this.multiplayer=new _s,this.addChild(this.multiplayer),this.multiplayer.init2(this.playerObj);break;case"Flair":this.mainMenu.kill(),this.removeChild(this.mainMenu),this.mainMenu=null,this.flairMenu=new Zn,this.addChild(this.flairMenu),this.flairMenu.init(this.playerObj,this.achievements);break;case"CharacterEdit":this.mainMenu.kill(),this.removeChild(this.mainMenu),this.mainMenu=null,this.characterSelection=new Mn(this.playerObj),this.addChild(this.characterSelection),this.charSelectFromMainMenu=!0,this.dispatchEvent(new ut({type:"modify-start"}))}if("MultiplayerMenu"==t.sender)switch(t.msg){case"Back":this.multiplayer.multiplayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu=null,this.removeChild(this.multiplayer),this.multiplayer=null,this.mainMenu=new hs(this.agDomain),this.addChild(this.mainMenu),this.startMainMenu();break;case"QuickPlay":this.multiplayer.multiplayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu=null,this.multiplayer.quickPlayLobby=new Es,this.multiplayer.quickPlayLobby.init(),this.multiplayer.addChild(this.multiplayer.quickPlayLobby),this.multiplayer.startQPM(),this.startLowMenu(),this.killAgiLogin();break;case"CharacterSelection":this.multiplayer.multiplayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu=null,this.multiplayer.characterSelection=new Mn(this.playerObj),this.multiplayer.addChild(this.multiplayer.characterSelection),this.charSelectFromMainMenu=!1,this.charSelectFromMulti=!0,this.dispatchEvent(new ut({type:"modify-start"}))}if("Tubes"==t.sender)switch(t.msg){case"TimeOut":switch(pr.stopAllSounds(),this.multiplayer.tubes.locate){case"Lobby":this.multiplayer.removeChild(this.multiplayer.lobby),this.multiplayer.lobby.kill(),this.multiplayer.lobby=null;break;case"Game":this.multiplayer.game.killS(),this.multiplayer.removeChild(this.multiplayer.game),this.multiplayer.game=null;break;case"QPL":this.multiplayer.quickPlayLobby.kill(),this.multiplayer.removeChild(this.multiplayer.quickPlayLobby),this.multiplayer.quickPlayLobby=null}this.multiplayer.tubes.disconnect(),this.multiplayer.removeChild(this.multiplayer.tubes),this.multiplayer.tubes=null,this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.multiplayerMenu=new ps,this.multiplayer.addChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu.init(this.playerObj),this.timeOutWindow=new Us,this.addChild(this.timeOutWindow),this.timeOutWindow.init()}if("FlairMenu"==t.sender)switch(t.msg){case"Back":this.flairMenu.kill(),this.removeChild(this.flairMenu),this.flairMenu=null,this.mainMenu=new hs(this.agDomain),this.addChild(this.mainMenu),this.startMainMenu()}if("SinglePlayerMenu"==t.sender)switch(t.msg){case"BackButton":this.multiplayer.singlePlayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu=null,this.removeChild(this.multiplayer),this.multiplayer=null,this.mainMenu=new hs(this.agDomain),this.addChild(this.mainMenu),this.startMainMenu();break;case"Delete":this.playerObj.gameLevel=0,this.playerObj.gameTime=0,this.playerObj.gameDeaths=0,this.multiplayer.singlePlayerMenu.kill(),this.multiplayer.singlePlayerMenu.init(this.playerObj);break;case"StartGame":this.endMenus(),this.multiplayer.singlePlayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu=null,this.multiplayer.startSinglePlayer();break;case"ViewHighscores":this.highscoresHandler();break;case"CharacterSelection":this.multiplayer.singlePlayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu=null,this.multiplayer.characterSelection=new Mn(this.playerObj),this.multiplayer.addChild(this.multiplayer.characterSelection),this.charSelectFromMainMenu=!1,this.charSelectFromMulti=!1,this.dispatchEvent(new ut({type:"modify-start"}))}if("CharacterSelection"==t.sender)switch(t.msg){case"Back":if(this.charSelectFromMainMenu)return this.characterSelection.kill(),this.removeChild(this.characterSelection),this.characterSelection=null,this.mainMenu=new hs(this.agDomain),this.addChild(this.mainMenu),void this.startMainMenu();this.multiplayer.characterSelection.kill(),this.multiplayer.removeChild(this.multiplayer.characterSelection),this.multiplayer.characterSelection=null,this.charSelectFromMulti?(this.multiplayer.multiplayerMenu=new ps,this.multiplayer.addChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu.init(this.playerObj)):(this.multiplayer.singlePlayerMenu=new ys,this.multiplayer.addChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu.init(this.playerObj))}if("QuickPlayLobby"==t.sender)switch(t.msg){case"Back":this.multiplayer.quickPlayLobby.kill(),this.multiplayer.removeChild(this.multiplayer.quickPlayLobby),this.multiplayer.quickPlayLobby=null,this.multiplayer.multiplayerMenu=new ps,this.multiplayer.addChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu.init(this.playerObj),this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.tubes.disconnect(),this.multiplayer.removeChild(this.multiplayer.tubes),this.multiplayer.tubes=null;break;case"StartGame":this.endMenus(),this.multiplayer.quickPlayLobby.kill(),this.multiplayer.removeChild(this.multiplayer.quickPlayLobby),this.multiplayer.quickPlayLobby=null,this.multiplayer.tubes.locate="Game",this.multiplayer.game=new Ir,this.multiplayer.game.mode="MP",this.multiplayer.addChild(this.multiplayer.game),this.multiplayer.game.init(this.multiplayer.tubes,this.playerObj,this.multiplayer.tubes.room.nextLevel),this.multiplayer.game.countdownStart(),this.multiplayer.addChild(this.multiplayer.tubes),this.multiplayer.game.initMP();break;case"OpenLobby":this.endUIBackground(),this.multiplayer.quickPlayLobby.kill(),this.multiplayer.removeChild(this.multiplayer.quickPlayLobby),this.multiplayer.quickPlayLobby=null,this.multiplayer.lobby=new cs,this.multiplayer.addChild(this.multiplayer.lobby),this.multiplayer.lobby.init(this.multiplayer.tubes),this.multiplayer.tubes.locate="Lobby",this.multiplayer.addChild(this.multiplayer.tubes)}if("Lobby"==t.sender)switch(t.msg){case"Back":this.multiplayer.removeChild(this.multiplayer.lobby),this.multiplayer.lobby.kill(),this.multiplayer.lobby=null,this.multiplayer.tubes.disconnect(),this.multiplayer.removeChild(this.multiplayer.tubes),this.multiplayer.tubes=null,this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.multiplayerMenu=new ps,this.multiplayer.addChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu.init(this.playerObj);break;case"StartGame":this.multiplayer.tubes.locate="Game",this.multiplayer.contains(this.multiplayer.lobby)&&(this.multiplayer.removeChild(this.multiplayer.lobby),this.multiplayer.lobby.kill()),this.multiplayer.lobby=null,this.multiplayer.game=new Ir,this.multiplayer.game.mode="MP",this.multiplayer.addChild(this.multiplayer.game),this.multiplayer.game.init(this.multiplayer.tubes,this.playerObj,this.multiplayer.tubes.room.nextLevel),this.multiplayer.game.countdownStart(),this.multiplayer.addChild(this.multiplayer.tubes),this.multiplayer.game.initMP()}if("Game"==t.sender)switch(t.msg){case"SinglePlayerMenu":this.multiplayer.game.killS(),this.multiplayer.removeChild(this.multiplayer.game),this.multiplayer.game=null,this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.singlePlayerMenu=new ys,this.multiplayer.addChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu.init(this.playerObj);break;case"End":this.lastScore=this.multiplayer.game.timer.getTimeAsTotalSeconds(),(e=this.multiplayer.game.timer.timerCounter)<this.playerObj.bestTime&&(this.playerObj.bestTime=e),this.multiplayer.game.endFadeOut(),this.multiplayer.game.killS(),this.multiplayer.removeChild(this.multiplayer.game),this.multiplayer.game=null,this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.singlePlayerMenu=new ys,this.multiplayer.addChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu.init(this.playerObj),this.highscoreSub(),this.saveGame(),this.startLowMenu();break;case"EndPractice":this.multiplayer.game.endFadeOut(),this.multiplayer.game.killS(),this.multiplayer.removeChild(this.multiplayer.game),this.multiplayer.game=null,this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.singlePlayerMenu=new ys,this.multiplayer.addChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu.init(this.playerObj),this.startLowMenu();break;case"QuitMP":this.multiplayer.game.killS(),this.multiplayer.removeChild(this.multiplayer.game),this.multiplayer.game=null,this.multiplayer.tubes.disconnect(),this.multiplayer.removeChild(this.multiplayer.tubes),this.multiplayer.tubes=null,this.startMenus(),this.addChild(this.multiplayer),this.multiplayer.multiplayerMenu=new ps,this.multiplayer.addChild(this.multiplayer.multiplayerMenu),this.multiplayer.multiplayerMenu.init(this.playerObj)}}},{key:"killAch",value:function(t){t.stop(),this.removeChild(t),t=null}},{key:"killAgiLogin",value:function(){this.contains(this.agiLogin)&&this.removeChild(this.agiLogin)}},{key:"killAGISaver",value:function(){this.agi&&this.contains(this.agi)}},{key:"loadGame",value:function(){this.isLoggedIn?this.agi.retrieveUserData(this.yumyum):0==this.savedGame.data.hasSaved||null==this.savedGame.data.hasSaved?this.newGame():this.loadGamez()}},{key:"loadGamez",value:function(){var t;this.playerObj.userName=String(null!==(t=this.savedGame.data.saveObj.userName)&&void 0!==t?t:this.getRandomName()),this.playerObj.colour=Number(this.savedGame.data.saveObj.colour),this.playerObj.colour2=Number(this.savedGame.data.saveObj.colour2),this.playerObj.headType=Number(this.savedGame.data.saveObj.headType),this.playerObj.handType=Number(this.savedGame.data.saveObj.handType),this.playerObj.xp=Number(this.savedGame.data.saveObj.xp),this.playerObj.kudos=Number(this.savedGame.data.saveObj.kudos),this.playerObj.matches=Number(this.savedGame.data.saveObj.matches),this.playerObj.wins=Number(this.savedGame.data.saveObj.wins),this.playerObj.jumps=Number(this.savedGame.data.saveObj.jumps),this.playerObj.deaths=Number(this.savedGame.data.saveObj.deaths),this.playerObj.gameDeaths=Number(this.savedGame.data.saveObj.gameDeaths),this.playerObj.gameLevel=Number(this.savedGame.data.saveObj.gameLevel),this.playerObj.gameTime=Number(this.savedGame.data.saveObj.gameTime),null==this.savedGame.data.saveObj.gameName?this.playerObj.gameName="01234567":this.playerObj.gameName=String(this.savedGame.data.saveObj.gameName),this.playerObj.bestTime=Number(this.savedGame.data.saveObj.bestTime),this.playerObj.signs=this.savedGame.data.saveObj.signs,this.playerObj.achs=this.savedGame.data.saveObj.achs,this.playerObj.ping=0;for(var e=0;e<this.playerObj.achs.length;e++)this.achievements[e].got=this.playerObj.achs[e]}},{key:"loginPopCheck",value:function(t){t.success&&(this.playerObj.userName=t.username,this.fixUpAgiLogin())}},{key:"messageCenter",value:function(t){if("StartBox"==t.sender)switch(t.msg){case"go":this.multiplayer.game.countDownFinish()}"StartJitter"==t.sender&&(this.addChild(this.psb),this.addChild(this.rewind),this.psb.cameraY=0,this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.something)),"EndJitter"==t.sender&&(this.removeChild(this.rewind),this.removeChild(this.psb),this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.something))}},{key:"muteOut",value:function(){pr.handleMute()}},{key:"newGame",value:function(){this.playerObj.userName=this.getRandomName(),this.playerObj.colour=3394815,this.playerObj.colour2=16777215,this.playerObj.headType=1,this.playerObj.handType=1,this.playerObj.xp=0,this.playerObj.kudos=0,this.playerObj.matches=0,this.playerObj.wins=0,this.playerObj.jumps=0,this.playerObj.deaths=0,this.playerObj.gameDeaths=0,this.playerObj.gameLevel=0,this.playerObj.gameTime=0,this.playerObj.gameName="01234567",this.playerObj.ping=0,this.playerObj.bestTime=9999999999,this.playerObj.signs=new Array(!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1),this.playerObj.achs=new Array(!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1)}},{key:"preload",value:function(t){var e=this.stage.loaderInfo.bytesTotal,n=this.stage.loaderInfo.bytesLoaded,r=n/e*100;this.preloader.l.text="Loading... "+Math.floor(r)+"%",this.preloader.bar.bar.scaleX=r/100,n>=e?(this.preloader.bar.bar.scaleX=1,this.removeEventListener(rt.flash.events.Event.ENTER_FRAME,this.preload),this.preloader.playB.addEventListener(rt.flash.events.MouseEvent.CLICK,this.startIt),this.preloader.playB.visible=!0):this.preloader.playB.visible=!1}},{key:"saveGame",value:function(){var t=new Object;t.userName=String(this.playerObj.userName),t.colour=String(this.playerObj.colour),t.colour2=String(this.playerObj.colour2),t.headType=String(this.playerObj.headType),t.handType=String(this.playerObj.handType),t.xp=String(this.playerObj.xp),t.kudos=String(this.playerObj.kudos),t.matches=String(this.playerObj.matches),t.wins=String(this.playerObj.wins),t.jumps=String(this.playerObj.jumps),t.deaths=String(this.playerObj.deaths),t.gameDeaths=String(this.playerObj.gameDeaths),t.gameLevel=String(this.playerObj.gameLevel),t.gameName=String(this.playerObj.gameName),t.gameTime=String(this.playerObj.gameTime),t.bestTime=String(this.playerObj.bestTime),t.signs=this.playerObj.signs,t.achs=this.playerObj.achs,this.savedGame.data.hasSaved=!0,this.savedGame.data.saveObj=t,this.savedGame.flush(),this.isLoggedIn&&this.agi.submitUserDataObject(t)}},{key:"something",value:function(){this.psb._texture.copyPixels(this.clearBitmap,this.clearBitmap.rect,new rt.flash.geom.Point),this.psb._texture.draw(this.multiplayer,null,null,null),this.psb.render(),this.psb.cameraY=this.psb.cameraY-(490+wn.random(20))}},{key:"startAGILogin",value:function(){this.checkDomain()&&(this.addChild(this.agiLogin),this.fixUpAgiLogin())}},{key:"startIt",value:function(t){this.preloader.playB.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.startIt),this.preloader.muteButton.removeEventListener(rt.flash.events.MouseEvent.CLICK,this.muteOut),this.gotoAndStop("intro")}},{key:"startLowMenu",value:function(){pr.stopAllSounds(),pr.loopSound("MenuLow")}},{key:"startMainMenu",value:function(){this.getAGISaver(),this.startAGILogin()}},{key:"startMenus",value:function(){this.startUIBackground(),pr.stopAllSounds(),pr.loopSound("MainMenuSong")}},{key:"startUIBackground",value:function(){this.uiBackground&&this.removeChild(this.uiBackground),this.uiBackground=new Vs,this.addChild(this.uiBackground),this.addEventListener(rt.flash.events.Event.ENTER_FRAME,this.uiBG,!1,0,!0)}},{key:"uiBG",value:function(t){this.mainMenu&&this.uiBackground.ping()}},{key:"yumyum",value:function(t){var e=t.data;if(null!=e.colour){this.playerObj.userName=this.getAGIName(),this.playerObj.colour=Number(e.colour),this.playerObj.colour2=Number(e.colour2),this.playerObj.headType=Number(e.headType),this.playerObj.handType=Number(e.handType),this.playerObj.xp=Number(e.xp),this.playerObj.kudos=Number(e.kudos),this.playerObj.matches=Number(e.matches),this.playerObj.wins=Number(e.wins),this.playerObj.jumps=Number(e.jumps),this.playerObj.deaths=Number(e.deaths),this.playerObj.gameDeaths=Number(e.gameDeaths),null==e.gameName?this.playerObj.gameName="01234567":this.playerObj.gameName=String(e.gameName),this.playerObj.gameLevel=Number(e.gameLevel),this.playerObj.gameTime=Number(e.gameTime),this.playerObj.bestTime=Number(e.bestTime),this.playerObj.ping=0,this.playerObj.signs=e.signs,this.playerObj.achs=e.achs;for(var n=0;n<this.playerObj.achs.length;n++)this.achievements[n].got=this.playerObj.achs[n]}else this.saveGame()}},{key:"setUserLevel",value:function(t){this.userLevel=t}},{key:"startPracticeLevel",value:function(t){this.endMenus(),this.multiplayer.singlePlayerMenu.kill(),this.multiplayer.removeChild(this.multiplayer.singlePlayerMenu),this.multiplayer.singlePlayerMenu=null,this.multiplayer.game=new Ir,this.multiplayer.game.mode="PRACTICE",this.multiplayer.addChild(this.multiplayer.game),this.multiplayer.game.init(null,this.playerObj,t),this.multiplayer.game.initPractice()}},{key:"createLevel",value:function(t){return 999===t&&this.userLevel?new rs(this.userLevel):new(rt.flash.utils.getDefinitionByName("Level".concat(t)))}}]),i}(rt.flash.display.MovieClip);var lo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var co=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(5,t.frame6),t}return E()(i,[{key:"frame6",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var uo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var ho=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(4,t.frame5),t}return E()(i,[{key:"frame5",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var fo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(5,t.frame6),t}return E()(i,[{key:"frame6",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var po=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1,24,t.frame25),t}return E()(i,[{key:"frame1",value:function(){this.stop()}},{key:"frame25",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var yo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),t=r.call(this),T()(Ze()(t),"frameCounter",0),T()(Ze()(t),"ping",(function(){t.stage&&(t.frameCounter++,120==t.frameCounter?t.gotoAndPlay(20):150==t.frameCounter?t.gotoAndPlay(36):180==t.frameCounter&&(t.gotoAndPlay(55),t.removeEventListener(rt.flash.events.Event.ENTER_FRAME,t.ping)))})),t.addFrameScript(18,t.frame19,24,t.frame25,43,t.frame44,55,t.frame56,82,t.frame83),t.addEventListener(rt.flash.events.Event.ENTER_FRAME,t.ping),t}return E()(i,[{key:"frame19",value:function(){this.stop()}},{key:"frame25",value:function(){this.stop()}},{key:"frame44",value:function(){this.stop()}},{key:"frame56",value:function(){this.dispatchEvent(new ht(ht.SEND,"StartBox","go"))}},{key:"frame83",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var vo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(10,t.frame11),t}return E()(i,[{key:"frame11",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var mo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.stop()}}]),i}(rt.flash.display.MovieClip);var go=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t;return R()(this,i),(t=r.call(this)).addFrameScript(0,t.frame1),t}return E()(i,[{key:"frame1",value:function(){this.beacon.gotoAndPlay(Math.floor(10*Math.random()))}}]),i}(rt.flash.display.MovieClip);var bo=function(t){st()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ct()(e);if(n){var i=ct()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return at()(this,t)});function i(){var t,e;return R()(this,i),t=r.call(this),T()(Ze()(t),"elem",((e=document.createElement("input")).type="color",e.style.setProperty("padding","0","important"),e.style.setProperty("margin","0","important"),e.style.setProperty("border","none","important"),e.style.setProperty("outline","none","important"),e.style.setProperty("position","absolute"),e)),T()(Ze()(t),"renderX",null),T()(Ze()(t),"renderY",null),T()(Ze()(t),"renderWidth",null),T()(Ze()(t),"renderHeight",null),T()(Ze()(t),"value",16777215),t.__node.setRenderObjects([],Float32Array.of(0,0,440,440)),t.elem.oninput=function(){var e=parseInt(t.elem.value.slice(1),16);t.value=e,t.dispatchEvent(new Ln(Ln.CHANGE,e))},t}return E()(i,[{key:"selectedColor",get:function(){return this.value},set:function(t){this.value=t,this.elem.value="#"+t.toString(16).padStart(6,"0")}}]),E()(i,[{key:"layout",value:function(){var t=this.getBounds(this.stage),e=this.stage.__canvas,n=e.element.getClientRects()[0],r=t.width*n.width/e.width,i=t.height*n.height/e.height,s=t.x*n.width/e.width,o=t.y*n.height/e.height;this.renderX!==s&&(this.elem.style.setProperty("left","".concat(s,"px")),this.renderX=s),this.renderY!==o&&(this.elem.style.setProperty("top","".concat(o,"px")),this.renderY=o),this.renderWidth!==r&&(this.elem.style.setProperty("width","".concat(r,"px")),this.renderWidth=r),this.renderHeight!==i&&(this.elem.style.setProperty("height","".concat(i,"px")),this.renderHeight=i)}},{key:"__onRender",value:function(){$e()(ct()(i.prototype),"__onRender",this).call(this),this.layout()}},{key:"__onAddedToStage",value:function(t){$e()(ct()(i.prototype),"__onAddedToStage",this).call(this,t),this.layout(),t.__canvas.container.appendChild(this.elem)}},{key:"__onRemovedFromStage",value:function(t){this.elem.remove(),this.renderX=null,this.renderX=null,$e()(ct()(i.prototype),"__onRemovedFromStage",this).call(this,t)}}]),i}(rt.flash.display.DisplayObject),_o=Ve;rt.__internal.ClassRegistry.instance.addClassRoot(v);var wo=function(){function t(){var e=this;R()(this,t),T()(this,"loadPromise",null),T()(this,"value",null),T()(this,"loadProgress",0),T()(this,"loadError",""),T()(this,"reportProgress",(function(t){e.loadProgress=t})),T()(this,"onLoadCompleted",(function(t){e.loadPromise=null,e.loadProgress=1,e.value=t})),T()(this,"onLoadError",(function(t){e.loadPromise=null,e.loadError=String(t)})),(0,L.ky)(this)}return E()(t,[{key:"isLoading",get:function(){return!!this.loadPromise}}]),E()(t,[{key:"load",value:function(){this.isLoading||this.value||(this.loadProgress=0,this.loadError="",this.loadPromise=rt.__internal.loadManifest(_o,this.reportProgress),this.loadPromise.then(this.onLoadCompleted,this.onLoadError))}}]),t}();function ko(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ro=function(){function t(e){R()(this,t),T()(this,"nextInstanceId",1),T()(this,"instances",[]),this.root=e,(0,L.ky)(this)}return E()(t,[{key:"shouldSuspendGame",get:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return xo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(this.instances);try{for(e.s();!(t=e.n()).done;)switch(t.value.type){case"room-selection":case"select-level":continue;default:return!0}}catch(t){e.e(t)}finally{e.f()}return!1}}]),E()(t,[{key:"present",value:function(t){var e=this.nextInstanceId++;return this.instances.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(n),!0).forEach((function(e){T()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e},t)),e}},{key:"dismiss",value:function(t){var e=this.instances.findIndex((function(e){return e.id===t}));e<0||this.instances.splice(e,1)}}]),t}(),So=function(){function t(e){var n=this;R()(this,t),T()(this,"_mode",null),T()(this,"replayIndex",0),T()(this,"doReplay",!1),T()(this,"recording",[]),T()(this,"replayRecords",[]),T()(this,"exitFrame",(0,L.aD)((function(){switch(n._mode){case"recording":var t=0;(rr.isDown(rt.flash.ui.Keyboard.SPACE)||rr.isDown(rt.flash.ui.Keyboard.SHIFT))&&(t|=1),rr.isDown(rr.LEFT)&&(t|=2),rr.isDown(rr.RIGHT)&&(t|=4),rr.isDown(rr.UP)&&(t|=8),rr.isDown(rr.DOWN)&&(t|=16),n.recording.push(t);break;case"replaying":if(!n.doReplay)return;if(n.replayIndex>=n.recording.length)return rr.keysDown={},void(n._mode=null);var e=n.recording[n.replayIndex++];rr.keysDown={},1&e&&(rr.keysDown[rt.flash.ui.Keyboard.SPACE]=!0),2&e&&(rr.keysDown[rt.flash.ui.Keyboard.LEFT]=!0),4&e&&(rr.keysDown[rt.flash.ui.Keyboard.RIGHT]=!0),8&e&&(rr.keysDown[rt.flash.ui.Keyboard.UP]=!0),16&e&&(rr.keysDown[rt.flash.ui.Keyboard.DOWN]=!0);var r=n.root.game.instance;n.replayRecords.push({playerX:r.multiplayer.game.player.x,playerY:r.multiplayer.game.player.y,otherX:0,otherY:0,a:0,b:0})}}))),this.root=e,(0,L.ky)(this),(0,L.EH)((function(){var t=n.root.game.stage;if(t)return t.__withContext((function(){return t.addEventListener(rt.flash.events.Event.ENTER_FRAME,n.exitFrame)}))(),t.__withContext((function(){return t.removeEventListener(rt.flash.events.Event.ENTER_FRAME,n.exitFrame)}))}))}return E()(t,[{key:"mode",get:function(){return this._mode}}]),E()(t,[{key:"skipToSPMenu",value:function(){var t=this.root.game.instance,e=this.root.game.stage;t&&e&&e.__withContext((function(){t.gotoAndStop(3),t.removeChild(t.agIntro),t.dispatchEvent(new ht(ht.GOTO,"endIntro"," ")),t.dispatchEvent(new ht(ht.GOTO,"MainMenu","SinglePlayer"))}))()}},{key:"startSPGame",value:function(t){var e=this.root.game.instance,n=this.root.game.stage;e&&n&&(n.__withContext((function(){e.multiplayer.game&&e.dispatchEvent(new ht(ht.GOTO,"Game","SinglePlayerMenu")),e.playerObj.gameLevel=t,e.playerObj.gameTime=0,e.dispatchEvent(new ht(ht.GOTO,"SinglePlayerMenu","StartGame"))}))(),this.doReplay=!0)}},{key:"startRecord",value:function(){this.recording=[],this._mode="recording"}},{key:"stopRecord",value:function(){this._mode=null}},{key:"startReplay",value:function(){this.replayIndex=0,this.replayRecords=[],this._mode="replaying",this.doReplay=!1}},{key:"stopReplay",value:function(){rr.keysDown={},this._mode=null}}]),t}(),Eo=new wo,Co=function(){function t(){R()(this,t),T()(this,"library",Eo),T()(this,"game",new Pe(this)),T()(this,"modal",new Ro(this)),T()(this,"recorder",new So(this)),T()(this,"controller",null),(0,L.ky)(this)}return E()(t,[{key:"dispose",value:function(){this.game.dispose()}}]),t}(),To=n(4403),Lo=n.n(To),Mo=n(4923),Po=t=>t instanceof HTMLElement;const Ao="blur",Do="change",Oo="input",No="onChange",Fo="onSubmit",Bo="undefined",Io="pattern",jo="required";var Uo=t=>null==t;const Vo=t=>"object"==typeof t;var Go=t=>!Uo(t)&&!Array.isArray(t)&&Vo(t)&&!(t instanceof Date),Ho=t=>!Array.isArray(t)&&(/^\w*$/.test(t)||!/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/.test(t)),Ko=t=>t.filter(Boolean),zo=t=>Ko(t.replace(/["|']/g,"").replace(/\[/g,".").replace(/\]/g,"").split("."));function qo(t,e,n){let r=-1;const i=Ho(e)?[e]:zo(e),s=i.length,o=s-1;for(;++r<s;){const e=i[r];let s=n;if(r!==o){const n=t[e];s=Go(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}t[e]=s,t=t[e]}return t}var Wo=(t,e={})=>{for(const n in t)Ho(n)?e[n]=t[n]:qo(e,n,t[n]);return e},Xo=t=>void 0===t,Yo=(t,e,n)=>{const r=Ko(e.split(/[,[\].]+?/)).reduce(((t,e)=>Uo(t)?t:t[e]),t);return Xo(r)||r===t?Xo(t[e])?n:t[e]:r},Jo=(t,e)=>{Po(t)&&t.removeEventListener&&(t.removeEventListener(Oo,e),t.removeEventListener(Do,e),t.removeEventListener(Ao,e))};const Zo={isValid:!1,value:""};var Qo=t=>Array.isArray(t)?t.reduce(((t,e)=>e&&e.ref.checked?{isValid:!0,value:e.ref.value}:t),Zo):Zo,$o=t=>"radio"===t.type,ta=t=>"file"===t.type,ea=t=>"checkbox"===t.type,na=t=>"select-multiple"===t.type;const ra={value:!1,isValid:!1},ia={value:!0,isValid:!0};var sa=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter((t=>t&&t.ref.checked)).map((({ref:{value:t}})=>t));return{value:e,isValid:!!e.length}}const{checked:e,value:n,attributes:r}=t[0].ref;return e?r&&!Xo(r.value)?Xo(n)||""===n?ia:{value:n,isValid:!0}:ia:ra}return ra};function oa(t,e,n,r){const i=t.current[e];if(i){const{ref:{value:t,disabled:e},ref:n}=i;if(e&&r)return;return ta(n)?n.files:$o(n)?Qo(i.options).value:na(n)?(t=>[...t].filter((({selected:t})=>t)).map((({value:t})=>t)))(n.options):ea(n)?sa(i.options).value:t}if(n)return Yo(n.current,e)}function aa(t){return!t||t instanceof HTMLElement&&t.nodeType!==Node.DOCUMENT_NODE&&aa(t.parentNode)}var la=t=>Go(t)&&!Object.keys(t).length,ca=t=>"boolean"==typeof t;function ua(t,e){const n=Ho(e)?[e]:zo(e),r=1==n.length?t:function(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Xo(t)?r++:t[e[r++]];return t}(t,n),i=n[n.length-1];let s=void 0;r&&delete r[i];for(let e=0;e<n.slice(0,-1).length;e++){let r=-1,i=void 0;const o=n.slice(0,-(e+1)),a=o.length-1;for(e>0&&(s=t);++r<o.length;){const e=o[r];i=i?i[e]:t[e],a===r&&(Go(i)&&la(i)||Array.isArray(i)&&!i.filter((t=>Go(t)&&!la(t)||ca(t))).length)&&(s?delete s[e]:delete t[e]),s=i}}return t}const ha=(t,e)=>t&&t.ref===e;function fa(t,e,n,r,i){let s=-1;for(;++s<t.length;){for(const r in t[s])Array.isArray(t[s][r])?(!n[s]&&(n[s]={}),n[s][r]=[],fa(t[s][r],Yo(e[s]||{},r,[]),n[s][r],n[s],r)):Yo(e[s]||{},r)===t[s][r]?qo(n[s]||{},r):n[s]=Object.assign(Object.assign({},n[s]),{[r]:!0});!n.length&&r&&delete r[i]}return n.length?n:void 0}var da=t=>"string"==typeof t,pa=t=>Uo(t)||!Vo(t);function ya(t,e){if(pa(t)||pa(e))return e;for(const n in e){const r=t[n],i=e[n];try{t[n]=Go(r)&&Go(i)||Array.isArray(r)&&Array.isArray(i)?ya(r,i):i}catch(t){}}return t}var va=(t,e,n,r)=>{const i={};for(const e in t.current)(Xo(r)||(da(r)?e.startsWith(r):Array.isArray(r)&&r.find((t=>e.startsWith(t)))))&&(i[e]=oa(t,e,void 0,n));return ya(Wo(Object.assign({},(e||{}).current||{})),Wo(i))};function ma(t=[],e=[],n){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const i of r)if(!n||!["ref","context"].includes(i)){const r=t[i],s=e[i];if((Go(r)||Array.isArray(r))&&(Go(s)||Array.isArray(s))?!ma(r,s,n):r!==s)return!1}return!0}var ga=t=>t instanceof RegExp,ba=t=>{return Go(e=t)&&!ga(e)?t:{value:t,message:""};var e},_a=t=>"function"==typeof t,wa=t=>da(t)||Go(t)&&(0,b.isValidElement)(t);function ka(t,e,n="validate"){if(wa(t)||ca(t)&&!t)return{type:n,message:wa(t)?t:"",ref:e}}var xa=(t,e,n,r,i)=>{if(e){const e=n[t];return Object.assign(Object.assign({},e),{types:Object.assign(Object.assign({},e&&e.types?e.types:{}),{[r]:i||!0})})}return{}},Ra=async(t,e,{ref:n,ref:{type:r,value:i},options:s,required:o,maxLength:a,minLength:l,min:c,max:u,pattern:h,validate:f},d)=>{const p=t.current,y=n.name,v={},m=$o(n),g=ea(n),b=m||g,_=""===i,w=xa.bind(null,y,e,v),k=(t,e,r,i="maxLength",s="minLength")=>{const o=t?e:r;v[y]=Object.assign({type:t?i:s,message:o,ref:n},w(t?i:s,o))};if(o&&(!m&&!g&&(_||Uo(i))||ca(i)&&!i||g&&!sa(s).isValid||m&&!Qo(s).isValid)){const{value:t,message:r}=wa(o)?{value:!!o,message:o}:ba(o);if(t&&(v[y]=Object.assign({type:jo,message:r,ref:b?((p[y].options||[])[0]||{}).ref:n},w(jo,r)),!e))return v}if(!Uo(c)||!Uo(u)){let t,s;const{value:o,message:a}=ba(u),{value:l,message:h}=ba(c);if("number"===r||!r&&!isNaN(i)){const e=n.valueAsNumber||parseFloat(i);Uo(o)||(t=e>o),Uo(l)||(s=e<l)}else{const e=n.valueAsDate||new Date(i);da(o)&&(t=e>new Date(o)),da(l)&&(s=e<new Date(l))}if((t||s)&&(k(!!t,a,h,"max","min"),!e))return v}if(da(i)&&!_&&(a||l)){const{value:t,message:n}=ba(a),{value:r,message:s}=ba(l),o=i.toString().length,c=!Uo(t)&&o>t,u=!Uo(r)&&o<r;if((c||u)&&(k(!!c,n,s),!e))return v}if(h&&!_){const{value:t,message:r}=ba(h);if(ga(t)&&!t.test(i)&&(v[y]=Object.assign({type:Io,message:r,ref:n},w(Io,r)),!e))return v}if(f){const r=oa(t,y,d),i=b&&s?s[0].ref:n;if(_a(f)){const t=ka(await f(r),i);if(t&&(v[y]=Object.assign(Object.assign({},t),w("validate",t.message)),!e))return v}else if(Go(f)){let t={};for(const[n,s]of Object.entries(f)){if(!la(t)&&!e)break;const o=ka(await s(r),i,n);o&&(t=Object.assign(Object.assign({},o),w(n,o.message)),e&&(v[y]=t))}if(!la(t)&&(v[y]=Object.assign({ref:i},t),!e))return v}}return v};const Sa=(t,e)=>Object.entries(e).map((([n,r])=>((e,n,r)=>{const i=r?`${t}.${e}`:`${t}[${e}]`;return pa(n)?i:Sa(i,n)})(n,r,Go(e)))).flat(1/0);var Ea=(t,e,n,r,i)=>{let s;return n.add(e),la(t)?s=void 0:(s=Yo(t,e),(Go(s)||Array.isArray(s))&&Sa(e,s).forEach((t=>n.add(t)))),Xo(s)?i?r:Yo(r,e):s},Ca=t=>t.substring(0,t.indexOf("["));var Ta=(t,e)=>[...t].some((t=>((t,e)=>RegExp(`^${e}[\\d+]`.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(t))(e,t)));function La(t,e){let n;if(pa(t)||e&&t instanceof File)return t;if(t instanceof Date)return n=new Date(t.getTime()),n;if(t instanceof Set){n=new Set;for(const e of t)n.add(e);return n}if(t instanceof Map){n=new Map;for(const r of t.keys())n.set(r,La(t.get(r),e));return n}n=Array.isArray(t)?[]:{};for(const r in t)n[r]=La(t[r],e);return n}var Ma=t=>({isOnSubmit:!t||t===Fo,isOnBlur:"onBlur"===t,isOnChange:t===No,isOnAll:"all"===t,isOnTouch:"onTouched"===t}),Pa=t=>$o(t)||ea(t);const Aa=typeof window===Bo,Da=typeof document!==Bo&&!Aa&&!Xo(window.HTMLElement),Oa=Da?"Proxy"in window:typeof Proxy!==Bo;function Na({mode:t="onSubmit",reValidateMode:e="onChange",resolver:n,context:r,defaultValues:i={},shouldFocusError:s=!0,shouldUnregister:o=!0,criteriaMode:a}={}){const l=(0,b.useRef)({}),c=(0,b.useRef)({}),u=(0,b.useRef)(new Set),h=(0,b.useRef)({}),f=(0,b.useRef)({}),d=(0,b.useRef)({}),p=(0,b.useRef)({}),y=(0,b.useRef)(i),v=(0,b.useRef)({}),m=(0,b.useRef)(!1),g=(0,b.useRef)(!1),_=(0,b.useRef)(),w=(0,b.useRef)(o?{}:La(i,Da)),k=(0,b.useRef)({}),x=(0,b.useRef)(r),R=(0,b.useRef)(n),S=(0,b.useRef)(new Set),E=(0,b.useRef)(Ma(t)),{isOnSubmit:C,isOnTouch:T}=E.current,L="all"===a,[M,P]=(0,b.useState)({isDirty:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touched:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!C,errors:{}}),A=(0,b.useRef)({isDirty:!Oa,dirtyFields:!Oa,touched:!Oa||T,isSubmitting:!Oa,isValid:!Oa}),D=(0,b.useRef)(M),O=(0,b.useRef)(),{isOnBlur:N,isOnChange:F}=(0,b.useRef)(Ma(e)).current;x.current=r,R.current=n,D.current=M;const B=(0,b.useCallback)(((t={})=>!m.current&&P(Object.assign(Object.assign({},D.current),t))),[]),I=(0,b.useCallback)(((t,e,n=!1,r={},i)=>{let s=n||function({errors:t,name:e,error:n,validFields:r,fieldsWithValidation:i}){const s=Xo(n),o=Yo(t,e);return s&&!!o||!s&&!ma(o,n,!0)||s&&Yo(i,e)&&!Yo(r,e)}({errors:D.current.errors,error:e,name:t,validFields:p.current,fieldsWithValidation:d.current});const o=Yo(D.current.errors,t);e?(ua(p.current,t),s=s||!o||!ma(o,e,!0),qo(D.current.errors,t,e)):((Yo(d.current,t)||R.current)&&(qo(p.current,t,!0),s=s||o),ua(D.current.errors,t)),(s&&!Uo(n)||!la(r))&&B(Object.assign(Object.assign(Object.assign({},r),{errors:D.current.errors}),R.current?{isValid:!!i}:{}))}),[]),j=(0,b.useCallback)(((t,e)=>{const{ref:n,options:r}=l.current[t],i=Da&&Po(n)&&Uo(e)?"":e;$o(n)&&r?r.forEach((({ref:t})=>t.checked=t.value===i)):ta(n)&&!da(i)?n.files=i:na(n)?[...n.options].forEach((t=>t.selected=i.includes(t.value))):ea(n)&&r?r.length>1?r.forEach((({ref:t})=>t.checked=Array.isArray(i)?!!i.find((e=>e===t.value)):i===t.value)):r[0].ref.checked=!!i:n.value=i}),[]),U=()=>!ma(J(),la(y.current)?v.current:y.current)||!la(D.current.dirtyFields),V=(0,b.useCallback)(((t,e=!0)=>{if(A.current.isDirty||A.current.dirtyFields){const n=Yo(v.current,t)!==oa(l,t,w),r=Yo(D.current.dirtyFields,t),i=D.current.isDirty;n?qo(D.current.dirtyFields,t,!0):ua(D.current.dirtyFields,t);const s={isDirty:U(),dirtyFields:D.current.dirtyFields},o=A.current.isDirty&&i!==s.isDirty||A.current.dirtyFields&&r!==Yo(D.current.dirtyFields,t);return o&&e&&(D.current=Object.assign(Object.assign({},D.current),s),B(Object.assign({},s))),o?s:{}}return{}}),[]),G=(0,b.useCallback)((async(t,e)=>{if(l.current[t]){const n=(await Ra(l,L,l.current[t],w))[t];return I(t,n,e),Xo(n)}return!1}),[I,L]),H=(0,b.useCallback)((async t=>{const{errors:e}=await R.current(J(),x.current,L),n=D.current.isValid;if(Array.isArray(t)){const n=t.map((t=>{const n=Yo(e,t);return n?qo(D.current.errors,t,n):ua(D.current.errors,t),!n})).every(Boolean);return B({isValid:la(e),errors:D.current.errors}),n}{const r=Yo(e,t);return I(t,r,n!==la(e),{},la(e)),!r}}),[I,L]),K=(0,b.useCallback)((async t=>{const e=t||Object.keys(l.current);if(R.current)return H(e);if(Array.isArray(e)){const t=await Promise.all(e.map((async t=>await G(t,null))));return B(),t.every(Boolean)}return await G(e,A.current.isValid)}),[H,G]),z=(0,b.useCallback)(((t,e,{shouldDirty:n,shouldValidate:r})=>{const i={};qo(i,t,e);for(const s of Sa(t,e))l.current[s]&&(j(s,Yo(i,s)),n&&V(s),r&&K(s))}),[K,j,V]),q=(0,b.useCallback)(((t,e,n={})=>{l.current[t]?(j(t,e),n.shouldDirty&&V(t)):pa(e)||(z(t,e,n),S.current.has(t)&&(c.current[t]=e,k.current[t]({[t]:e}),(A.current.isDirty||A.current.dirtyFields)&&n.shouldDirty&&(qo(D.current.dirtyFields,t,fa(e,Yo(y.current,t,[]),Yo(D.current.dirtyFields,t,[]))),B({isDirty:!ma(Object.assign(Object.assign({},J()),{[t]:e}),y.current),dirtyFields:D.current.dirtyFields})))),!o&&qo(w.current,t,e)}),[V,j,z]),W=t=>g.current||u.current.has(t)||u.current.has((t.match(/\w+/)||[])[0]),X=(t,e=!0)=>{if(!la(h.current))for(const n in h.current)t&&h.current[n].size&&!h.current[n].has(t)&&!h.current[n].has(Ca(t))||(f.current[n](),e=!1);return e};function Y(t){if(!o){let e=La(t,Da);for(const t of S.current)Ho(t)&&!e[t]&&(e=Object.assign(Object.assign({},e),{[t]:[]}));return e}return t}function J(t){if(da(t))return oa(l,t,w);if(Array.isArray(t)){const e={};for(const n of t)qo(e,n,oa(l,n,w));return e}return Y(va(l,w))}_.current=_.current?_.current:async({type:t,target:e})=>{const n=e.name,r=l.current[n];let i,s;if(r){const e=t===Ao,o=(({isOnBlur:t,isOnChange:e,isOnTouch:n,isTouched:r,isReValidateOnBlur:i,isReValidateOnChange:s,isBlurEvent:o,isSubmitted:a,isOnAll:l})=>!l&&(!a&&n?!(r||o):(a?i:t)?!o:!(a?s:e)||o))(Object.assign({isBlurEvent:e,isReValidateOnChange:F,isReValidateOnBlur:N,isTouched:!!Yo(D.current.touched,n),isSubmitted:D.current.isSubmitted},E.current));let a=V(n,!1),c=!la(a)||W(n);if(e&&!Yo(D.current.touched,n)&&A.current.touched&&(qo(D.current.touched,n,!0),a=Object.assign(Object.assign({},a),{touched:D.current.touched})),o)return X(n),(!la(a)||c&&la(a))&&B(a);if(R.current){const{errors:t}=await R.current(J(),x.current,L),e=D.current.isValid;i=Yo(t,n),s=la(t),e!==s&&(c=!0)}else i=(await Ra(l,L,r,w))[n];X(n),I(n,i,c,a,s)}};const Z=(0,b.useCallback)((async(t={})=>{const{errors:e}=await R.current(Object.assign(Object.assign(Object.assign({},y.current),J()),t),x.current,L),n=la(e);D.current.isValid!==n&&B({isValid:n})}),[L]),Q=(0,b.useCallback)(((t,e)=>function(t,e,n,r,i,s){const{ref:o,ref:{name:a,type:l}}=n,c=t.current[a];if(!i){const e=oa(t,a,r);Xo(e)||qo(r.current,a,e)}if(l)if(($o(o)||ea(o))&&c){const{options:n}=c;Array.isArray(n)&&n.length?(Ko(n).forEach(((t,r)=>{const{ref:i}=t;(i&&aa(i)&&ha(t,i)||s)&&(Jo(i,e),ua(n,`[${r}]`))})),n&&!Ko(n).length&&delete t.current[a]):delete t.current[a]}else(aa(o)&&ha(c,o)||s)&&(Jo(o,e),delete t.current[a]);else delete t.current[a]}(l,_.current,t,w,o,e)),[o]),$=t=>{if(g.current)B();else if(u){let e=!0;for(const n of u.current)if(n.startsWith(t)){B(),e=!1;break}e&&X(t)}},tt=(0,b.useCallback)(((t,e)=>{t&&(Q(t,e),o&&!Ko(t.options||[]).length&&(ua(v.current,t.ref.name),ua(p.current,t.ref.name),ua(d.current,t.ref.name),ua(D.current.errors,t.ref.name),qo(D.current.dirtyFields,t.ref.name,!0),B({errors:D.current.errors,isDirty:U(),dirtyFields:D.current.dirtyFields}),A.current.isValid&&R.current&&Z(),$(t.ref.name)))}),[Z,Q]),et=(0,b.useCallback)(((t,e,n)=>{const r=n?h.current[n]:u.current,i=Xo(e)?y.current:e,s=va(l,w,!1,t);return da(t)?Ea(s,t,r,Xo(e)?Yo(i,t):e,!0):Array.isArray(t)?t.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:Ea(s,e,r,i)})),{}):(g.current=Xo(n),Wo(!la(s)&&s||i))}),[]);function nt(t,e={}){const{name:n,type:r,value:i}=t,s=Object.assign({ref:t},e),o=l.current,a=Pa(t),c=Ta(S.current,n),u=e=>Da&&(!Po(t)||e===t);let h,f=o[n],m=!0;if(f&&(a?Array.isArray(f.options)&&Ko(f.options).find((t=>i===t.ref.value&&u(t.ref))):u(f.ref)))return void(o[n]=Object.assign(Object.assign({},f),e));f=r?a?Object.assign({options:[...Ko(f&&f.options||[]),{ref:t}],ref:{type:r,name:n}},e):Object.assign({},s):s,o[n]=f;const g=Xo(Yo(w.current,n));if(la(y.current)&&g||(h=Yo(g?y.current:w.current,n),m=Xo(h),m||c||j(n,h)),la(e)||(qo(d.current,n,!0),!C&&A.current.isValid&&Ra(l,L,f,w).then((t=>{const e=D.current.isValid;la(t)?qo(p.current,n,!0):ua(p.current,n),e!==la(t)&&B()}))),!(v.current[n]||c&&m)){const t=oa(l,n,w);qo(v.current,n,m?Go(t)?Object.assign({},t):t:h),!c&&ua(D.current.dirtyFields,n)}r&&function({ref:t},e,n){Po(t)&&n&&(t.addEventListener(e?Do:Oo,n),t.addEventListener(Ao,n))}(a&&f.options?f.options[f.options.length-1]:f,a||"select-one"===t.type,_.current)}const rt=(0,b.useCallback)(((t,e)=>async n=>{n&&n.preventDefault&&(n.preventDefault(),n.persist());let r={},i=Y(va(l,w,!0));A.current.isSubmitting&&B({isSubmitting:!0});try{if(R.current){const{errors:t,values:e}=await R.current(i,x.current,L);D.current.errors=r=t,i=e}else for(const t of Object.values(l.current))if(t){const{ref:{name:e}}=t,n=await Ra(l,L,t,w);n[e]?(qo(r,e,n[e]),ua(p.current,e)):Yo(d.current,e)&&(ua(D.current.errors,e),qo(p.current,e,!0))}la(r)&&Object.keys(D.current.errors).every((t=>t in l.current))?(B({errors:{},isSubmitting:!0}),await t(i,n)):(D.current.errors=Object.assign(Object.assign({},D.current.errors),r),e&&await e(D.current.errors,n),s&&((t,e)=>{for(const n in t)if(Yo(e,n)){const e=t[n];if(e){if(e.ref.focus){e.ref.focus();break}if(e.options){e.options[0].ref.focus();break}}}})(l.current,D.current.errors))}finally{B({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:la(D.current.errors),errors:D.current.errors,submitCount:D.current.submitCount+1})}}),[s,L]);(0,b.useEffect)((()=>(m.current=!1,n&&A.current.isValid&&Z(),O.current=O.current||!Da?O.current:function(t,e){const n=new MutationObserver((()=>{for(const n of Object.values(t.current))if(n&&n.options)for(const t of n.options)t&&t.ref&&aa(t.ref)&&e(n);else n&&aa(n.ref)&&e(n)}));return n.observe(window.document,{childList:!0,subtree:!0}),n}(l,tt),()=>{m.current=!0,O.current&&O.current.disconnect(),w.current={},Object.values(l.current).forEach((t=>tt(t,!0)))})),[tt]),!n&&A.current.isValid&&(M.isValid=ma(p.current,d.current)&&la(D.current.errors));const it={trigger:K,setValue:(0,b.useCallback)((function(t,e,n){q(t,e,n),W(t)&&B(),X(t),(n||{}).shouldValidate&&K(t)}),[q,K]),getValues:(0,b.useCallback)(J,[]),register:(0,b.useCallback)((function(t,e){if(!Aa)if(da(t))nt({name:t},e);else{if(!Go(t)||!("name"in t))return e=>e&&nt(e,t);nt(t,e)}}),[y.current]),unregister:(0,b.useCallback)((function(t){for(const e of Array.isArray(t)?t:[t])tt(l.current[e],!0)}),[])},st=Object.assign({updateWatchedValue:$,shouldUnregister:o,removeFieldEventListener:Q,watchInternal:et,mode:E.current,reValidateMode:{isReValidateOnBlur:N,isReValidateOnChange:F},fieldsRef:l,resetFieldArrayFunctionRef:k,useWatchFieldsRef:h,useWatchRenderFunctionsRef:f,fieldArrayDefaultValuesRef:c,validFieldsRef:p,fieldsWithValidationRef:d,fieldArrayNamesRef:S,readFormStateRef:A,formStateRef:D,defaultValuesRef:y,shallowFieldsStateRef:w,updateFormState:B,validateResolver:n?Z:void 0},it);return Object.assign({watch:function(t,e){return et(t,e)},control:st,formState:Oa?new Proxy(M,{get:(t,e)=>{if(e in t)return A.current[e]=!0,t[e]}}):M,handleSubmit:rt,reset:(0,b.useCallback)(((t,e={})=>{if(Da)for(const t of Object.values(l.current))if(t){const{ref:e,options:n}=t,r=Pa(e)&&Array.isArray(n)?n[0].ref:e;if(Po(r))try{r.closest("form").reset();break}catch(t){}}l.current={},y.current=La(t||y.current,Da),t&&X(""),Object.values(k.current).forEach((t=>_a(t)&&t())),w.current=o?{}:La(t,Da)||{},(({errors:t,isDirty:e,isSubmitted:n,touched:r,isValid:i,submitCount:s,dirtyFields:o})=>{i||(p.current={},d.current={}),v.current={},c.current={},u.current=new Set,g.current=!1,B({submitCount:s?D.current.submitCount:0,isDirty:!!e&&D.current.isDirty,isSubmitted:!!n&&D.current.isSubmitted,isValid:!!i&&D.current.isValid,dirtyFields:o?D.current.dirtyFields:{},touched:r?D.current.touched:{},errors:t?D.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})})(e)}),[]),clearErrors:(0,b.useCallback)((function(t){t&&(Array.isArray(t)?t:[t]).forEach((t=>l.current[t]?Ho(t)?delete D.current.errors[t]:qo(D.current.errors,t,void 0):ua(D.current.errors,t))),B({errors:t?D.current.errors:{}})}),[]),setError:(0,b.useCallback)((function(t,e){const n=(l.current[t]||{}).ref;qo(D.current.errors,t,Object.assign(Object.assign({},e),{ref:n})),B({isValid:!1,errors:D.current.errors}),e.shouldFocus&&n&&n.focus&&n.focus()}),[]),errors:M.errors},it)}(0,b.createContext)(null).displayName="RHFContext";const Fa="_2tCZ_qVmzLySf8HiVrpxhr";var Ba=(0,Mo.Pi)((function(t){var e=t.message,n=e.sender,r=e.senderColor,i=e.text,s=e.textColor,o=b.useMemo((function(){return{color:"#"+r.toString(16).padStart(6,"0")}}),[r]),a=b.useMemo((function(){return{color:"#"+s.toString(16).padStart(6,"0")}}),[s]);return b.createElement("li",{className:"_3fD3uYnnJKQT1x6GQfmRna"},"@SYSTEM"===n?null:b.createElement(b.Fragment,null,b.createElement("span",{style:o},n),": "),b.createElement("span",{style:a},i))})),Ia=(0,Mo.Pi)((function(t){var e=t.multiplayer,n=(0,b.useRef)(!0),r=(0,b.useRef)(null),i=(0,b.useCallback)((function(t){var e=t.currentTarget;n.current=e.scrollHeight-e.scrollTop<=e.clientHeight+1,console.log(n.current)}),[]),s=e.messages.length;return(0,b.useEffect)((function(){s>0?r.current&&n.current&&(r.current.scrollTop=r.current.scrollHeight):n.current=!0}),[s]),b.createElement("ul",{className:"_1i1aUe7UiG_oFAic8RaqxZ",onScroll:i,ref:r},e.messages.map((function(t,e){return b.createElement(Ba,{key:e,message:t})})))})),ja=(0,Mo.Pi)((function(t){var e=t.className,n=t.multiplayer,r=Na(),i=r.register,s=r.handleSubmit,o=r.reset,a=(0,b.useCallback)((function(t){n.sendMessage(t.message),o()}),[n,o]),l=(0,b.useCallback)((function(){return(0,L.z)((function(){return n.messages.length=0}))}),[n]);return b.createElement("div",{className:Lo()(e,"_3nI1squnpvRoUNcOMjUV7z")},b.createElement(Ia,{multiplayer:n}),b.createElement("form",{className:"WnKjKQ0OVh6K2AT-zdt0S",noValidate:!0,onSubmit:s(a)},b.createElement("input",{name:"message",className:"nKGzkBtFsMEPLS643Qno0",autoComplete:"off",ref:i({required:!0})}),b.createElement("button",{className:Fa,type:"submit",title:"send"},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},b.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),b.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}))),b.createElement("button",{className:Fa,type:"button",title:"clear",onClick:l},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},b.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),b.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})))))})),Ua=(0,Mo.Pi)((function(t){var e=k().game;return e.multiplayer?b.createElement(ja,{className:t.className,multiplayer:e.multiplayer}):null}));var Va=(0,Mo.Pi)((function(t){var e=k().game;return(0,b.useEffect)((function(){e.start()}),[e]),b.createElement("div",{className:Lo()("_29p0fzQbWnS5kYeP40IRhK",t.className),ref:e.setContainer})}));function Ga(){return(Ga=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ha(t,e){if(null==t)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}const Ka=!("undefined"==typeof window||!window.document||!window.document.createElement);var za=!1,qa=!1;try{var Wa={get passive(){return za=!0},get once(){return qa=za=!0}};Ka&&(window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,!0))}catch(t){}const Xa=function(t,e,n,r){if(r&&"boolean"!=typeof r&&!qa){var i=r.once,s=r.capture,o=n;!qa&&i&&(o=n.__once||function t(r){this.removeEventListener(e,t,s),n.call(this,r)},n.__once=o),t.addEventListener(e,o,za?r:s)}t.addEventListener(e,n,r)};function Ya(t){return t&&t.ownerDocument||document}const Ja=function(t,e,n,r){var i=r&&"boolean"!=typeof r?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)};var Za;function Qa(t){if((!Za&&0!==Za||t)&&Ka){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Za=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Za}function $a(t){var e=function(t){var e=(0,b.useRef)(t);return(0,b.useEffect)((function(){e.current=t}),[t]),e}(t);return(0,b.useCallback)((function(){return e.current&&e.current.apply(e,arguments)}),[e])}function tl(t){var e,n,r=(e=t,(n=(0,b.useRef)(e)).current=e,n);(0,b.useEffect)((function(){return function(){return r.current()}}),[])}var el=/([A-Z])/g,nl=/^ms-/;function rl(t){return function(t){return t.replace(el,"-$1").toLowerCase()}(t).replace(nl,"-ms-")}var il=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const sl=function(t,e){var n="",r="";if("string"==typeof e)return t.style.getPropertyValue(rl(e))||function(t,e){return function(t){var e=Ya(t);return e&&e.defaultView||window}(t).getComputedStyle(t,e)}(t).getPropertyValue(rl(e));Object.keys(e).forEach((function(i){var s=e[i];s||0===s?function(t){return!(!t||!il.test(t))}(i)?r+=i+"("+s+") ":n+=rl(i)+": "+s+";":t.style.removeProperty(rl(i))})),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n},ol=function(t,e,n,r){return Xa(t,e,n,r),function(){Ja(t,e,n,r)}};function al(t,e,n,r){var i,s;null==n&&(s=-1===(i=sl(t,"transitionDuration")||"").indexOf("ms")?1e3:1,n=parseFloat(i)*s||0);var o=function(t,e,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(t){var e=document.createEvent("HTMLEvents");e.initEvent("transitionend",!0,!0),t.dispatchEvent(e)}(t)}),e+n),s=ol(t,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}(t,n,r),a=ol(t,"transitionend",e);return function(){o(),a()}}function ll(t){void 0===t&&(t=Ya());try{var e=t.activeElement;return e&&e.nodeName?e:null}catch(e){return t.body}}function cl(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(16&t.compareDocumentPosition(e)):void 0}var ul=n(2652),hl=n.n(ul),fl=n(3961);function dl(t,e){t.classList?t.classList.add(e):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(t,e)||("string"==typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function pl(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function yl(t,e){t.classList?t.classList.remove(e):"string"==typeof t.className?t.className=pl(t.className,e):t.setAttribute("class",pl(t.className&&t.className.baseVal||"",e))}function vl(t){return"window"in t&&t.window===t?t:"nodeType"in(e=t)&&e.nodeType===document.DOCUMENT_NODE&&t.defaultView||!1;var e}function ml(t){var e;return vl(t)||(e=t)&&"body"===e.tagName.toLowerCase()?function(t){var e=vl(t)?Ya():Ya(t),n=vl(t)||e.defaultView;return e.body.clientWidth<n.innerWidth}(t):t.scrollHeight>t.clientHeight}var gl=["template","script","style"],bl=function(t,e,n){[].forEach.call(t.children,(function(t){var r,i,s;-1===e.indexOf(t)&&(i=(r=t).nodeType,s=r.tagName,1===i&&-1===gl.indexOf(s.toLowerCase()))&&n(t)}))};function _l(t,e){e&&(t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}const wl=function(){function t(t){var e=void 0===t?{}:t,n=e.hideSiblingNodes,r=void 0===n||n,i=e.handleContainerOverflow,s=void 0===i||i;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=r,this.handleContainerOverflow=s,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=Qa()}var e=t.prototype;return e.isContainerOverflowing=function(t){var e=this.data[this.containerIndexFromModal(t)];return e&&e.overflowing},e.containerIndexFromModal=function(t){return e=this.data,n=function(e){return-1!==e.modals.indexOf(t)},r=-1,e.some((function(t,e){return!!n(t)&&(r=e,!0)})),r;var e,n,r},e.setContainerStyle=function(t,e){var n={overflow:"hidden"};t.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},t.overflowing&&(n.paddingRight=parseInt(sl(e,"paddingRight")||"0",10)+this.scrollbarSize+"px"),sl(e,n)},e.removeContainerStyle=function(t,e){Object.assign(e.style,t.style)},e.add=function(t,e,n){var r=this.modals.indexOf(t),i=this.containers.indexOf(e);if(-1!==r)return r;if(r=this.modals.length,this.modals.push(t),this.hideSiblingNodes&&function(t,e){var n=e.dialog,r=e.backdrop;bl(t,[n,r],(function(t){return _l(!0,t)}))}(e,t),-1!==i)return this.data[i].modals.push(t),r;var s={modals:[t],classes:n?n.split(/\s+/):[],overflowing:ml(e)};return this.handleContainerOverflow&&this.setContainerStyle(s,e),s.classes.forEach(dl.bind(null,e)),this.containers.push(e),this.data.push(s),r},e.remove=function(t){var e=this.modals.indexOf(t);if(-1!==e){var n=this.containerIndexFromModal(t),r=this.data[n],i=this.containers[n];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(e,1),0===r.modals.length)r.classes.forEach(yl.bind(null,i)),this.handleContainerOverflow&&this.removeContainerStyle(r,i),this.hideSiblingNodes&&function(t,e){var n=e.dialog,r=e.backdrop;bl(t,[n,r],(function(t){return _l(!1,t)}))}(i,t),this.containers.splice(n,1),this.data.splice(n,1);else if(this.hideSiblingNodes){var s=r.modals[r.modals.length-1],o=s.backdrop;_l(!1,s.dialog),_l(!1,o)}}},e.isTopModal=function(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t},t}();var kl,xl=function(t){var e;return"undefined"==typeof document?null:null==t?Ya().body:("function"==typeof t&&(t=t()),t&&"current"in t&&(t=t.current),(null==(e=t)?void 0:e.nodeType)&&t||null)};var Rl=(0,b.forwardRef)((function(t,e){var n=t.show,r=void 0!==n&&n,i=t.role,s=void 0===i?"dialog":i,o=t.className,a=t.style,l=t.children,c=t.backdrop,u=void 0===c||c,h=t.keyboard,f=void 0===h||h,d=t.onBackdropClick,p=t.onEscapeKeyDown,y=t.transition,v=t.backdropTransition,m=t.autoFocus,g=void 0===m||m,_=t.enforceFocus,w=void 0===_||_,k=t.restoreFocus,x=void 0===k||k,R=t.restoreFocusOptions,S=t.renderDialog,E=t.renderBackdrop,C=void 0===E?function(t){return b.createElement("div",t)}:E,T=t.manager,L=t.container,M=t.containerClassName,P=t.onShow,A=t.onHide,D=void 0===A?function(){}:A,O=t.onExit,N=t.onExited,F=t.onExiting,B=t.onEnter,I=t.onEntering,j=t.onEntered,U=Ha(t,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),V=function(t,e){var n=(0,b.useState)((function(){return xl(t)})),r=n[0],i=n[1];if(!r){var s=xl(t);s&&i(s)}return(0,b.useEffect)((function(){}),[e,r]),(0,b.useEffect)((function(){var e=xl(t);e!==r&&i(e)}),[t,r]),r}(L),G=function(t){var e=t||(kl||(kl=new wl),kl),n=(0,b.useRef)({dialog:null,backdrop:null});return Object.assign(n.current,{add:function(t,r){return e.add(n.current,t,r)},remove:function(){return e.remove(n.current)},isTopModal:function(){return e.isTopModal(n.current)},setDialogRef:(0,b.useCallback)((function(t){n.current.dialog=t}),[]),setBackdropRef:(0,b.useCallback)((function(t){n.current.backdrop=t}),[])})}(T),H=function(){var t=(0,b.useRef)(!0),e=(0,b.useRef)((function(){return t.current}));return(0,b.useEffect)((function(){return function(){t.current=!1}}),[]),e.current}(),K=function(t){var e=(0,b.useRef)(null);return(0,b.useEffect)((function(){e.current=t})),e.current}(r),z=(0,b.useState)(!r),q=z[0],W=z[1],X=(0,b.useRef)(null);(0,b.useImperativeHandle)(e,(function(){return G}),[G]),Ka&&!K&&r&&(X.current=ll()),y||r||q?r&&q&&W(!1):W(!0);var Y=$a((function(){if(G.add(V,M),et.current=ol(document,"keydown",$),tt.current=ol(document,"focus",(function(){return setTimeout(Z)}),!0),P&&P(),g){var t=ll(document);G.dialog&&t&&!cl(G.dialog,t)&&(X.current=t,G.dialog.focus())}})),J=$a((function(){var t;G.remove(),null==et.current||et.current(),null==tt.current||tt.current(),x&&(null==(t=X.current)||null==t.focus||t.focus(R),X.current=null)}));(0,b.useEffect)((function(){r&&V&&Y()}),[r,V,Y]),(0,b.useEffect)((function(){q&&J()}),[q,J]),tl((function(){J()}));var Z=$a((function(){if(w&&H()&&G.isTopModal()){var t=ll();G.dialog&&t&&!cl(G.dialog,t)&&G.dialog.focus()}})),Q=$a((function(t){t.target===t.currentTarget&&(null==d||d(t),!0===u&&D())})),$=$a((function(t){f&&27===t.keyCode&&G.isTopModal()&&(null==p||p(t),t.defaultPrevented||D())})),tt=(0,b.useRef)(),et=(0,b.useRef)(),nt=y;if(!V||!(r||nt&&!q))return null;var rt=Ga({role:s,ref:G.setDialogRef,"aria-modal":"dialog"===s||void 0},U,{style:a,className:o,tabIndex:-1}),it=S?S(rt):b.createElement("div",rt,b.cloneElement(l,{role:"document"}));nt&&(it=b.createElement(nt,{appear:!0,unmountOnExit:!0,in:!!r,onExit:O,onExiting:F,onExited:function(){W(!0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];null==N||N.apply(void 0,e)},onEnter:B,onEntering:I,onEntered:j},it));var st=null;if(u){var ot=v;st=C({ref:G.setBackdropRef,onClick:Q}),ot&&(st=b.createElement(ot,{appear:!0,in:!!r},st))}return b.createElement(b.Fragment,null,fl.createPortal(b.createElement(b.Fragment,null,st,it),V))})),Sl={show:hl().bool,container:hl().any,onShow:hl().func,onHide:hl().func,backdrop:hl().oneOfType([hl().bool,hl().oneOf(["static"])]),renderDialog:hl().func,renderBackdrop:hl().func,onEscapeKeyDown:hl().func,onBackdropClick:hl().func,containerClassName:hl().string,keyboard:hl().bool,transition:hl().elementType,backdropTransition:hl().elementType,autoFocus:hl().bool,enforceFocus:hl().bool,restoreFocus:hl().bool,restoreFocusOptions:hl().shape({preventScroll:hl().bool}),onEnter:hl().func,onEntering:hl().func,onEntered:hl().func,onExit:hl().func,onExiting:hl().func,onExited:hl().func,manager:hl().instanceOf(wl)};Rl.displayName="Modal",Rl.propTypes=Sl;const El=Object.assign(Rl,{Manager:wl});function Cl(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n(626);var Tl=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ll(t,e){return Tl(t.querySelectorAll(e))}var Ml=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Pl=".sticky-top",Al=".navbar-toggler",Dl=function(t){function e(){return t.apply(this,arguments)||this}Cl(e,t);var n=e.prototype;return n.adjustAndStore=function(t,e,n){var r,i=e.style[t];e.dataset[t]=i,sl(e,((r={})[t]=parseFloat(sl(e,t))+n+"px",r))},n.restore=function(t,e){var n,r=e.dataset[t];void 0!==r&&(delete e.dataset[t],sl(e,((n={})[t]=r,n)))},n.setContainerStyle=function(e,n){var r=this;if(t.prototype.setContainerStyle.call(this,e,n),e.overflowing){var i=Qa();Ll(n,Ml).forEach((function(t){return r.adjustAndStore("paddingRight",t,i)})),Ll(n,Pl).forEach((function(t){return r.adjustAndStore("marginRight",t,-i)})),Ll(n,Al).forEach((function(t){return r.adjustAndStore("marginRight",t,i)}))}},n.removeContainerStyle=function(e,n){var r=this;t.prototype.removeContainerStyle.call(this,e,n),Ll(n,Ml).forEach((function(t){return r.restore("paddingRight",t)})),Ll(n,Pl).forEach((function(t){return r.restore("marginRight",t)})),Ll(n,Al).forEach((function(t){return r.restore("marginRight",t)}))},e}(wl);const Ol=b.createContext(null);var Nl="unmounted",Fl="exited",Bl="entering",Il="entered",jl="exiting",Ul=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,s=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?s?(i=Fl,r.appearStatus=Bl):i=Il:i=e.unmountOnExit||e.mountOnEnter?Nl:Fl,r.state={status:i},r.nextCallback=null,r}Cl(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Nl?{status:Fl}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Bl&&n!==Il&&(e=Bl):n!==Bl&&n!==Il||(e=jl)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===Bl?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===Fl&&this.setState({status:Nl})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[fl.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;t||n?(this.props.onEnter(s,o),this.safeSetState({status:Bl},(function(){e.props.onEntering(s,o),e.onTransitionEnd(l,(function(){e.safeSetState({status:Il},(function(){e.props.onEntered(s,o)}))}))}))):this.safeSetState({status:Il},(function(){e.props.onEntered(s)}))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:fl.findDOMNode(this);e?(this.props.onExit(r),this.safeSetState({status:jl},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Fl},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:Fl},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:fl.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===Nl)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,Ha(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return b.createElement(Ol.Provider,{value:null},"function"==typeof n?n(t,r):b.cloneElement(b.Children.only(n),r))},e}(b.Component);function Vl(){}Ul.contextType=Ol,Ul.propTypes={},Ul.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vl,onEntering:Vl,onEntered:Vl,onExit:Vl,onExiting:Vl,onExited:Vl},Ul.UNMOUNTED=Nl,Ul.EXITED=Fl,Ul.ENTERING=Bl,Ul.ENTERED=Il,Ul.EXITING=jl;const Gl=Ul;var Hl,Kl=((Hl={}).entering="show",Hl.entered="show",Hl),zl=b.forwardRef((function(t,e){var n=t.className,r=t.children,i=Ha(t,["className","children"]),s=(0,b.useCallback)((function(t){!function(t){t.offsetHeight}(t),i.onEnter&&i.onEnter(t)}),[i]);return b.createElement(Gl,Ga({ref:e,addEndListener:al},i,{onEnter:s}),(function(t,e){return b.cloneElement(r,Ga({},e,{className:Lo()("fade",n,r.props.className,Kl[t])}))}))}));zl.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},zl.displayName="Fade";const ql=zl;var Wl=/-(.)/g,Xl=b.createContext({});function Yl(t,e){var n=(0,b.useContext)(Xl);return t||n[e]||e}Xl.Consumer,Xl.Provider;function Jl(t,e){var n,r,i=void 0===e?{}:e,s=i.displayName,o=void 0===s?(n=t)[0].toUpperCase()+(r=n,r.replace(Wl,(function(t,e){return e.toUpperCase()}))).slice(1):s,a=i.Component,l=i.defaultProps,c=b.forwardRef((function(e,n){var r=e.className,i=e.bsPrefix,s=e.as,o=void 0===s?a||"div":s,l=Ha(e,["className","bsPrefix","as"]),c=Yl(i,t);return b.createElement(o,Ga({ref:n,className:Lo()(r,c)},l))}));return c.defaultProps=l,c.displayName=o,c}const Zl=Jl("modal-body"),Ql=b.createContext({onHide:function(){}});var $l=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,i=t.contentClassName,s=t.centered,o=t.size,a=t.children,l=t.scrollable,c=Ha(t,["bsPrefix","className","contentClassName","centered","size","children","scrollable"]),u=(n=Yl(n,"modal"))+"-dialog";return b.createElement("div",Ga({},c,{ref:e,className:Lo()(u,r,o&&n+"-"+o,s&&u+"-centered",l&&u+"-scrollable")}),b.createElement("div",{className:Lo()(n+"-content",i)},a))}));$l.displayName="ModalDialog";const tc=$l,ec=Jl("modal-footer");var nc={label:hl().string.isRequired,onClick:hl().func},rc=b.forwardRef((function(t,e){var n=t.label,r=t.onClick,i=t.className,s=Ha(t,["label","onClick","className"]);return b.createElement("button",Ga({ref:e,type:"button",className:Lo()("close",i),onClick:r},s),b.createElement("span",{"aria-hidden":"true"},""),b.createElement("span",{className:"sr-only"},n))}));rc.displayName="CloseButton",rc.propTypes=nc,rc.defaultProps={label:"Close"};const ic=rc;var sc=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.closeLabel,i=t.closeButton,s=t.onHide,o=t.className,a=t.children,l=Ha(t,["bsPrefix","closeLabel","closeButton","onHide","className","children"]);n=Yl(n,"modal-header");var c=(0,b.useContext)(Ql),u=$a((function(){c&&c.onHide(),s&&s()}));return b.createElement("div",Ga({ref:e},l,{className:Lo()(o,n)}),a,i&&b.createElement(ic,{label:r,onClick:u}))}));sc.displayName="ModalHeader",sc.defaultProps={closeLabel:"Close",closeButton:!1};const oc=sc;const ac=Jl("modal-title",{Component:("h4",b.forwardRef((function(t,e){return b.createElement("div",Ga({},t,{ref:e,className:Lo()(t.className,"h4")}))})))});var lc,cc={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:tc};function uc(t){return b.createElement(ql,t)}function hc(t){return b.createElement(ql,t)}var fc=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,i=t.style,s=t.dialogClassName,o=t.contentClassName,a=t.children,l=t.dialogAs,c=t["aria-labelledby"],u=t.show,h=t.animation,f=t.backdrop,d=t.keyboard,p=t.onEscapeKeyDown,y=t.onShow,v=t.onHide,m=t.container,g=t.autoFocus,_=t.enforceFocus,w=t.restoreFocus,k=t.restoreFocusOptions,x=t.onEntered,R=t.onExit,S=t.onExiting,E=t.onEnter,C=t.onEntering,T=t.onExited,L=t.backdropClassName,M=t.manager,P=Ha(t,["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"]),A=(0,b.useState)({}),D=A[0],O=A[1],N=(0,b.useState)(!1),F=N[0],B=N[1],I=(0,b.useRef)(!1),j=(0,b.useRef)(!1),U=(0,b.useRef)(null),V=(0,b.useState)(null),G=V[0],H=V[1],K=$a(v);n=Yl(n,"modal"),(0,b.useImperativeHandle)(e,(function(){return{get _modal(){return G}}}),[G]);var z=(0,b.useMemo)((function(){return{onHide:K}}),[K]);function q(){return M||(lc||(lc=new Dl),lc)}function W(t){if(Ka){var e=q().isContainerOverflowing(G),n=t.scrollHeight>Ya(t).documentElement.clientHeight;O({paddingRight:e&&!n?Qa():void 0,paddingLeft:!e&&n?Qa():void 0})}}var X=$a((function(){G&&W(G.dialog)}));tl((function(){Ja(window,"resize",X),U.current&&U.current()}));var Y=function(){I.current=!0},J=function(t){I.current&&G&&t.target===G.dialog&&(j.current=!0),I.current=!1},Z=function(){B(!0),U.current=al(G.dialog,(function(){B(!1)}))},Q=function(t){"static"!==f?j.current||t.target!==t.currentTarget?j.current=!1:v():function(t){t.target===t.currentTarget&&Z()}(t)},$=(0,b.useCallback)((function(t){return b.createElement("div",Ga({},t,{className:Lo()(n+"-backdrop",L,!h&&"show")}))}),[h,L,n]),tt=Ga({},i,{},D);return h||(tt.display="block"),b.createElement(Ql.Provider,{value:z},b.createElement(El,{show:u,ref:H,backdrop:f,container:m,keyboard:!0,autoFocus:g,enforceFocus:_,restoreFocus:w,restoreFocusOptions:k,onEscapeKeyDown:function(t){d||"static"!==f?d&&p&&p(t):(t.preventDefault(),Z())},onShow:y,onHide:v,onEnter:function(t){t&&(t.style.display="block",W(t));for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];E&&E.apply(void 0,[t].concat(n))},onEntering:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];C&&C.apply(void 0,[t].concat(n)),Xa(window,"resize",X)},onEntered:x,onExit:function(t){U.current&&U.current();for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];R&&R.apply(void 0,[t].concat(n))},onExiting:S,onExited:function(t){t&&(t.style.display="");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T&&T.apply(void 0,n),Ja(window,"resize",X)},manager:q(),containerClassName:n+"-open",transition:h?uc:void 0,backdropTransition:h?hc:void 0,renderBackdrop:$,renderDialog:function(t){return b.createElement("div",Ga({role:"dialog"},t,{style:tt,className:Lo()(r,n,F&&n+"-static"),onClick:f?Q:void 0,onMouseUp:J,"aria-labelledby":c}),b.createElement(l,Ga({},P,{role:"document",onMouseDown:Y,className:s,contentClassName:o}),a))}}))}));fc.displayName="Modal",fc.defaultProps=cc,fc.Body=Zl,fc.Header=oc,fc.Title=ac,fc.Footer=ec,fc.Dialog=tc,fc.TRANSITION_DURATION=300,fc.BACKDROP_TRANSITION_DURATION=150;const dc=fc;n(4309);var pc={type:hl().string,tooltip:hl().bool,as:hl().elementType},yc=b.forwardRef((function(t,e){var n=t.as,r=void 0===n?"div":n,i=t.className,s=t.type,o=void 0===s?"valid":s,a=t.tooltip,l=void 0!==a&&a,c=Ha(t,["as","className","type","tooltip"]);return b.createElement(r,Ga({},c,{ref:e,className:Lo()(i,o+"-"+(l?"tooltip":"feedback"))}))}));yc.displayName="Feedback",yc.propTypes=pc;const vc=yc,mc=b.createContext({controlId:void 0});var gc=b.forwardRef((function(t,e){var n=t.id,r=t.bsPrefix,i=t.bsCustomPrefix,s=t.className,o=t.type,a=void 0===o?"checkbox":o,l=t.isValid,c=void 0!==l&&l,u=t.isInvalid,h=void 0!==u&&u,f=t.isStatic,d=t.as,p=void 0===d?"input":d,y=Ha(t,["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"]),v=(0,b.useContext)(mc),m=v.controlId,g=v.custom?[i,"custom-control-input"]:[r,"form-check-input"];return r=Yl(g[0],g[1]),b.createElement(p,Ga({},y,{ref:e,type:a,id:n||m,className:Lo()(s,r,c&&"is-valid",h&&"is-invalid",f&&"position-static")}))}));gc.displayName="FormCheckInput";const bc=gc;var _c=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.bsCustomPrefix,i=t.className,s=t.htmlFor,o=Ha(t,["bsPrefix","bsCustomPrefix","className","htmlFor"]),a=(0,b.useContext)(mc),l=a.controlId,c=a.custom?[r,"custom-control-label"]:[n,"form-check-label"];return n=Yl(c[0],c[1]),b.createElement("label",Ga({},o,{ref:e,htmlFor:s||l,className:Lo()(i,n)}))}));_c.displayName="FormCheckLabel";const wc=_c;var kc=b.forwardRef((function(t,e){var n=t.id,r=t.bsPrefix,i=t.bsCustomPrefix,s=t.inline,o=void 0!==s&&s,a=t.disabled,l=void 0!==a&&a,c=t.isValid,u=void 0!==c&&c,h=t.isInvalid,f=void 0!==h&&h,d=t.feedbackTooltip,p=void 0!==d&&d,y=t.feedback,v=t.className,m=t.style,g=t.title,_=void 0===g?"":g,w=t.type,k=void 0===w?"checkbox":w,x=t.label,R=t.children,S=t.custom,E=t.as,C=void 0===E?"input":E,T=Ha(t,["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"]),L="switch"===k||S,M=L?[i,"custom-control"]:[r,"form-check"];r=Yl(M[0],M[1]);var P=(0,b.useContext)(mc).controlId,A=(0,b.useMemo)((function(){return{controlId:n||P,custom:L}}),[P,L,n]),D=L||null!=x&&!1!==x&&!R,O=b.createElement(bc,Ga({},T,{type:"switch"===k?"checkbox":k,ref:e,isValid:u,isInvalid:f,isStatic:!D,disabled:l,as:C}));return b.createElement(mc.Provider,{value:A},b.createElement("div",{style:m,className:Lo()(v,r,L&&"custom-"+k,o&&r+"-inline")},R||b.createElement(b.Fragment,null,O,D&&b.createElement(wc,{title:_},x),(u||f)&&b.createElement(vc,{type:u?"valid":"invalid",tooltip:p},y))))}));kc.displayName="FormCheck",kc.Input=bc,kc.Label=wc;const xc=kc;var Rc=b.forwardRef((function(t,e){var n=t.id,r=t.bsPrefix,i=t.bsCustomPrefix,s=t.className,o=t.isValid,a=t.isInvalid,l=t.lang,c=t.as,u=void 0===c?"input":c,h=Ha(t,["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"]),f=(0,b.useContext)(mc),d=f.controlId,p=f.custom?[i,"custom-file-input"]:[r,"form-control-file"];return r=Yl(p[0],p[1]),b.createElement(u,Ga({},h,{ref:e,id:n||d,type:"file",lang:l,className:Lo()(s,r,o&&"is-valid",a&&"is-invalid")}))}));Rc.displayName="FormFileInput";const Sc=Rc;var Ec=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.bsCustomPrefix,i=t.className,s=t.htmlFor,o=Ha(t,["bsPrefix","bsCustomPrefix","className","htmlFor"]),a=(0,b.useContext)(mc),l=a.controlId,c=a.custom?[r,"custom-file-label"]:[n,"form-file-label"];return n=Yl(c[0],c[1]),b.createElement("label",Ga({},o,{ref:e,htmlFor:s||l,className:Lo()(i,n),"data-browse":o["data-browse"]}))}));Ec.displayName="FormFileLabel";const Cc=Ec;var Tc=b.forwardRef((function(t,e){var n=t.id,r=t.bsPrefix,i=t.bsCustomPrefix,s=t.disabled,o=void 0!==s&&s,a=t.isValid,l=void 0!==a&&a,c=t.isInvalid,u=void 0!==c&&c,h=t.feedbackTooltip,f=void 0!==h&&h,d=t.feedback,p=t.className,y=t.style,v=t.label,m=t.children,g=t.custom,_=t.lang,w=t["data-browse"],k=t.as,x=void 0===k?"div":k,R=t.inputAs,S=void 0===R?"input":R,E=Ha(t,["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"]),C=g?[i,"custom"]:[r,"form-file"];r=Yl(C[0],C[1]);var T=(0,b.useContext)(mc).controlId,L=(0,b.useMemo)((function(){return{controlId:n||T,custom:g}}),[T,g,n]),M=null!=v&&!1!==v&&!m,P=b.createElement(Sc,Ga({},E,{ref:e,isValid:l,isInvalid:u,disabled:o,as:S,lang:_}));return b.createElement(mc.Provider,{value:L},b.createElement(x,{style:y,className:Lo()(p,r,g&&"custom-file")},m||b.createElement(b.Fragment,null,g?b.createElement(b.Fragment,null,P,M&&b.createElement(Cc,{"data-browse":w},v)):b.createElement(b.Fragment,null,M&&b.createElement(Cc,null,v),P),(l||u)&&b.createElement(vc,{type:l?"valid":"invalid",tooltip:f},d))))}));Tc.displayName="FormFile",Tc.Input=Sc,Tc.Label=Cc;const Lc=Tc;var Mc=b.forwardRef((function(t,e){var n,r,i=t.bsPrefix,s=t.bsCustomPrefix,o=t.type,a=t.size,l=t.htmlSize,c=t.id,u=t.className,h=t.isValid,f=void 0!==h&&h,d=t.isInvalid,p=void 0!==d&&d,y=t.plaintext,v=t.readOnly,m=t.custom,g=t.as,_=void 0===g?"input":g,w=Ha(t,["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"]),k=(0,b.useContext)(mc).controlId,x=m?[s,"custom"]:[i,"form-control"];if(i=Yl(x[0],x[1]),y)(r={})[i+"-plaintext"]=!0,n=r;else if("file"===o){var R;(R={})[i+"-file"]=!0,n=R}else if("range"===o){var S;(S={})[i+"-range"]=!0,n=S}else if("select"===_&&m){var E;(E={})[i+"-select"]=!0,E[i+"-select-"+a]=a,n=E}else{var C;(C={})[i]=!0,C[i+"-"+a]=a,n=C}return b.createElement(_,Ga({},w,{type:o,size:l,ref:e,readOnly:v,id:c||k,className:Lo()(u,n,f&&"is-valid",p&&"is-invalid")}))}));Mc.displayName="FormControl";const Pc=Object.assign(Mc,{Feedback:vc});var Ac=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,i=t.children,s=t.controlId,o=t.as,a=void 0===o?"div":o,l=Ha(t,["bsPrefix","className","children","controlId","as"]);n=Yl(n,"form-group");var c=(0,b.useMemo)((function(){return{controlId:s}}),[s]);return b.createElement(mc.Provider,{value:c},b.createElement(a,Ga({},l,{ref:e,className:Lo()(r,n)}),i))}));Ac.displayName="FormGroup";const Dc=Ac;var Oc=["xl","lg","md","sm","xs"],Nc=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,i=t.as,s=void 0===i?"div":i,o=Ha(t,["bsPrefix","className","as"]),a=Yl(n,"col"),l=[],c=[];return Oc.forEach((function(t){var e,n,r,i=o[t];if(delete o[t],"object"==typeof i&&null!=i){var s=i.span;e=void 0===s||s,n=i.offset,r=i.order}else e=i;var u="xs"!==t?"-"+t:"";e&&l.push(!0===e?""+a+u:""+a+u+"-"+e),null!=r&&c.push("order"+u+"-"+r),null!=n&&c.push("offset"+u+"-"+n)})),l.length||l.push(a),b.createElement(s,Ga({},o,{ref:e,className:Lo().apply(void 0,[r].concat(l,c))}))}));Nc.displayName="Col";const Fc=Nc;var Bc=b.forwardRef((function(t,e){var n=t.as,r=void 0===n?"label":n,i=t.bsPrefix,s=t.column,o=t.srOnly,a=t.className,l=t.htmlFor,c=Ha(t,["as","bsPrefix","column","srOnly","className","htmlFor"]),u=(0,b.useContext)(mc).controlId;i=Yl(i,"form-label");var h="col-form-label";"string"==typeof s&&(h=h+" "+h+"-"+s);var f=Lo()(a,i,o&&"sr-only",s&&h);return l=l||u,s?b.createElement(Fc,Ga({as:"label",className:f,htmlFor:l},c)):b.createElement(r,Ga({ref:e,className:f,htmlFor:l},c))}));Bc.displayName="FormLabel",Bc.defaultProps={column:!1,srOnly:!1};const Ic=Bc;var jc=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,i=t.as,s=void 0===i?"small":i,o=t.muted,a=Ha(t,["bsPrefix","className","as","muted"]);return n=Yl(n,"form-text"),b.createElement(s,Ga({},a,{ref:e,className:Lo()(r,n,o&&"text-muted")}))}));jc.displayName="FormText";const Uc=jc;var Vc=b.forwardRef((function(t,e){return b.createElement(xc,Ga({},t,{ref:e,type:"switch"}))}));Vc.displayName="Switch",Vc.Input=xc.Input,Vc.Label=xc.Label;const Gc=Vc;var Hc=Jl("form-row"),Kc=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.inline,i=t.className,s=t.validated,o=t.as,a=void 0===o?"form":o,l=Ha(t,["bsPrefix","inline","className","validated","as"]);return n=Yl(n,"form"),b.createElement(a,Ga({},l,{ref:e,className:Lo()(i,s&&"was-validated",r&&n+"-inline")}))}));Kc.displayName="Form",Kc.defaultProps={inline:!1},Kc.Row=Hc,Kc.Group=Dc,Kc.Control=Pc,Kc.Check=xc,Kc.File=Lc,Kc.Switch=Gc,Kc.Label=Ic,Kc.Text=Uc;const zc=Kc,qc=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return null!=t})).reduce((function(t,e){if("function"!=typeof e)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),null)};function Wc(t){return!t||"#"===t.trim()}var Xc=b.forwardRef((function(t,e){var n=t.as,r=void 0===n?"a":n,i=t.disabled,s=t.onKeyDown,o=Ha(t,["as","disabled","onKeyDown"]),a=function(t){var e=o.href,n=o.onClick;(i||Wc(e))&&t.preventDefault(),i?t.stopPropagation():n&&n(t)};return Wc(o.href)&&(o.role=o.role||"button",o.href=o.href||"#"),i&&(o.tabIndex=-1,o["aria-disabled"]=!0),b.createElement(r,Ga({ref:e},o,{onClick:a,onKeyDown:qc((function(t){" "===t.key&&(t.preventDefault(),a(t))}),s)}))}));Xc.displayName="SafeAnchor";const Yc=Xc;var Jc=b.forwardRef((function(t,e){var n=t.bsPrefix,r=t.variant,i=t.size,s=t.active,o=t.className,a=t.block,l=t.type,c=t.as,u=Ha(t,["bsPrefix","variant","size","active","className","block","type","as"]),h=Yl(n,"btn"),f=Lo()(o,h,s&&"active",r&&h+"-"+r,a&&h+"-block",i&&h+"-"+i);if(u.href)return b.createElement(Yc,Ga({},u,{as:c,ref:e,className:Lo()(f,u.disabled&&"disabled")}));e&&(u.ref=e),l?u.type=l:c||(u.type="button");var d=c||"button";return b.createElement(d,Ga({},u,{className:f}))}));Jc.displayName="Button",Jc.defaultProps={variant:"primary",active:!1,disabled:!1};const Zc=Jc;var Qc=(0,Mo.Pi)((function(t){var e=t.server,n=e.name,r=e.address,i=t.onConnect,s=(0,b.useCallback)((function(){i(r)}),[r,i]);return b.createElement("li",{className:"_2MmM5dwfRlpFf1VBWMGylg"},b.createElement("button",{className:"_1ck21zoJCP9OjBW5WbpSyj",type:"button",onClick:s},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},b.createElement("g",null,b.createElement("rect",{fill:"none",height:"24",width:"24"})),b.createElement("g",null,b.createElement("path",{d:"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z"})))),b.createElement("span",{className:"_1Dbg91xdinfzy84bbiD9WE"},n))})),$c=(0,Mo.Pi)((function(t){var e,n=t.modalId,r=t.onEnterAddress,i=k().modal,s=Na(),o=s.register,a=s.handleSubmit,l=s.errors,c=s.formState,u=(0,b.useCallback)((function(t){i.dismiss(n),r(t)}),[i,n,r]),h=(0,b.useCallback)((function(t){u(t.address)}),[u]),f=(0,b.useCallback)((function(){i.dismiss(n)}),[i,n]),d=(0,b.useCallback)((function(t){try{return new URL(t),!0}catch(t){return String(t)}}),[]);return b.createElement(dc.Dialog,{className:Lo()("VCsFkcibTPVw-gshzQYI2",t.className)},b.createElement(dc.Header,{closeButton:!0,onHide:f},b.createElement(dc.Title,null,"Connect Multiplayer")),b.createElement(dc.Body,null,b.createElement(zc,{id:"connectMultiplayer",className:"_18dzkJbHqVB3qjNQ7Lw2TH",noValidate:!0,onSubmit:a(h)},b.createElement(zc.Label,null,"Server address:"),b.createElement(zc.Control,{name:"address",className:"_1cvDUgF5VVNxLgznEcjn9D",placeholder:"Server address",spellCheck:!1,isValid:c.isSubmitted&&!l.address,isInvalid:c.isSubmitted&&!!l.address,ref:o({required:!0,validate:d})}),b.createElement("ul",{className:"_3Pyla8mTn0MRuqtcl3hy98"},pt.map((function(t,e){return b.createElement(Qc,{key:e,server:t,onConnect:u})}))))),b.createElement(dc.Footer,null,b.createElement(zc.Control.Feedback,{type:"invalid",className:l.address&&"_3MkZD4Eoxmzg6X4jjruB3"},null===(e=l.address)||void 0===e?void 0:e.message),b.createElement(Zc,{variant:"primary",type:"submit",form:"connectMultiplayer"},"Connect")))}));const tu="_2py5e1GxNougrqZlDD_Olw",eu="_20FtDP_4VZkEAg-8PQJ7qu";var nu=(0,Mo.Pi)((function(t){var e=t.room,n=e.id,r=e.name,i=e.numPlayers,s=e.phase,o=k().game,a=(0,b.useCallback)((function(){var t;null===(t=o.multiplayer)||void 0===t||t.joinRoom(n,!1).catch((function(t){return{error:String(t)}})).then((function(t){var e,n=t.error;n&&(null===(e=o.multiplayer)||void 0===e||e.logMessage("Cannot join room: ".concat(n),16711680))}))}),[n,o]),l=(0,b.useCallback)((function(){var t;null===(t=o.multiplayer)||void 0===t||t.joinRoom(n,!0).catch((function(t){return{error:String(t)}})).then((function(t){var e,n=t.error;n&&(null===(e=o.multiplayer)||void 0===e||e.logMessage("Cannot join room: ".concat(n),16711680))}))}),[n,o]);return b.createElement("li",{className:"_2r0pSwj4nSejvg_W_89eJF"},b.createElement("span",{className:"InGame"===s?tu:""},r),b.createElement("span",{className:"InGame"===s?tu:""},i),b.createElement("div",{className:"DOPloWA4BFg0RddOSlwYO"},b.createElement("button",{className:eu,onClick:a,disabled:"InGame"===s},"Join"),b.createElement("button",{className:eu,onClick:l},"Spectate")))})),ru=(0,Mo.Pi)((function(t){return b.createElement("div",{className:"_1uffji_zyeeV3MTLkaBQ3i"},b.createElement("div",{className:"YcsMhWXc13zYfh7SevXRm"},b.createElement("div",{className:"_3hCc9t_K9HmwHvXvD-WPbE"},b.createElement("span",null,"Name"),b.createElement("span",null,"Players")),b.createElement("div",{className:"_32eL2L_aHo87bRVK0ICEcx"})),b.createElement("ul",{className:"_2dgh3hMd5TpQq-d9daEkPg"},t.rooms.map((function(t){return b.createElement(nu,{key:t.id,room:t})}))))})),iu=(0,Mo.Pi)((function(t){var e,n,r=t.modalId,i=k(),s=i.game,o=i.modal,a=Na(),l=a.register,c=a.handleSubmit,u=a.errors,h=a.setError,f=null===(e=s.multiplayer)||void 0===e?void 0:e.room;(0,b.useEffect)((function(){return(0,L.U5)((function(){return"lobby"===(null==f?void 0:f.id)}),(function(t){t||o.dismiss(r)}),{fireImmediately:!0})}),[f,o,r]);var d=(0,b.useCallback)((function(t){var e;null===(e=s.multiplayer)||void 0===e||e.createRoom(t.roomName).catch((function(t){return{error:String(t)}})).then((function(t){var e=t.error;e&&h("roomName",{message:e})}))}),[s.multiplayer,h]),p=(0,b.useCallback)((function(){o.dismiss(r),s.dispatchMainEvent(new ht(ht.GOTO,"QuickPlayLobby","Back"))}),[o,r,s]);return b.createElement(dc.Dialog,{className:t.className},b.createElement(dc.Header,{closeButton:!0,onHide:p},b.createElement(dc.Title,null,"Rooms")),b.createElement(dc.Body,{className:"_16ZEqoO2irP_B08_Ns0dr5"},"lobby"===(null==f?void 0:f.id)&&b.createElement(ru,{rooms:f.state.rooms}),b.createElement(zc,{className:"_3IBGvos6RrQoXnZGXbAnpP",inline:!0,noValidate:!0,onSubmit:c(d)},b.createElement(zc.Label,null,"Room name:"),b.createElement(zc.Control,{name:"roomName",className:"_2QGoET0TA3KZ4eUBxWU1cK",placeholder:"Room name",ref:l}),b.createElement(zc.Control.Feedback,{type:"invalid",className:"_1d8hTzxjqUZk7fMP7YwFxR"},null===(n=u.roomName)||void 0===n?void 0:n.message),b.createElement(Zc,{variant:"secondary",type:"submit"},"Create")),b.createElement("div",{className:"_2Z_815oKdl0G99nA6AfsV4"})))}));var su=/^\s*(!custom\s*)?|\s*$|\r|\n/g,ou={0:"Getting Out 1",1:"Getting Out 2",2:"Getting Out 3",3:"The Stadium 1",4:"The Stadium 2",5:"The Stadium 3",6:"The Stadium 4",7:"The Stadium 5",8:"The Stadium 6",9:"The Stadium 7",10:"The Audit",11:"Lab Testing 1",12:"Lab Testing 2",13:"Lab Testing 3",14:"Lab Testing 4",15:"The Path to Freedom 1",16:"The Path to Freedom 2",17:"Backrooms 1",18:"Backrooms 2",19:"Backrooms 3",20:"Outside 1",21:"Outside 2",22:"Outside 3",23:"Outside 4",24:"Outside 5",25:"Skyline City Limits 1",26:"Skyline City Limits 2",27:"Skyline City Limits 3",28:"Skyline City Limits 4",29:"Skyline City Limits 5",30:"Ending",100:"Marathon",101:"Front Door",102:"Crossroads",103:"Tubes",104:"Death Wall",105:"The Maze",106:"Lunge",107:"Unfriendly Teleporters",108:"Funk",109:"Cubicles",110:"Over and Under",111:"Zipper",112:"Jumper",113:"Slip and Slide",114:"Wombat",115:"Fuzz Balls",116:"Secret Staircase",117:"Cubey",118:"Descending",119:"Treadmillvania"},au=(0,Mo.Pi)((function(t){var e,n=t.modalId,r=t.onEnterLevel,i=k().modal,s=Na({defaultValues:{levelType:"game-level",gameLevel:"0",levelCode:""},resolver:(0,b.useCallback)((function(t){if("game-level"===t.levelType)return{values:t,errors:{}};try{return function(t){if(!t.objects.some((function(t){return"start-point"===t.type})))throw new Error("Missing start point");if(!t.objects.some((function(t){return"end-point"===t.type})))throw new Error("Missing end point")}(mn(t.levelCode.replace(su,""))),{values:t,errors:{}}}catch(t){return{values:{},errors:{levelCode:{type:"validate",message:String(t)}}}}}),[])}),o=s.register,a=s.handleSubmit,l=s.errors,c=s.formState,u=s.setValue,h=(0,b.useCallback)((function(){i.dismiss(n)}),[i,n]),f=(0,b.useCallback)((function(){u("levelType","game-level")}),[u]),d=(0,b.useCallback)((function(){u("levelType","user-level")}),[u]),p=(0,b.useCallback)((function(t){var e;i.dismiss(n),"game-level"===t.levelType?r(null!==(e=Number(t.gameLevel))&&void 0!==e?e:0):r(t.levelCode.replace(su,""))}),[i,n,r]);return b.createElement(dc.Dialog,{className:Lo()("DyVudTwIOrUst1IHVzW6-",t.className)},b.createElement(dc.Header,{closeButton:!0,onHide:h},b.createElement(dc.Title,null,"Select Level")),b.createElement(dc.Body,null,b.createElement(zc,{id:"levelCode",className:"oE_CE9SL7lLTLNBUtWGD3",noValidate:!0,onSubmit:a(p)},b.createElement(zc.Group,{className:"_1MTHgAEZLbbMHjqKbDyDAZ"},b.createElement(zc.Check,{type:"radio",name:"levelType",label:"Game level",id:"gameLevel",value:"game-level",ref:o}),b.createElement(zc.Control,{as:"select",className:"_2uqgTeAdu40FnqQ--ahBYL",name:"gameLevel",onChange:f,ref:o},Object.entries(ou).map((function(t){var e=g()(t,2),n=e[0],r=e[1];return b.createElement("option",{key:n,value:n},r)})))),b.createElement(zc.Group,{className:"_2fMbx1nxYpneCvYjPKocet"},b.createElement(zc.Check,{type:"radio",name:"levelType",label:"User level",id:"userLevel",value:"user-level",ref:o}),b.createElement(zc.Control,{name:"levelCode",className:"_1OERbmVGh4SRMUwB3mHe2u",size:"sm",as:"textarea",placeholder:"Level Code",spellCheck:!1,isValid:c.isSubmitted&&!l.levelCode,isInvalid:c.isSubmitted&&!!l.levelCode,onFocus:d,ref:o})))),b.createElement(dc.Footer,null,b.createElement(zc.Control.Feedback,{type:"invalid",className:l.levelCode&&"_1XKP8WPD8n6-M2sEkXOrKA"},null===(e=l.levelCode)||void 0===e?void 0:e.message),b.createElement(Zc,{variant:"primary",type:"submit",form:"levelCode"},"Enter")))}));var lu=(0,Mo.Pi)((function(t){var e=t.modalId,n=t.newVersions,r=k().modal,i=(0,b.useCallback)((function(){r.dismiss(e)}),[r,e]);return b.createElement(dc.Dialog,{className:t.className},b.createElement(dc.Header,{closeButton:!0,onHide:i},b.createElement(dc.Title,null,"What's New")),b.createElement(dc.Body,{className:"_1mxkZWkVwUTZ7RCCss_mIH"},Object.entries(n).map((function(t){var e=g()(t,2),n=e[0],r=e[1];return b.createElement(b.Fragment,{key:n},b.createElement("h5",null,n),b.createElement("ul",{className:"_3LOmGiXb4fVFuA4wgUOuiX"},r.map((function(t,e){return b.createElement("li",{key:e},t)}))))}))))}));const cu="XDM1IjdKaqtg7GEyMOkfj";var uu=(0,Mo.Pi)((function(t){var e=k().modal;return b.createElement("div",{className:Lo()(t.className,"_1YO6ijDzaZegJFy3KSkWD3")},t.children,e.instances.map((function(t){return b.createElement(hu,{key:t.id,modal:t})})))})),hu=(0,Mo.Pi)((function(t){var e;switch(t.modal.type){case"select-level":e=b.createElement(au,{className:cu,modalId:t.modal.id,onEnterLevel:t.modal.onEnterLevel});break;case"connect-multiplayer":e=b.createElement($c,{className:cu,modalId:t.modal.id,onEnterAddress:t.modal.onEnterAddress});break;case"room-selection":e=b.createElement(iu,{className:cu,modalId:t.modal.id});break;case"whats-new":e=b.createElement(lu,{className:cu,modalId:t.modal.id,newVersions:t.modal.newVersions})}return b.createElement("div",{className:"jHhg1Xn916RQQwZ0s7s_2"},e)}));var fu=(0,Mo.Pi)((function(t){var e=k().game,n=t.className,r=(0,b.useCallback)((function(){var t,n=e.main,r=n.playerObj.userName,i=null!==(t=window.prompt("New user name (3-30 characters)",r))&&void 0!==t?t:r;/^[a-zA-Z0-9_]{3,30}$/.test(i)&&(n.playerObj.userName=i)}),[e]);return b.createElement("div",{className:Lo()(n,"_17kcp7ELN2RgkimC1csxrL")},b.createElement("h2",{className:"_3nsfxM36HJyeCwV3Fj55vk"},"Commands"),b.createElement("button",{type:"button",className:"_2x3REVGQmdT4kGiyCpmXrv",onClick:r},"Change user name"))}));const du="_1CZAWu0VGhXWxjNtaReWDD",pu="_2Xq-nelQJw3-79hYYdxGLP",yu="Hq77jQk14O-P1sNwRcOTT";var vu=(0,Mo.Pi)((function(t){var e=t.className,n=t.multiplayer,r=t.room,i=k(),s=i.game,o=i.modal,a=r.state,l=(0,b.useState)(null),c=g()(l,2),u=c[0],h=c[1],f=(0,b.useCallback)((function(){o.instances.some((function(t){return t.id===u}))||h(o.present({type:"select-level",onEnterLevel:function(t){null==n||n.setNextLevel(String(t))}}))}),[o,u,n]),d="lobby"!==r.id&&"InGame"===a.phase;(0,b.useEffect)((function(){null!=u&&d&&(o.dismiss(u),h(null))}),[d,o,u]);var p=(0,b.useState)(!1),y=g()(p,2),v=y[0],m=y[1],_=(0,b.useState)(null),w=g()(_,2),x=w[0],R=w[1],S=(0,b.useCallback)((function(){m(!0)}),[]),E=(0,b.useCallback)((function(){m(!1),s.focus()}),[s]);return(0,b.useEffect)((function(){if(v){var t=function(t){t.target instanceof Element&&!(null==x?void 0:x.contains(t.target))&&m(!1)};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}}),[v,x]),b.createElement("div",{className:Lo()(e,"_3ub6nOXWpEnyng4aYVOeqa")},b.createElement("div",{className:"Br1jggCjtSymYBKA0eRrL"},b.createElement("h2",{className:"dm6HFZ21TcCZ0C6v43DkB",title:r.name},r.name),"lobby"!==r.id&&b.createElement("div",{className:"_2cQjhEDKt4loq0yu5pLnUY"},b.createElement("label",{className:"_2n3T-kosls8OXCFJY3LViv"},"Level: "),b.createElement("label",{className:"_2I1cbbRtDuPbm4EbQ_ooo8",title:999===a.nextLevel?a.nextLevelName:String(a.nextLevel)},a.nextLevelName),b.createElement("div",{className:"_2Sdez0176mEDfji7M6K4Ux"},"Lobby"===a.phase&&b.createElement("button",{className:du,type:"button",onClick:f},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},b.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),b.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}))),b.createElement("div",{ref:R,className:Lo()("_6FrgMVMUG4LQxKTOhbwwh",v&&"_8Mf2cHDiB0dSynNqUhSbj")},b.createElement("button",{className:Lo()(du,"_1-T9c2t1j-m_g8rSQcGCOD"),type:"button",onClick:S},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},b.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),b.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))),b.createElement(mu,{multiplayer:n,room:r,onCloseMenu:E}))))),b.createElement("ul",{className:"lUmZosVm99vTc0RLeg1p"},r.players.filter((function(t){return!t.isSpectator})).map((function(t){return b.createElement(gu,{key:t.id,player:t})})),r.players.some((function(t){return t.isSpectator}))&&b.createElement(b.Fragment,null,b.createElement("li",{className:"hNLgu6zTyfN7F7BZ1eSvA"},"Spectators"),r.players.filter((function(t){return t.isSpectator})).map((function(t){return b.createElement(gu,{key:t.id,player:t})})))))})),mu=(0,Mo.Pi)((function(t){var e,n,r=t.multiplayer,i=t.room,s=t.onCloseMenu,o=i.state,a=r.conn.connectionId,l=null===(e=null===(n=i.players.find((function(t){return t.id===a})))||void 0===n?void 0:n.isSpectator)||void 0===e||e,c=(0,b.useCallback)((function(){r.sendMessage("/resettime"),s()}),[r,s]),u=(0,b.useCallback)((function(){r.sendMessage("/start"),s()}),[r,s]),h=(0,b.useCallback)((function(){r.sendMessage("/endgame"),s()}),[r,s]),f=(0,b.useCallback)(function(){var t=wt()(bt().mark((function t(e){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.sendMessage("/endgame");case 2:return t.next=4,r.setNextLevel(e);case 4:return t.next=6,new Promise((function(t){return setTimeout((function(){return t(0)}),500)}));case 6:return t.next=8,r.sendMessage("/start");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),d=(0,b.useCallback)((function(){var t=o.nextLevelCode||String(o.nextLevel);f(t),s()}),[o,f,s]);return b.createElement("ul",{className:"_1_UsEbmhuAhGYUuRwuR7r6"},"Lobby"===o.phase&&b.createElement(b.Fragment,null,b.createElement("li",{className:pu},b.createElement("button",{type:"button",className:yu,onClick:c},"Reset Countdown")),b.createElement("li",{className:pu},b.createElement("button",{type:"button",className:yu,onClick:u},"Start Game"))),"InGame"===o.phase&&b.createElement(b.Fragment,null,b.createElement("li",{className:pu},b.createElement("button",{type:"button",className:yu,onClick:h,disabled:l},"End Game")),b.createElement("li",{className:pu},b.createElement("button",{type:"button",className:yu,onClick:d,disabled:l},"Restart Level"))))})),gu=(0,Mo.Pi)((function(t){var e=t.player,n=e.name,r=e.color,i=b.useMemo((function(){return{color:"#"+r.toString(16).padStart(6,"0")}}),[r]);return b.createElement("li",{className:"_7-ydMu7DFJvLqecI3j6pH",title:n},b.createElement("span",{className:"cjYoIJ6YoYThDVg-i4TqU",style:i},n))}));var bu=(0,Mo.Pi)((function(t){var e=k(),n=e.modal,r=e.game,i=t.className,s=(0,b.useState)(null),o=g()(s,2),a=o[0],l=o[1],c=(0,b.useCallback)((function(){n.instances.some((function(t){return t.id===a}))||l(n.present({type:"select-level",onEnterLevel:function(t){var e;r.focus(),null===(e=r.stage)||void 0===e||e.__withContext((function(){var e,n,i;"number"==typeof t?null===(e=r.main)||void 0===e||e.startPracticeLevel(t):(null===(n=r.main)||void 0===n||n.setUserLevel(mn(t)),null===(i=r.main)||void 0===i||i.startPracticeLevel(999))}))()}}))}),[n,a,r]);return b.createElement("div",{className:Lo()(i,"_3x3HnxZlzgnlY1v6HMxY3i")},b.createElement("h2",{className:"_1-5Ho6W5UM6jZ8LA3smJpi"},"Commands"),b.createElement("button",{type:"button",className:"_2Js0RtX8aMCbloAaUsJ5_J",onClick:c},"Practice Level"))})),_u=(0,Mo.Pi)((function(t){var e,n=k().game;return n.isInSPMenu?b.createElement(bu,{className:t.className}):n.isInModify?b.createElement(fu,{className:t.className}):(null===(e=n.multiplayer)||void 0===e?void 0:e.room)?b.createElement(vu,{className:t.className,multiplayer:n.multiplayer,room:n.multiplayer.room}):null}));function wu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ku=(0,Mo.Pi)((function(t){var e=t.controller,n=k(),r=n.library;(0,b.useEffect)((function(){r.load()}),[r]),(0,b.useEffect)((function(){if(e)return(0,L.aD)((function(){e.setRoot(n),n.controller=e}))(),(0,L.aD)((function(){n.controller=null,e.setRoot(null)}))}),[e,n]);var i=(0,b.useState)(!1),s=g()(i,2),o=s[0],a=s[1],l=(0,b.useCallback)((function(t){var e;t.target===(null===(e=n.game.stage)||void 0===e?void 0:e.__canvas.element)&&("F"===t.key.toUpperCase()?a((function(t){return!t})):"B"===t.key.toUpperCase()&&(ar.isVisible=!ar.isVisible))}),[n]),c=(0,b.useState)(null),u=g()(c,2),h=u[0],f=u[1],d=(0,b.useState)({}),p=g()(d,2),y=p[0],v=p[1];(0,b.useEffect)((function(){if(h){var t=new ResizeObserver((function(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return wu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wu(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.target===h){var i=r.contentRect,s=i.width,o=i.height;v(s/o>1.6?{width:"".concat(800*o/500,"px"),height:"".concat(o,"px")}:{width:"".concat(s,"px"),height:"".concat(500*s/800,"px")})}}}catch(t){n.e(t)}finally{n.f()}}));return t.observe(h),function(){return t.disconnect()}}}),[h]);var m=null;if(r.loadError)m=b.createElement("p",{className:"LCAupop7dIgTl9XRpoYFV"},r.loadError);else if(!r.value){var _="".concat((100*r.loadProgress).toFixed(0),"%");m=b.createElement("p",{className:"_2evwQHL3dV90YzfurLal93"},"Loading ",_,"...")}return m?b.createElement("div",{className:Lo()("_2SHScRcpk4tJfW1ZQK4Hh",t.className)},m):b.createElement("div",{className:Lo()("_1kR_3Gcxy5uaWXvvjDZU20",t.className,o&&"_1HJ7KQJiXEIRDQ2YHXoQvt"),onKeyDown:l},b.createElement("div",{ref:f,className:"_2Zaciy3Lvjru2RM0r3QBnH"},b.createElement("div",{style:y},b.createElement(uu,{className:"dz7jawOsKc5MgEtL_q2qb"},b.createElement(Va,null)))),b.createElement(_u,{className:"_2b1Boiwe2SKAvvKX6T_Vow"}),b.createElement(Ua,{className:"_3qcGm8NXJn41Ob3xM710AA"}))}));const xu=function(t){var e=(0,b.useState)(null),n=g()(e,2),r=n[0],i=n[1];return(0,b.useEffect)((function(){var t=new Co;return i(t),function(){return t.dispose()}}),[]),r?b.createElement(w,{value:r},b.createElement(ku,t)):null}},1588:(t,e,n)=>{var r=n(3720);t.exports=function(t){if(Array.isArray(t))return r(t)}},9168:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},756:t=>{function e(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(i,s){var o=t.apply(n,r);function a(t){e(o,i,s,a,l,"next",t)}function l(t){e(o,i,s,a,l,"throw",t)}a(void 0)}))}}},8183:(t,e,n)=>{var r=n(4624);function i(e,n,s){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(n):s.value}},i(e,n,s||e)}t.exports=i},2094:t=>{function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e},8914:(t,e,n)=>{var r=n(4307);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},1325:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},333:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},2164:(t,e,n)=>{var r=n(8630),i=n(9168);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},4307:t=>{function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e},4624:(t,e,n)=>{var r=n(2094);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},1362:(t,e,n)=>{var r=n(9822),i=n(1325),s=n(7698),o=n(533);t.exports=function(t){return r(t)||i(t)||s(t)||o()}},8669:(t,e,n)=>{var r=n(1588),i=n(1325),s=n(7698),o=n(333);t.exports=function(t){return r(t)||i(t)||s(t)||o()}},8630:t=>{function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e},107:(t,e,n)=>{t.exports=n(2390)},5034:()=>{},5350:(t,e,n)=>{"use strict";n.d(e,{j:()=>F,U:()=>N});var r=n(2738),i=n(2120),s=n(6300),o=n(3855),a=n(3441),l=n(2389),c=n(23);class u{constructor(t,e){this.id=t,this.image=e}}class h{constructor(t,e){this.id=t,this.audio=e}}var f,d,p=n(2526),y=n(1645);function v(t,e,n){return Math.round(e+(n-e)*t)}!function(t){t[t.Pad=0]="Pad"}(f||(f={})),function(t){t[t.SolidColor=0]="SolidColor",t[t.LinearGradient=1]="LinearGradient",t[t.RadicalGradient=2]="RadicalGradient",t[t.ClippedBitmap=3]="ClippedBitmap"}(d||(d={}));var m=n(8671),g=n(5355);function b(t,e){const n=new Float32Array(t.vertices),r=new Uint16Array(t.indices);let i=1/0,s=1/0,o=-1/0,a=-1/0;for(let e=0;e<t.vertices.length;e+=2){const t=n[e+0],r=n[e+1];i=Math.min(i,t),s=Math.min(s,r),o=Math.max(o,t),a=Math.max(a,r)}const l=m.J.fromValues(i,s,o-i,a-s);let c=null,u=4294967295;const h=p.yR(p.Ue());switch(t.fill.kind){case d.SolidColor:u=(0,g.u_)(t.fill.color);break;case d.LinearGradient:case d.RadicalGradient:const n=`${(f=t.fill.gradient).mode};${f.points.map((([t,e])=>`${t}:${e}`)).join(";")}`;c=e.gradientCache.get(n),c||(c=function(t){const e=document.createElement("canvas");e.width=256,e.height=1;const n=e.getContext("2d"),r=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){let n,i=t.points.findIndex((([t,n])=>t>=e));-1===i?(n=t.points.length-1,i=t.points.length-1):n=0===i?0:i-1;const[s,o]=t.points[n],[a,l]=t.points[i],c=s===a?1:(e-s)/(a-s);r[4*e+3]=v(c,o>>>24&255,l>>>24&255),r[4*e+0]=v(c,o>>>16&255,l>>>16&255),r[4*e+1]=v(c,o>>>8&255,l>>>8&255),r[4*e+2]=v(c,o>>>0&255,l>>>0&255)}return n.putImageData(new ImageData(r,256,1),0,0),e}(t.fill.gradient),e.gradientCache.set(n,c)),p.t8(h,...t.fill.matrix),_(h,32768,32768,.5);break;case d.ClippedBitmap:c=e.resolveImage(t.fill.characterId),p.t8(h,...t.fill.matrix),_(h,c.width,c.height,0)}var f;const b=new Uint32Array(n.length/2);return b.fill(u),new y.r("shape",n,b,r,h,c,t.fill.kind,l)}function _(t,e,n,r){p.U_(t,t),p.bA(t,t,[1/e,1/n]),t[4]=t[4]/e+r,t[5]=t[5]/n+r}class w{constructor(t,e,n){this.id=t,this.renderObjects=e.contours.map((t=>b(t,n))),this.bounds=m.J.create();for(const t of this.renderObjects)m.J.union(this.bounds,this.bounds,t.bounds)}applyTo(t){t.__node.setRenderObjects(this.renderObjects,this.bounds)}}class k{constructor(t,e,n){this.id=t,this.frames=new Map;for(const[t,r]of e.frames){const e=r.contours.map((t=>b(t,n))),i=m.J.create();for(const t of e)m.J.union(i,i,t.bounds);this.frames.set(t,{renderObjects:e,bounds:i})}}applyTo(t){const e=this.frames.get(t.__ratio);e?t.__node.setRenderObjects(e.renderObjects,e.bounds):console.warn(`no ratio frame #${t.__ratio} for morph shape #${this.id}`)}}var x=n(5950),R=n(843);class S{constructor(t,e,n){this.id=t,this.library=n,this.numFrames=e.numFrames,this.frames=e.frames}applyTo(t,e,n){const r=new Map,i=[],s=t=>{const e=this.frames.find((e=>e.frame===t));if(e){i.length=0;for(const t of e.actions){if(t.kind===x.z.StartSound){i.push(t);continue}const e=r.get(t.depth);e&&e.kind===t.kind?e.kind===x.z.PlaceObject&&r.set(t.depth,{...e,...t}):r.set(t.depth,t)}}};if(n>=e)for(let t=e;t<=n;t++)s(t);else{for(const e of t.__children)e.__depth>=0&&r.set(e.__depth,{kind:x.z.RemoveObject,depth:e.__depth});for(let t=1;t<=n;t++)s(t)}for(const e of r.values())switch(e.kind){case x.z.PlaceObject:(0,R.WO)(this.library,t,e);break;case x.z.RemoveObject:(0,R.Ff)(t,e)}for(const e of i)(0,R.jf)(this.library,t.__soundContext,e);(0,R.PU)(t)}}class E{constructor(t,e,n){this.id=t,this.font=e,this.charMap=new Map,this.glyphs=e.glyphs.map((t=>{const e=t.shape.contours.map((t=>b(t,n)));return{renderObjects:y.r.merge("text",e.map((t=>({renderObject:t,transform:p.yR(p.Ue())}))))}}));for(let t=0;t<e.glyphs.length;t++){const n=e.glyphs[t].char;n&&this.charMap.set(n,t)}this.layout=e.layout&&{ascent:e.layout.ascent/1024,descent:e.layout.descent/1024,leading:e.layout.ascent/1024,advances:e.layout.advances.map((t=>t/1024))}}}class C{constructor(t,e,n){this.id=t,this.renderObjects=[],this.bounds=m.J.fromValues(...e.bounds);const r=p.al(...e.matrix),i=[];for(const t of e.glyphs){const e=n.resolveFont(t.fontId).glyphs[t.index],s=p.Ue();p.Iu(s,r,[t.x,t.y]),p.bA(s,s,[t.size/1024/20,t.size/1024/20]);const o=(0,g.u_)(t.color);for(const t of e.renderObjects)i.push({renderObject:t,color:o,transform:s})}this.renderObjects=y.r.merge("text",i)}applyTo(t){t.__node.setRenderObjects(this.renderObjects,this.bounds)}}class T{constructor(t,e,n){this.id=t,this.lib=n,this.def={...e,fontHeight:e.fontHeight&&e.fontHeight/20,leftMargin:e.leftMargin&&e.leftMargin/20,rightMargin:e.rightMargin&&e.rightMargin/20,indent:e.indent&&e.indent/20,leading:e.leading&&e.leading/20},this.layoutBounds=m.J.fromValues(...e.bounds)}applyTo(t){var e,n;switch(t.wordWrap=this.def.isWordWrap,t.multiline=this.def.isMultiline,t.type=this.def.isReadonly?l.TextFieldType.DYNAMIC:l.TextFieldType.INPUT,t.selectable=!this.def.noSelect,m.J.copy(t.__container.layoutBounds,this.layoutBounds),this.def.align){case 0:t.defaultTextFormat.align=l.TextFormatAlign.LEFT;break;case 1:t.defaultTextFormat.align=l.TextFormatAlign.RIGHT;break;case 2:t.defaultTextFormat.align=l.TextFormatAlign.CENTER;break;case 3:t.defaultTextFormat.align=l.TextFormatAlign.JUSTIFY}null!=this.def.textColor&&(t.defaultTextFormat.color=this.def.textColor),null!=this.def.fontID&&(t.defaultTextFormat.font=this.lib.resolveFont(this.def.fontID).font.name),null!=this.def.fontHeight&&(t.defaultTextFormat.size=this.def.fontHeight),null!=this.def.leading&&(t.defaultTextFormat.leading=this.def.leading),this.def.isHTML?t.htmlText=null!==(e=this.def.initialText)&&void 0!==e?e:"":t.text=null!==(n=this.def.initialText)&&void 0!==n?n:""}}var L=n(2166),M=n(6217),P=n(7760),A=n(5351),D=n(6375);async function O(t,e,n){n(0,e);const r=(await fetch(t)).body.getReader(),i=[];let s=0;for(;;){const t=await r.read();if(t.done)break;i.push(t.value),s+=t.value.length,n(s,e)}const o=new Uint8Array(s);let a=0;for(const t of i)o.set(t,a),a+=t.length;return n(s,s),o}async function N(t,e){const n=new Map;for(const[e,{size:r}]of Object.entries(t.assets))n.set(e,[0,r]);const r=t=>(r,i)=>{n.set(t,[r,i]);let s=0,o=0;for(const[t,e]of n.values())s+=t,o+=e;null==e||e(s/o)},i=t.assets[t.data],s=await O(i.url.toString(),i.size,r(t.data)),o=JSON.parse((new TextDecoder).decode(s)),a=new F(t.properties);await Promise.all([...Array.from(Object.entries(o.images)).map((async([e,{id:n}])=>{const i=t.assets[n],s=await new Promise(((t,e)=>{const s=r(n);s(0,i.size);let o=0;const a=new Image;a.onload=()=>{s(o,o),t(a)},a.onerror=t=>e(t),a.onprogress=t=>{o=t.loaded,s(o,i.size)},a.src=i.url.toString()}));a.images.set(Number(e),new u(Number(e),s))})),...Array.from(Object.entries(o.sounds)).map((async([e,{id:n}])=>{const i=t.assets[n],s=await O(i.url.toString(),i.size,r(n)),o=await(0,D.k)(s.buffer);a.sounds.set(Number(e),new h(Number(e),o))}))]);for(const[t,e]of Object.entries(o.shapes)){const n=Number(t);a.shapes.set(n,new w(n,e,a))}for(const[t,e]of Object.entries(o.morphShapes)){const n=Number(t),r=new k(n,e,a);a.morphShapes.set(n,r)}for(const[t,e]of Object.entries(o.sprites)){const n=Number(t);a.sprites.set(n,new S(n,e,a))}for(const[t,e]of Object.entries(o.fonts)){const n=Number(t),r=new E(n,e,a);a.fonts.set(n,r),M.t.instance.registerFont(r)}for(const[t,e]of Object.entries(o.staticTexts)){const n=Number(t),r=new C(n,e,a);a.staticTexts.set(n,r)}for(const[t,e]of Object.entries(o.editTexts)){const n=Number(t),r=new T(n,e,a);a.editTexts.set(n,r)}for(const[t,e]of Object.entries(o.buttons)){const n=Number(t),r=new L.p(n,e,a);a.buttons.set(n,r)}for(const[t,e]of Object.entries(o.linkages)){const n=A.Z.instance.classes.get(e);if(!n)throw new Error(`Linked class ${e} not found`);const r=Number(t);a.linkedClasses.set(r,n)}return a.linkCharacters(),a}class F{constructor(t){this.properties=t,this.images=new Map,this.sounds=new Map,this.shapes=new Map,this.morphShapes=new Map,this.sprites=new Map,this.fonts=new Map,this.staticTexts=new Map,this.editTexts=new Map,this.buttons=new Map,this.linkedClasses=new Map,this.gradientCache=new Map}resolveImage(t){const e=this.images.get(t);if(!e)throw new Error(`Image character #${t} not found`);return e.image}resolveFont(t){const e=this.fonts.get(t);if(!e)throw new Error(`Font character #${t} not found`);return e}linkCharacters(){const t=(t,e)=>{for(const[n,r]of t){let t=this.linkedClasses.get(n);if(!t){const i="Character"+n;t=class extends(e(r)){},Object.defineProperty(t,"name",{value:i}),this.linkedClasses.set(n,t)}Object.assign(t,{__character:r})}};t(this.sounds,(()=>c.Sound)),t(this.shapes,(()=>r.b)),t(this.morphShapes,(()=>i.W)),t(this.sprites,(t=>t.numFrames>1?o.K:s.j)),t(this.staticTexts,(()=>a.V)),t(this.editTexts,(()=>l.TextField)),t(this.buttons,(()=>P.SimpleButton))}instantiateCharacter(t){const e=this.linkedClasses.get(t);if(!e)throw new Error(`Character ${t} not found`);return new e}}},5351:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});class r{constructor(){this.classes=new Map}addClassRoot(t){const e=(t,n)=>{for(const[r,i]of Object.entries(n)){const n=""===t?r:`${t}.${r}`;"function"==typeof i?this.classes.set(n,i):"object"==typeof i&&e(n,i)}};e("",t)}}r.instance=new r},6217:(t,e,n)=>{"use strict";n.d(e,{t:()=>r});class r{constructor(){this.fonts=new Map}registerFont(t){const e=this.fonts.get(t.font.name)||[];e.push(t),this.fonts.set(t.font.name,e)}resolve(t,e,n){const r=this.fonts.get(t)||[];for(const t of r)if(t.font.isItalic===e&&t.font.isBold===n)return t;return null}}r.instance=new r},1455:()=>{},5030:()=>{},7964:(t,e,n)=>{"use strict";n.d(e,{i:()=>i});const r=new WeakMap;class i{constructor(){let t=Reflect.getPrototypeOf(this),e=r.get(t);if(!e){const n=new Map;for(;t&&t!==i.prototype;){for(const e of Reflect.ownKeys(t)){if(n.has(e))continue;const r=Reflect.getOwnPropertyDescriptor(t,e);r&&"function"==typeof r.value&&n.set(e,r.value)}t=Reflect.getPrototypeOf(t)}n.delete("constructor"),e=Array.from(n.entries()),r.set(Reflect.getPrototypeOf(this),e)}for(const[t,n]of e)this[t]=n.bind(this);this.__preInit()}__preInit(){}}},3919:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AVMObject:()=>o.i,Class:()=>s,Runtime:()=>r,XML:()=>i});class r{static trace(...t){console.log(...t)}static uint(t){return(0|t)>>>0}static int(t){return 0|t}static isInterface(t,e){return e.__IMPL in t}}class i{}const s=Function;var o=n(7964)},3349:()=>{},489:(t,e,n)=>{"use strict";var r;n.d(e,{P:()=>r}),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(r||(r={}))},4539:()=>{},6305:()=>{},5400:()=>{},4834:()=>{},214:()=>{},5950:(t,e,n)=>{"use strict";var r;n.d(e,{z:()=>r}),function(t){t[t.PlaceObject=0]="PlaceObject",t[t.RemoveObject=1]="RemoveObject",t[t.StartSound=2]="StartSound"}(r||(r={}))},2573:()=>{},8454:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FrameActionKind:()=>l.z,TextAlign:()=>h.P});var r=n(6305),i={};for(const t in r)"default"!==t&&(i[t]=()=>r[t]);n.d(e,i);var s=n(214);i={};for(const t in s)"default"!==t&&(i[t]=()=>s[t]);n.d(e,i);var o=n(4834);i={};for(const t in o)"default"!==t&&(i[t]=()=>o[t]);n.d(e,i);var a=n(5400);i={};for(const t in a)"default"!==t&&(i[t]=()=>a[t]);n.d(e,i);var l=n(5950),c=n(4539);i={};for(const t in c)["default","FrameActionKind"].indexOf(t)<0&&(i[t]=()=>c[t]);n.d(e,i);var u=n(2573);i={};for(const t in u)["default","FrameActionKind"].indexOf(t)<0&&(i[t]=()=>u[t]);n.d(e,i);var h=n(489),f=n(3349);i={};for(const t in f)["default","FrameActionKind","TextAlign"].indexOf(t)<0&&(i[t]=()=>f[t]);n.d(e,i)},94:(t,e,n)=>{"use strict";n.r(e),n.d(e,{character:()=>r,text:()=>i,avm2:()=>s,AssetLibrary:()=>o.j,loadManifest:()=>o.U,FontRegistry:()=>h.t,ClassRegistry:()=>f.Z});var r=n(8454),i=n(1759),s=n(3919),o=n(5350),a=n(5030),l={};for(const t in a)["default","character","text","avm2","AssetLibrary","loadManifest"].indexOf(t)<0&&(l[t]=()=>a[t]);n.d(e,l);var c=n(5034);l={};for(const t in c)["default","character","text","avm2","AssetLibrary","loadManifest"].indexOf(t)<0&&(l[t]=()=>c[t]);n.d(e,l);var u=n(1455);l={};for(const t in u)["default","character","text","avm2","AssetLibrary","loadManifest"].indexOf(t)<0&&(l[t]=()=>u[t]);n.d(e,l);var h=n(6217),f=n(5351)},9956:(t,e,n)=>{"use strict";n.d(e,{W:()=>c});var r=n(7264),i=n(2389),s=n(4674),o=n(8671);const a=new DOMParser,l=o.J.create();class c{constructor(t){this.node=t,this.segments=[],this.htmlRoot=a.parseFromString("<root />","text/xml").documentElement,this.defaultTextFormat=new r.S,this.wordWrap=!1,this.multiline=!1,this.layoutBounds=o.J.create(),this.layoutScale=1,this.__text="",this.__htmlText=""}get text(){return this.__text}set text(t){this.__text!==t&&(this.htmlRoot.textContent=t,this.parseHTML())}get htmlText(){return this.__htmlText}set htmlText(t){if(this.__htmlText!==t){try{this.htmlRoot.innerHTML=t}catch(t){}this.parseHTML()}}parseHTML(){var t;const e=this.htmlRoot.ownerDocument.createTreeWalker(this.htmlRoot,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);let n={format:this.defaultTextFormat.__clone(),text:""};const r=[n],s=[],o=t=>{const e=n.format.__clone();let o="";switch(t.tagName.toLowerCase()){case"b":e.bold=!0;break;case"br":o="\n";break;case"font":for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n];switch(r.name.toLowerCase()){case"color":/^#[0-9a-fA-F]{6}$/.test(r.value)&&(e.color=parseInt(r.value.slice(1),16)+4278190080);break;case"face":e.font=r.value;break;case"size":/^\d+$/.test(r.value)&&(e.size=Number(r.value))}}break;case"i":e.italic=!0;break;case"p":for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n];switch(r.name.toLowerCase()){case"align":switch(r.value){case"left":e.align=i.TextFormatAlign.LEFT;break;case"right":e.align=i.TextFormatAlign.RIGHT;break;case"justify":e.align=i.TextFormatAlign.JUSTIFY;break;case"center":e.align=i.TextFormatAlign.CENTER}}break}}n={format:e,text:o},r.push(n),s.push(n)},a=t=>{r.pop(),n=r[r.length-1]};let l=e.root;for(;l;){let t;if(l instanceof Text?(c=l,n.text+=c.textContent):l instanceof Element&&o(l),t=e.firstChild())l=t;else if(t=e.nextSibling())l=t;else{for(;(t=e.parentNode())&&(t instanceof Element&&a(),!(t=e.nextSibling())););!t&&l instanceof Element&&a(),l=t}}var c;this.segments=s.filter((t=>t.text.length>0)),this.__text=null!==(t=this.htmlRoot.textContent)&&void 0!==t?t:"",this.__htmlText=this.htmlRoot.innerHTML,this.layout()}layout(){o.J.copy(l,this.layoutBounds),l[2]*=this.layoutScale;const t=(0,s.b)(this.segments,l,this.wordWrap,this.multiline);this.node.setRenderObjects(t.renderObjects,l)}}},1271:()=>{},1759:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Container:()=>r.W,layout:()=>o.b});var r=n(9956),i=n(1271),s={};for(const t in i)["default","Container"].indexOf(t)<0&&(s[t]=()=>i[t]);n.d(e,s);var o=n(4674)},4674:(t,e,n)=>{"use strict";n.d(e,{b:()=>h});var r=n(5543),i=n(2526),s=n(2389),o=n(1645),a=n(5355),l=n(8671),c=n(6217),u=n(8513);function h(t,e,n,r){const i=function(t,e,n,r){let i=null;const s=[];for(const{format:e,text:n}of t)for(const t of n){const n=/\s/.test(t);i&&i.isSpace===n||(i={isSpace:n,text:"",glyphs:[],width:0},s.push(i));const r=p(e,t),o=r.advance;i.glyphs.push(r),i.width+=o}let o=0,a={runs:[],isWrapped:!1};const l=[a];for(const t of s)/\n/.test(t.text)?(o=0,a={runs:[],isWrapped:!1},l.push(a)):(n&&o+t.width>e[2]&&a.runs.length>0&&(o=0,a={runs:[],isWrapped:!0},l.push(a)),o+=t.width,a.runs.push(t));return l.map((t=>{let e=t.runs,n=e.length;for(;n>0&&e[n-1].isSpace;)n--;if(e=e.slice(0,n),t.isWrapped){let t=0;for(;t<e.length&&e[t].isSpace;)t++;e=e.slice(t)}const r=[];let i=0;for(const t of e)r.push(...t.glyphs),i+=t.width;return{glyphs:r,width:i}}))}(t,e,n),s=l.J.create(),o=[];let a=e[1]+(0,u.E_)(2);for(const t of i){const n=y(t,a,e);o.push(...n.renderObjects),l.J.union(s,s,n.bounds),a+=n.bounds[3]}return{bounds:s,renderObjects:o}}function f(t){return Math.min(127,t.size)}function d(t){return{renderObjects:[],color:t.color,align:t.align,size:f(t),leading:t.leading,advance:f(t),ascent:f(t),descent:0}}function p(t,e){var n,r,i,s,o,a;const l=c.t.instance.resolve(t.font,t.italic,t.bold);if(!l)return d(t);const u=l.charMap.get(e);return null==u?d(t):{renderObjects:l.glyphs[u].renderObjects,color:t.color,align:t.align,size:f(t),leading:t.leading,advance:(null!==(r=null===(n=l.layout)||void 0===n?void 0:n.advances[u])&&void 0!==r?r:0)*f(t),ascent:null!==(s=null===(i=l.layout)||void 0===i?void 0:i.ascent)&&void 0!==s?s:0,descent:null!==(a=null===(o=l.layout)||void 0===o?void 0:o.descent)&&void 0!==a?a:0}}function y(t,e,n){if(0===t.glyphs.length)return{bounds:l.J.create(),renderObjects:[]};const c=n[0]+(0,u.E_)(2),h=n[2]-(0,u.E_)(4);let f,d;switch(t.glyphs[0].align){case s.TextFormatAlign.RIGHT:f=0,d=c+h-t.width;break;case s.TextFormatAlign.CENTER:f=0,d=c+(h-t.width)/2;break;case s.TextFormatAlign.JUSTIFY:f=t.glyphs.length>0?c+(h-t.width)/(t.glyphs.length-1):0,d=0;break;default:f=0,d=c}const p=[];let y=0,v=0;for(const e of t.glyphs)y=Math.max(y,e.ascent*e.size);for(const e of t.glyphs)v=Math.max(v,y+e.descent*e.size+e.leading);r.Ue();for(const n of t.glyphs){const t=i.Ue();i.vc(t,[d,e+y]),i.bA(t,t,[n.size/1024,n.size/1024]);const r=(0,a.u_)(n.color);for(const e of n.renderObjects)p.push({renderObject:e,color:r,transform:t});d+=n.advance+f}return{bounds:l.J.fromValues(c,e,d-c,v),renderObjects:o.r.merge("text",p)}}},2640:(t,e,n)=>{"use strict";n.d(e,{s:()=>b});var r=n(5543),i=n(2526),s=n(570),o=n(8281),a=n(8745),l=n(7069),c=n(2942),u=n(230),h=n(8513),f=n(2550),d=n(9378),p=n(4495);const y=p.A.create(),v=r.Ue(),m=i.Ue();let g=null;class b extends s.p{constructor(){const t=g;g=null,super(),this.__scaleSkews={scaleX:1,scaleY:1,skewX:0,skewY:0},null==t||t.fn(this)}static __initChar(t,e){return g={fn:e},t()}__preInit(){this.__character=null,this.__depth=-1,this.__clipDepth=-1,this.__parent=null,this.name="",this.__mask=null,this.__maskRefs=0,this.__filters=[],this.__node=new u.B(this),this.transform=new a.w,this.transform.__setNode(this.__node),super.__preInit()}get visible(){return this.__node.visible}set visible(t){this.__node.visible=t}get parent(){return this.__parent}set parent(t){const e=this.stage;this.__parent=t;const n=this.stage;n!==e&&(n?(n.__displayListDirty=!0,this.__onAddedToStage(n)):e&&this.__onRemovedFromStage(e)),this.__setEventParent(this.parent)}get stage(){var t,e;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.stage)&&void 0!==e?e:null}get mask(){return this.__mask}set mask(t){var e;this.__mask&&(this.__mask.__maskRefs--,this.__mask.__node.isMask=this.__mask.__maskRefs>0),this.__mask=t,this.__node.mask=null!==(e=null==t?void 0:t.__node)&&void 0!==e?e:null,this.__node.markRenderDirty(),this.__mask&&(this.__mask.__maskRefs++,this.__mask.__node.isMask=this.__mask.__maskRefs>0)}get filters(){return this.__filters}set filters(t){this.__filters=t,this.__node.filters=t.map((t=>t.__filter)).filter((t=>t.filter.isEffective(t))),this.__node.markRenderDirty()}get cacheAsBitmap(){return this.__node.cacheAsBitmap||this.__node.filters.length>0}set cacheAsBitmap(t){this.__node.cacheAsBitmap=t}get x(){return(0,h.Sh)(this.__node.transformLocal[4])}set x(t){t=(0,h.E_)(t),this.__node.transformLocal[4]!==t&&(this.__node.transformLocal[4]=t,this.__node.markLayoutDirty())}get y(){return(0,h.Sh)(this.__node.transformLocal[5])}set y(t){t=(0,h.E_)(t),this.__node.transformLocal[5]!==t&&(this.__node.transformLocal[5]=t,this.__node.markLayoutDirty())}get scaleX(){return this.__scaleSkews.scaleX}set scaleX(t){this.__scaleSkews.scaleX=t,(0,f.qC)(this.__node.transformLocal,this.__scaleSkews)&&(this.transform.matrix.__fromMat2d(this.__node.transformLocal),this.__node.markLayoutDirty())}get scaleY(){return this.__scaleSkews.scaleY}set scaleY(t){this.__scaleSkews.scaleY=t,(0,f.qC)(this.__node.transformLocal,this.__scaleSkews)&&(this.transform.matrix.__fromMat2d(this.__node.transformLocal),this.__node.markLayoutDirty())}get rotation(){return(0,f.lS)(180*this.__scaleSkews.skewY/Math.PI)}set rotation(t){const e=t/180*Math.PI-this.__scaleSkews.skewY;this.__scaleSkews.skewX+=e,this.__scaleSkews.skewY+=e,(0,f.qC)(this.__node.transformLocal,this.__scaleSkews)&&(this.transform.matrix.__fromMat2d(this.__node.transformLocal),this.__node.markLayoutDirty())}get width(){return this.parent?this.getBounds(this.parent).width:(this.__node.ensureLayout(),this.__node.ensureBounds(),(0,h.Sh)(this.__node.boundsLocal[2]-this.__node.boundsLocal[0]))}set width(t){this.__node.ensureLayout(),this.__node.ensureBounds(),t=(0,h.E_)(t);const e=this.__node.bounds[2]-this.__node.bounds[0],n=this.__node.bounds[3]-this.__node.bounds[1],r=n/e,i=0===e?0:t/e,s=0===n?0:t/n,o=Math.abs(Math.cos(this.__scaleSkews.skewY)),a=Math.abs(Math.sin(this.__scaleSkews.skewY)),l=r*(o*i+a*s)/((o+r*a)*(r*o+a)),c=(a*this.__scaleSkews.scaleX+r*o*this.__scaleSkews.scaleY)/(r*o+a);this.__scaleSkews.scaleX=l,this.__scaleSkews.scaleY=c,(0,f.qC)(this.__node.transformLocal,this.__scaleSkews)&&(this.transform.matrix.__fromMat2d(this.__node.transformLocal),this.__node.markLayoutDirty())}get height(){return this.parent?this.getBounds(this.parent).height:(this.__node.ensureLayout(),this.__node.ensureBounds(),(0,h.Sh)(this.__node.boundsLocal[3]-this.__node.boundsLocal[1]))}set height(t){this.__node.ensureLayout(),this.__node.ensureBounds(),t=(0,h.E_)(t);const e=this.__node.bounds[2]-this.__node.bounds[0],n=this.__node.bounds[3]-this.__node.bounds[1],r=e/n,i=0===e?0:t/e,s=0===n?0:t/n,o=Math.abs(Math.cos(this.__scaleSkews.skewY)),a=Math.abs(Math.sin(this.__scaleSkews.skewY)),l=(r*o*this.__scaleSkews.scaleX+a*this.__scaleSkews.scaleY)/(r*o+a),c=r*(a*i+o*s)/((o+r*a)*(r*o+a));this.__scaleSkews.scaleX=l,this.__scaleSkews.scaleY=c,(0,f.qC)(this.__node.transformLocal,this.__scaleSkews)&&(this.transform.matrix.__fromMat2d(this.__node.transformLocal),this.__node.markLayoutDirty())}get mouseX(){const t=this.stage;return t?(this.__globalToLocal(v,t.__mousePosition,!0),v[0]):0}get mouseY(){const t=this.stage;return t?(this.__globalToLocal(v,t.__mousePosition,!0),v[1]):0}__globalToLocal(t,e,n){n&&this.__node.ensureLayout(),t[0]=(0,h.E_)(e[0]),t[1]=(0,h.E_)(e[1]),r.iu(t,t,this.__node.transformWorldInvert),t[0]=(0,h.Sh)(t[0]),t[1]=(0,h.Sh)(t[1])}globalToLocal(t){const e=new l.E;return this.__globalToLocal(e.__value,t.__value,!0),e}hitTestPoint(t,e,n=!1){return!!this.visible&&(this.__node.ensureLayout(),r.t8(v,t,e),this.__node.hitTest(v,n))}hitTestObject(t){return this.__node.ensureLayout(),t.__node.ensureLayout(),this.__node.ensureBounds(),t.__node.ensureBounds(),p.A.intersects(t.__node.boundsWorld,this.__node.boundsWorld)}getBounds(t){this.__node.ensureLayout(),t.__node.ensureLayout(),this.__node.ensureBounds(),(0,d.Yu)(m,t.__node.transformWorldInvert,this.__node.transformWorld),p.A.apply(y,this.__node.bounds,m);const e=new c.A;return e.x=(0,h.Sh)(y[0]),e.y=(0,h.Sh)(y[1]),e.width=(0,h.Sh)(y[2]-y[0]),e.height=(0,h.Sh)(y[3]-y[1]),e}__initFrame(t,e){}__onRender(){}__onAddedToStage(t){this.dispatchEvent(new o.j(o.j.ADDED_TO_STAGE,!1,!1))}__onRemovedFromStage(t){this.dispatchEvent(new o.j(o.j.REMOVED_FROM_STAGE,!1,!1))}}},581:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(8077);class i extends r.D{__preInit(){this.__children=[],super.__preInit()}get numChildren(){return this.__children.length}addChild(t){var e;return null===(e=t.parent)||void 0===e||e.removeChild(t),this.__children.push(t),t.parent=this,t.__node.setParent(this.__node,this.__node.children.length),t}addChildAt(t,e){var n;return null===(n=t.parent)||void 0===n||n.removeChild(t),this.__children.splice(e,0,t),t.parent=this,t.__node.setParent(this.__node,e),t}getChildByName(t){var e;return null!==(e=this.__children.find((e=>e.name===t)))&&void 0!==e?e:null}getChildAt(t){var e;return null!==(e=this.__children[t])&&void 0!==e?e:null}removeChild(t){const e=this.__children.indexOf(t);return e<0?null:(this.__children.splice(e,1),t.parent=null,t.__node.setParent(null,0),t)}removeChildAt(t){var e;const n=null!==(e=this.__children.splice(t,1)[0])&&void 0!==e?e:null;return n&&(n.parent=null,n.__node.setParent(null,0)),n}removeChildren(t=0,e=this.__children.length){const n=this.__children.splice(t,e-t);for(const t of n)t.parent=null,t.__node.setParent(null,0)}contains(t){return this.__children.includes(t)}__onAddedToStage(t){for(const e of this.__children)e.__onAddedToStage(t);super.__onAddedToStage(t)}__onRemovedFromStage(t){super.__onRemovedFromStage(t);for(const e of this.__children)e.__onRemovedFromStage(t)}__onRender(){super.__onRender();for(const t of this.__children)t.__onRender()}}},9838:(t,e,n)=>{"use strict";n.d(e,{T:()=>l});var r=n(7964),i=n(5355),s=n(1645),o=n(8671),a=n(8513);class l extends r.i{constructor(t){super(),this.__node=t,this.__x=0,this.__y=0,this.__lineThickness=-1,this.__lineColor=4278190080,this.__bounds=o.J.create(),this.__renderObjects=[]}clear(){this.__x=0,this.__y=0,this.__lineThickness=-1,this.__lineColor=4278190080,o.J.clear(this.__bounds),this.__renderObjects.length=0,this.__node.setRenderObjects([],this.__bounds)}lineStyle(t=NaN,e=0,n=1){this.__lineThickness=isNaN(t)?-1:t,this.__lineColor=(0,i.u_)(e+16777216*Math.floor(255*n))}moveTo(t,e){this.__x=t,this.__y=e}lineTo(t,e){const n=s.r.line((0,a.E_)(this.__x),(0,a.E_)(this.__y),(0,a.E_)(t),(0,a.E_)(e),(0,a.E_)(this.__lineThickness),this.__lineColor);this.__renderObjects.push(n),o.J.union(this.__bounds,this.__bounds,n.bounds),this.__node.setRenderObjects(this.__renderObjects.slice(),this.__bounds),this.__x=t,this.__y=e}}},8077:(t,e,n)=>{"use strict";n.d(e,{D:()=>i});var r=n(2640);class i extends r.s{constructor(){super(),this.tabEnabled=!1,this.tabIndex=-1}get __isPointerCursor(){return!!this.parent&&this.parent.__isPointerCursor}}},2120:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(2640);class i extends r.s{constructor(){var t,e;super(),this.___ratio=0,this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null,null===(e=this.__character)||void 0===e||e.applyTo(this)}get __ratio(){return this.___ratio}set __ratio(t){var e;this.___ratio=t,null===(e=this.__character)||void 0===e||e.applyTo(this)}}},3855:(t,e,n)=>{"use strict";n.d(e,{K:()=>o});var r=n(6300),i=n(8433),s=n(5511);class o extends r.j{constructor(){super(),this.__lastFrame=-1,this.__constructed=!1,this.__frameScripts=new Map,this.__scriptFrame=0,this.__nextFrame=1,this.currentFrame=1,this.isPlaying=!0}get totalFrames(){var t,e;return null!==(e=null===(t=this.__character)||void 0===t?void 0:t.numFrames)&&void 0!==e?e:1}__initFrame(t,e){var n;if(super.__initFrame(t,e),e&&this.isPlaying&&this.__constructed&&this.__lastFrame===this.currentFrame){let t=this.__nextFrame+1;(t>this.totalFrames||t<1)&&(t=1),this.__nextFrame=t}this.__nextFrame!==this.currentFrame&&(null===(n=this.__character)||void 0===n||n.applyTo(this,this.currentFrame,this.__nextFrame),this.currentFrame=this.__nextFrame),this.__constructed||t.__constructionQueue.push(this),this.__scriptFrame!==this.currentFrame&&(0,i.s)((()=>this.__runFrameScript())),e&&(this.__lastFrame=this.currentFrame)}__constructFrame(){this.__constructed=!0}__runFrameScript(){if(this.__scriptFrame!==this.currentFrame){this.__scriptFrame=this.currentFrame;const t=this.__frameScripts.get(this.__scriptFrame);null==t||t()}}addFrameScript(...t){for(let e=0;e<t.length;e+=2)this.__frameScripts.set(t[e]+1,t[e+1])}__resolveFrame(t){var e,n;const r=Number(t);if(!isNaN(r))return r;const i=null===(n=null===(e=this.__character)||void 0===e?void 0:e.frames)||void 0===n?void 0:n.find((e=>e.label===t));return i?i.frame:null}gotoAndPlay(t){var e;const n=this.__resolveFrame(t);n&&(this.__nextFrame=n),this.isPlaying=!0;const r=null!==(e=this.stage)&&void 0!==e?e:s.H.__current;r&&(r.__initQueue.push(this),(0,i.E)(!1,r))}gotoAndStop(t){var e;const n=this.__resolveFrame(t);n&&(this.__nextFrame=n),this.isPlaying=!1;const r=null!==(e=this.stage)&&void 0!==e?e:s.H.__current;r&&(r.__initQueue.push(this),(0,i.E)(!1,r))}play(){this.isPlaying=!0}stop(){this.isPlaying=!1}__onAddedToStage(t){super.__onAddedToStage(t),t.__initQueue.push(this)}}},2738:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(2640),i=n(9838);class s extends r.s{constructor(){var t,e;super(),this.graphics=new i.T(this.__node),this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null,null===(e=this.__character)||void 0===e||e.applyTo(this)}}},6300:(t,e,n)=>{"use strict";n.d(e,{j:()=>o});var r=n(581),i=n(9838),s=n(1719);class o extends r._{constructor(){super(),this.buttonMode=!1,this.graphics=new i.T(this.__node)}__preInit(){var t,e;super.__preInit(),this.__soundContext=new s.$,this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null,null===(e=this.__character)||void 0===e||e.applyTo(this,1,1)}get __isPointerCursor(){return this.buttonMode||super.__isPointerCursor}}},5511:(t,e,n)=>{"use strict";n.d(e,{H:()=>H});var r=n(5543),i=n(581),s=n(8077);class o{constructor(t,e){this.width=t,this.height=e,this.container=document.createElement("div"),this.element=document.createElement("canvas"),this.__cursor="",this.container.style.setProperty("width",t+"px"),this.container.style.setProperty("height",e+"px"),this.container.style.setProperty("position","relative"),this.element.tabIndex=0,this.element.style.setProperty("outline","none","important"),this.element.style.setProperty("user-select","none","important"),this.element.style.setProperty("position","absolute"),this.element.style.setProperty("width",t+"px"),this.element.style.setProperty("height",e+"px"),this.element.width=t*window.devicePixelRatio,this.element.height=e*window.devicePixelRatio,this.container.appendChild(this.element)}get cursor(){return this.__cursor}set cursor(t){t!==this.__cursor&&(this.element.style.cursor=t,this.__cursor=t)}resolveCoords(t,e,n){const r=this.element.getBoundingClientRect();t[0]=(e-r.left)*this.width/r.width,t[1]=(n-r.top)*this.width/r.width}}var a=n(2526),l=n(4945),c=n(8671),u=n(5355),h=n(8513),f=n(9378);const d=l.al(1,1,1,1),p=l.al(0,0,0,0);class y{constructor(t){this.renders=[],this.transformStack=[],this.allTransforms=[],this.transformStack.push({view:a.yR(a.Ue()),colorMul:l.t8(l.Ue(),1,1,1,1),colorAdd:l.t8(l.Ue(),0,0,0,0),renderMask:null,useMask:[]}),this.allTransforms.push(this.transformStack[0]),this.viewport=t}get transform(){return this.transformStack[this.transformStack.length-1]}set transform(t){this.transformStack[this.transformStack.length-1]=t}get bounds(){const t=c.J.create(),e=c.J.create();for(const n of this.renders)"object"in n?c.J.apply(e,n.object.bounds,n.transform.view):"texture"in n?(c.J.copy(e,n.texture.bounds),e[0]-=n.texture.paddings[0],e[1]-=n.texture.paddings[1],e[2]+=2*n.texture.paddings[0],e[3]+=2*n.texture.paddings[1],c.J.apply(e,e,n.transform.view)):"filter"in n&&c.J.apply(e,n.filter.bounds,n.transform.view),c.J.union(t,t,e);return t}pushTransform(t,e){var n,r,i;const s=this.transformStack[this.transformStack.length-1],o={view:a.Ue(),colorAdd:l.Ue(),colorMul:l.Ue(),renderMask:null!==(n=null==e?void 0:e.renderMask)&&void 0!==n?n:s.renderMask,useMask:s.useMask.slice()};a.Jp(o.view,s.view,t),(0,f.Gk)(o.view),(0,u.fE)(o.colorMul,o.colorAdd,s.colorMul,s.colorAdd,null!==(r=null==e?void 0:e.colorMul)&&void 0!==r?r:d,null!==(i=null==e?void 0:e.colorAdd)&&void 0!==i?i:p),(null==e?void 0:e.useMask)&&o.useMask.push(e.useMask),this.transformStack.push(o),this.allTransforms.push(o)}dupTransform(){const t=this.transform,e={view:a.d9(t.view),colorAdd:l.d9(t.colorAdd),colorMul:l.d9(t.colorMul),renderMask:t.renderMask,useMask:t.useMask.slice()};this.transformStack.push(e),this.allTransforms.push(e)}popTransform(){this.transformStack.pop()}renderContext(t){const{view:e,colorMul:n,colorAdd:r}=this.transform;for(const i of t.allTransforms)a.Jp(i.view,e,i.view),(0,u.fE)(i.colorMul,i.colorAdd,n,r,i.colorMul,i.colorAdd),this.allTransforms.push(i);this.renders.push(...t.renders)}renderObject(t){this.renders.push({transform:this.transform,object:t})}renderCache(t,e,n,r){const i=a.U_(a.Ue(),n);a.Jp(i,i,this.transform.view),this.renders.push({transform:this.transform,cache:{view:i,texture:t,bounds:e,then:r}})}renderTexture(t,e,n,i){this.dupTransform();const s=this.transform.view;a.Iu(s,s,[t[0],t[1]]);const o=r.al(Math.abs(s[0]),Math.abs(s[3]));0!==o[0]&&0!==o[1]&&a.bA(s,s,[1/o[0],1/o[1]]),a.Iu(s,s,[-e[0],-e[1]]);const l=r.al((0,h.Sh)(s[4]),(0,h.Sh)(s[5]));s[4]=Math.trunc(s[4]/h.JN)*h.JN,s[5]=Math.trunc(s[5]/h.JN)*h.JN,this.renders.push({transform:this.transform,texture:{bounds:c.J.copy(c.J.create(),t),paddings:e,scale:o,translate:l,fn:n,then:i}}),this.popTransform()}renderFilter(t,e,n,r){this.renders.push({transform:this.transform,filter:{texture:t,bounds:e,instance:n,then:r}})}}class v{constructor(){this.listeners=[]}subscribe(t){this.listeners.push({disabled:!1,handler:t})}unsubscribe(t){for(const e of this.listeners)e.handler===t&&(e.disabled=!0);this.listeners=this.listeners.filter((t=>!t.disabled))}reset(){this.listeners=[]}emit(...t){for(const{disabled:e,handler:n}of this.listeners)e||n(...t)}}class m{constructor(t,e){this.canvas=t,this.attrs=e,this.resetRender=new v,this.maxTextures=1,this.textureLimit=16,this.maxSamples=0,this.sampleLimit=4,this.clearColor=l.al(NaN,NaN,NaN,NaN),this.viewport=l.al(NaN,NaN,NaN,NaN),this.bindings=new Map,this.textureUnits=new Map,this.activeTexture=NaN,this.vertexArray=null,this.program=null,this.capacity=NaN,this.blendEquation=[NaN,NaN],this.blendFuncs=[NaN,NaN,NaN,NaN],this.instances=new Map,this.onContextLost=t=>{t.preventDefault()},this.onContextRestored=t=>{t.preventDefault(),this.instances.clear(),this.resetRender.reset(),this.reset()};const n=t.getContext("webgl2",e);if(!n)throw new Error("Cannot create WebGL2 context");this.gl=n,t.addEventListener("webglcontextlost",this.onContextLost,!1),t.addEventListener("webglcontextrestored",this.onContextRestored,!1),this.reset()}reset(){this.maxTextures=Math.min(this.textureLimit,this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)),this.maxSamples=Math.min(this.sampleLimit,this.gl.getParameter(this.gl.MAX_SAMPLES)),l.t8(this.clearColor,NaN,NaN,NaN,NaN),l.t8(this.viewport,NaN,NaN,NaN,NaN),this.bindings.clear(),this.textureUnits.clear(),this.activeTexture=NaN,this.vertexArray=null,this.program=null,this.capacity=NaN,this.blendEquation.fill(NaN),this.blendFuncs.fill(NaN)}dispose(){var t;this.resetRenderState(),null===(t=this.gl.getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext(),this.canvas.removeEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.removeEventListener("webglcontextrestored",this.onContextRestored,!1)}resetRenderState(){this.reset(),this.resetRender.emit(this)}lookupInstance(t){return this.instances.get(t)}ensureInstance(t,e){let n=this.instances.get(t);return n||(n=e(this.gl),this.instances.set(t,n)),n}deleteInstance(t,e){let n=this.instances.get(t);n&&(e(this.gl,n),this.instances.delete(t))}bindTexture(t,e){this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.textureUnits.set(t,e)}bindTextures(t){return t.map(((t,e)=>(this.bindTexture(e,t),e)))}bindBuffer(t,e){this.bindings.get(t)!==e&&(this.gl.bindBuffer(t,e),this.bindings.set(t,e))}bindVertexArray(t){this.vertexArray!==t&&(this.gl.bindVertexArray(t),this.vertexArray=t,this.bindings.clear())}bindRenderbuffer(t,e){this.bindings.get(t)!==e&&(this.gl.bindRenderbuffer(t,e),this.bindings.set(t,e))}bindFramebuffer(t,e){this.bindings.get(t)!==e&&(this.gl.bindFramebuffer(t,e),this.bindings.set(t,e),t===this.gl.FRAMEBUFFER?(this.bindings.set(this.gl.FRAMEBUFFER,e),this.bindings.set(this.gl.READ_FRAMEBUFFER,e),this.bindings.set(this.gl.DRAW_FRAMEBUFFER,e)):t===this.gl.READ_FRAMEBUFFER?(this.bindings.set(this.gl.FRAMEBUFFER,void 0),this.bindings.set(this.gl.READ_FRAMEBUFFER,e)):t===this.gl.DRAW_FRAMEBUFFER&&(this.bindings.set(this.gl.FRAMEBUFFER,void 0),this.bindings.set(this.gl.DRAW_FRAMEBUFFER,e)))}useProgram(t){this.program!==t&&(this.gl.useProgram(t),this.program=t)}setActiveTexture(t){this.activeTexture!==t&&(this.gl.activeTexture(t),this.activeTexture=t)}setClearColor(t,e,n,r){l.fS(this.clearColor,[t,e,n,r])||(this.gl.clearColor(t,e,n,r),l.t8(this.clearColor,t,e,n,r))}setViewport(t,e,n,r){l.fS(this.viewport,[t,e,n,r])||(this.gl.viewport(t,e,n,r),l.t8(this.viewport,t,e,n,r))}enable(t){(this.capacity|t)!==this.capacity&&(this.gl.enable(t),this.capacity|=t)}disable(t){(this.capacity&~t)!==this.capacity&&(this.gl.disable(t),this.capacity&=~t)}setBlendEquation(t,e=t){this.blendEquation[0]===t&&this.blendEquation[1]===e||(this.gl.blendEquationSeparate(t,e),this.blendEquation[0]=t,this.blendEquation[1]=e)}setBlendFunc(t,e,n=t,r=e){this.blendFuncs[0]===t&&this.blendFuncs[1]===e&&this.blendFuncs[2]===n&&this.blendFuncs[3]===r||(this.gl.blendFuncSeparate(t,e,n,r),this.blendFuncs[0]=t,this.blendFuncs[1]=e,this.blendFuncs[2]=n,this.blendFuncs[3]=r)}}var g=n(1552),b=n(970),_=n(7527),w=n(2106);class k{constructor(t,e,n,r=!0){this.type=n,this.allowMultisampling=r,this.onResetRender=t=>{this.delete(t)},this.width=t,this.height=e}ensure(t){return t.ensureInstance(this,(e=>{let n;switch(this.type){case"depth":n=e.DEPTH_COMPONENT16;break;case"rgba":n=e.RGBA8;break;case"rgb":n=e.RGB8}const r=e.createRenderbuffer();return t.bindRenderbuffer(e.RENDERBUFFER,r),t.maxSamples>0&&this.allowMultisampling?e.renderbufferStorageMultisample(e.RENDERBUFFER,t.maxSamples,n,this.width,this.height):e.renderbufferStorage(e.RENDERBUFFER,n,this.width,this.height),t.resetRender.subscribe(this.onResetRender),r}))}delete(t){t.deleteInstance(this,((e,n)=>{e.deleteRenderbuffer(n),t.resetRender.unsubscribe(this.onResetRender)}))}}class x{constructor(t){this.onResetRender=t=>{this.delete(t)},this.colorAttachment=t}ensure(t){return t.ensureInstance(this,(e=>{const n=this.colorAttachment.ensure(t),r=e.createFramebuffer();return t.bindFramebuffer(e.DRAW_FRAMEBUFFER,r),this.colorAttachment instanceof g.x?e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0):e.framebufferRenderbuffer(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n),t.resetRender.subscribe(this.onResetRender),r}))}delete(t){t.deleteInstance(this,((e,n)=>{e.deleteFramebuffer(n),t.resetRender.unsubscribe(this.onResetRender)}))}}class R{constructor(t){this.state=t,this.texturePool=new Map,this.renderbufferPool=new Map}takeTexture(t,e){const n=`${t}:${e}`,r=this.texturePool.get(n)||[];if(0===r.length){const n=g.x.size(t,e),i=new x(n);r.push({insertAt:+new Date,item:{texture:n,framebuffer:i}})}return r.pop().item}takeRenderbuffer(t,e){const n=`${t}:${e}`,r=this.renderbufferPool.get(n)||[];if(0===r.length){const n=new k(t,e,"rgba"),i=new x(n);r.push({insertAt:+new Date,item:{renderbuffer:n,framebuffer:i}})}return r.pop().item}returnTexture(t){const e=`${t.texture.width}:${t.texture.height}`,n=this.texturePool.get(e)||[];n.push({insertAt:+new Date,item:t}),this.texturePool.set(e,n)}returnRenderbuffer(t){const e=`${t.renderbuffer.width}:${t.renderbuffer.height}`,n=this.renderbufferPool.get(e)||[];n.push({insertAt:+new Date,item:t}),this.renderbufferPool.set(e,n)}cleanLRU(){const t=+new Date-6e4;for(const[e,n]of this.renderbufferPool){const r=n.filter((e=>e.insertAt<t));for(const{item:t}of r)t.renderbuffer.delete(this.state),t.framebuffer.delete(this.state);this.renderbufferPool.set(e,n.filter((t=>!r.includes(t))))}for(const[e,n]of this.texturePool){const r=n.filter((e=>e.insertAt<t));for(const{item:t}of r)t.texture.delete(this.state),t.framebuffer.delete(this.state);this.texturePool.set(e,n.filter((t=>!r.includes(t))))}}}class S{constructor(t,e){this.width=t,this.height=e,this.x=0,this.y=0,this.rowHeight=0}add(t,e){let n=this.x,r=this.y;return this.x+t>this.width&&(this.x=0,this.y+=this.rowHeight+1,this.rowHeight=0,n=this.x,r=this.y),this.x+=t,this.x>this.width?null:(this.x+=1,this.rowHeight=Math.max(this.rowHeight,e),this.y+this.rowHeight>this.height?null:c.J.fromValues(n,r,t,e))}}var E=n(2550),C=n(1645);class T{constructor(t,e,n,r){this.pool=t,this.target=e,this.view=n,this.bounds=r,this.returned=!1,this.renderObject=C.r.rect(r,e.texture,{scale:h.JN})}return(){this.returned||(this.pool.returnTexture(this.target),this.returned=!0)}}const L=524288,M=1024,P=c.J.create();function A(t){return t<128?128:t<256?256:t<512?512:t<1024?1024:Math.ceil(t)}a.Ue();class D{constructor(t){var e;this.canvas=t,this.textureMap=new Map,this.textureReturnBox=[],this.renderbufferReturnBox=[],this.indexData=new Uint16Array(L),this.attributeData=new ArrayBuffer(3670016),this.indices=b.l.index(this.indexData,"STREAM_DRAW"),this.attributes=b.l.vertex(new Uint32Array(this.attributeData),"STREAM_DRAW"),this.attrFloat=new Float32Array(this.attributeData,0),this.attrUint=new Uint32Array(this.attributeData,0),this.renderVertexArray=new w.F([{index:0,buffer:this.attributes,type:"float",components:4,offset:0,stride:56},{index:1,buffer:this.attributes,type:"byte",components:4,normalized:!0,offset:16,stride:56},{index:2,buffer:this.attributes,type:"float",components:4,offset:20,stride:56},{index:3,buffer:this.attributes,type:"float",components:4,offset:36,stride:56},{index:4,buffer:this.attributes,type:"byte",components:4,integer:!0,offset:52,stride:56}],this.indices),this.backgroundColor=0,this.glState=new m(t.element,{alpha:!1,premultipliedAlpha:!1,antialias:!1}),this.renderPool=new R(this.glState),this.renderProgram=new _.$("\n#version 300 es\n\nlayout(location=0) in vec4 aVertex;\nlayout(location=1) in vec4 aColor;\nlayout(location=2) in vec4 aColorMul;\nlayout(location=3) in vec4 aColorAdd;\nlayout(location=4) in uvec4 aMode;\n\nout vec2 vTextureCoords;\nout vec4 vColor;\nout vec4 vColorMul;\nout vec4 vColorAdd;\nflat out uvec4 vMode;\n\nvoid main(void) {\n    vec2 pos = aVertex.xy;\n    vec2 uv = aVertex.zw;\n    gl_Position = vec4(pos, 0.0, 1.0);\n\n    vTextureCoords = uv;\n    vColor = aColor;\n    vColorMul = aColorMul;\n    vColorAdd = aColorAdd;\n    vMode = aMode;\n}\n",`\n#version 300 es\nprecision highp float;\n\nin vec2 vTextureCoords;\nin vec4 vColor;\nin vec4 vColorMul;\nin vec4 vColorAdd;\nflat in uvec4 vMode;\nout vec4 fragColor;\n\nuniform sampler2D uTextures[${e=this.glState.maxTextures}];\n\nvec4 sampleTex(int id, vec2 coords) {\n  vec4 color;\n  ${new Array(e).fill(0).map(((t,e)=>`\n      if (id == ${e}) {\n        color = texture(uTextures[${e}], coords);\n      }\n      `)).join("\n")}\n  return color;\n}\n\nvec4 getTexel(int id, ivec2 coords) {\n  vec4 color;\n  ${new Array(e).fill(0).map(((t,e)=>`\n      if (id == ${e}) {\n        color = texelFetch(uTextures[${e}], coords, 0);\n      }\n      `)).join("\n")}\n  return color;\n}\n\nvoid main(void) {\n    int fillMode = int(vMode.x) % 4;\n    int texId = int(vMode.x) / 4;\n    int maskMode = int(vMode.y) % 4;\n    int maskTexId = int(vMode.y) / 4;\n    int maskID = int(vMode.z);\n\n    vec2 coords;\n    if (fillMode == 1) {\n        coords = vec2(vTextureCoords.x, 0.0);\n    } else if (fillMode == 2) {\n        coords = vec2(length(vTextureCoords * 2.0 - 1.0), 0.0);\n    } else {\n        coords = vTextureCoords;\n    }\n\n    vec4 tex = sampleTex(texId, coords);\n    vec4 color = (tex * vColor * vec4(vColorMul.rgb, 1.0)) * vColorMul.a;\n    color += vColorAdd * color.a;\n\n    if (maskMode == 1) {\n      color = vec4(float(maskID) / 255.0, 0.0, 0.0, 1.0);\n    } else if (maskMode == 2) {\n      vec4 mask = getTexel(maskTexId, ivec2(gl_FragCoord.xy));\n      if (maskID == int(mask.r * 255.0)) {\n        color = color * mask.a;\n      } else {\n        color = vec4(0.0);\n      }\n    }\n\n    color = trunc(color * 255.0) / 255.0;\n    fragColor = color;\n}\n`),this.textureUnits=new Int32Array(this.glState.maxTextures),this.renderProgram.ensure(this.glState),this.renderVertexArray.ensure(this.glState),this.defaultFramebuffer=new x(new k(t.element.width,t.element.height,"rgb")),this.resolvedFramebuffer=new x(new k(t.element.width,t.element.height,"rgb",!1))}renderFrame(t){const e=this.glState.gl,{width:n,height:r}=this.canvas;this.renderNode(t,this.defaultFramebuffer,n,r,(()=>{this.glState.setClearColor((this.backgroundColor>>>16&255)/255,(this.backgroundColor>>>8&255)/255,(this.backgroundColor>>>0&255)/255,1),e.clear(e.COLOR_BUFFER_BIT)}))}blitFrame(){if(this.glState.gl.isContextLost())return;const{width:t,height:e}=this.defaultFramebuffer.colorAttachment,n=this.glState.gl,r=this.defaultFramebuffer.ensure(this.glState),i=this.resolvedFramebuffer.ensure(this.glState);this.glState.bindFramebuffer(n.READ_FRAMEBUFFER,r),this.glState.bindFramebuffer(n.DRAW_FRAMEBUFFER,i),n.blitFramebuffer(0,0,t,e,0,0,t,e,n.COLOR_BUFFER_BIT,n.NEAREST),this.glState.bindFramebuffer(n.READ_FRAMEBUFFER,i),this.glState.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.blitFramebuffer(0,0,t,e,0,0,t,e,n.COLOR_BUFFER_BIT,n.NEAREST)}renderNode(t,e,n,r,i,s=!0){if(this.glState.gl.isContextLost())return;const{width:o,height:l}=e.colorAttachment,u=c.J.fromValues(0,0,(0,h.E_)(o),(0,h.E_)(l)),f=new y(u);t.render(f);const d=(0,E.CJ)(a.Ue(),(0,h.E_)(n),(0,h.E_)(r),s);this.textureReturnBox.length=0,this.renderbufferReturnBox.length=0;try{this.render(f.renders,e,d,i)}finally{for(const t of this.textureReturnBox)this.renderPool.returnTexture(t);for(const t of this.renderbufferReturnBox)this.renderPool.returnRenderbuffer(t);this.renderPool.cleanLRU()}}loadTexture(t){if(t instanceof g.x)return t;let e=this.textureMap.get(t);return e||(e=t?g.x.image(t):g.x.WHITE,this.textureMap.set(t,e)),e}render(t,e,n,r){const i=[],s=[],o=[],a=t=>{i.length=0,s.length=0,o.length=0;for(const e of t)"texture"in e?i.push(e):"filter"in e?s.push(e):"cache"in e&&o.push(e)};let l;a(t);do{for(l=!1;o.length>0;)this.renderCaches(t,o),l=!0,a(t);for(;i.length>0;)this.renderTextures(t,i),l=!0,a(t);for(;s.length>0;)this.renderFilters(t,s),l=!0,a(t)}while(l);this.renderObjects(t,e,n,r)}renderTextures(t,e){const n=this.glState.gl;let r=null,i=null;const s=new Map,o=()=>{if(!r||!i||0===s.size)return;const e=(0,E.CJ)(a.Ue(),(0,h.E_)(r.width),(0,h.E_)(r.height),!1),o=this.renderPool.takeTexture(r.width,r.height),l=this.renderPool.takeRenderbuffer(r.width,r.height);this.textureReturnBox.push(o),this.renderbufferReturnBox.push(l),this.render(i.renders,l.framebuffer,e,(()=>{this.glState.setClearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}));const c=l.framebuffer.ensure(this.glState),u=o.framebuffer.ensure(this.glState);this.glState.bindFramebuffer(n.READ_FRAMEBUFFER,c),this.glState.bindFramebuffer(n.DRAW_FRAMEBUFFER,u),n.blitFramebuffer(0,0,r.width,r.height,0,0,r.width,r.height,n.COLOR_BUFFER_BIT,n.NEAREST);for(const[e,n]of s){const r=new y(null);r.transform=e.transform,e.texture.then(r,o.texture,n);const i=t.indexOf(e);t.splice(i,1,...r.renders)}};for(const t of e){const{bounds:e,paddings:n,scale:l,translate:c,fn:u}=t.texture,f=new y(null),d=a.vc(a.Ue(),[n[0]+(0,h.E_)(c[0]-Math.trunc(c[0])),n[1]+(0,h.E_)(c[1]-Math.trunc(c[1]))]);a.bA(d,d,l),a.Iu(d,d,[-e[0],-e[1]]),f.pushTransform(d),u(f),f.popTransform();const p=f.bounds,v=Math.ceil((0,h.Sh)(Math.abs(p[0])+p[2]+n[0])),m=Math.ceil((0,h.Sh)(Math.abs(p[1])+p[3]+n[1]));let g;r&&i&&(g=r.add(v,m))||(o(),r=new S(Math.max(M,A(v)),Math.max(M,A(m))),i=new y(null),s.clear(),g=r.add(v,m)),a.vc(d,[(0,h.E_)(g[0]),(0,h.E_)(g[1])]),i.pushTransform(d),i.renderContext(f),i.popTransform(),s.set(t,g)}o()}renderCaches(t,e){const n=this.glState.gl;for(const r of e){const{texture:e,bounds:i,view:s,then:o}=r.cache,a=A((0,h.Sh)(i[2])),l=A((0,h.Sh)(i[3])),u=this.renderPool.takeTexture(a,l),f=new x(e);try{const t=f.ensure(this.glState),e=u.framebuffer.ensure(this.glState);this.glState.bindFramebuffer(n.READ_FRAMEBUFFER,t),this.glState.bindFramebuffer(n.DRAW_FRAMEBUFFER,e),n.blitFramebuffer(i[0],i[1],i[0]+i[2],i[1]+i[3],0,0,i[2],i[3],n.COLOR_BUFFER_BIT,n.NEAREST)}finally{f.delete(this.glState)}o(new T(this.renderPool,u,s,c.J.fromValues(0,0,i[2],i[3])));const d=t.indexOf(r);t.splice(d,1)}}renderFilters(t,e){let n=null,r=null;const i=new Map,s=()=>{if(!n||!r||0===i.size)return;const e=this.renderPool.takeTexture(n.width,n.height);this.textureReturnBox.push(e),r.apply(this,Array.from(i.values()),e);for(const[n,{outBounds:r}]of i){const i=new y(null);i.transform=n.transform,n.filter.then(i,e.texture,r);const s=t.indexOf(n);t.splice(s,1,...i.renders)}n=null,i.clear()},o=new Map;for(const t of e){const e=t.filter.instance.filter;let n=o.get(e);n||(n=[],o.set(e,n)),n.push(t)}for(const[t,e]of o){r=t;for(const t of e){const{texture:e,bounds:r,instance:o}=t.filter;let a;n&&(a=n.add(r[2],r[3]))||(s(),n=new S(Math.max(M,A(r[2])),Math.max(M,A(r[3]))),a=n.add(r[2],r[3]));const l={instance:o,texture:e,inBounds:r,outBounds:a};i.set(t,l)}s()}}renderObjects(t,e,n,r){var i,s;const o=this.glState.gl,{width:a,height:l}=e.colorAttachment;this.glState.setViewport(0,0,a,l);const u=[],h=[];try{const f=new Map,d=[];for(const e of t){if(!e.transform.renderMask){d.push(e);continue}const t=e.transform.renderMask,n=f.get(t);if(n)c.J.apply(P,e.object.bounds,e.transform.view),c.J.union(n.bounds,n.bounds,P),n.renders.push(e);else{const n=c.J.create();c.J.apply(n,e.object.bounds,e.transform.view),f.set(t,{renders:[e],bounds:n})}}const p=new Map,y=[];for(const[t,{bounds:e,renders:n}]of f){let r=null;for(const t of y){let n=!1;for(const r of t.bounds)if(c.J.intersects(r,e)){n=!0;break}if(!n&&t.nextID<256){r=t;break}}r||(r={target:this.renderPool.takeTexture(a,l),nextID:1,renders:[],bounds:[]},h.push(r.target),y.push(r));const i=r.nextID++;p.set(t,{texture:r.target.texture,id:i}),r.bounds.push(e);for(const t of n)r.renders.push({maskTex:null,maskID:i,render:t})}if(y.length>0){const t=this.renderPool.takeRenderbuffer(a,l);u.push(t);const e=t.framebuffer.ensure(this.glState);this.glState.setClearColor(0,0,0,0);for(const t of y){this.glState.bindFramebuffer(o.FRAMEBUFFER,e),o.clear(o.COLOR_BUFFER_BIT),this.doRenderObjects(t.renders,!0,n);const r=t.target.framebuffer.ensure(this.glState);this.glState.bindFramebuffer(o.READ_FRAMEBUFFER,e),this.glState.bindFramebuffer(o.DRAW_FRAMEBUFFER,r),o.blitFramebuffer(0,0,a,l,0,0,a,l,o.COLOR_BUFFER_BIT,o.NEAREST)}}const v=e.ensure(this.glState);this.glState.bindFramebuffer(o.FRAMEBUFFER,v),r();const m=[];for(const t of d){const e=t.transform.useMask[t.transform.useMask.length-1],n=p.get(e);e&&!n||m.push({maskTex:null!==(i=null==n?void 0:n.texture)&&void 0!==i?i:null,maskID:null!==(s=null==n?void 0:n.id)&&void 0!==s?s:0,render:t})}this.doRenderObjects(m,!1,n)}finally{for(const t of u)this.renderPool.returnRenderbuffer(t);for(const t of h)this.renderPool.returnTexture(t)}}doRenderObjects(t,e,n){const r=this.glState.gl;this.glState.enable(r.BLEND),this.glState.setBlendEquation(r.FUNC_ADD),this.glState.setBlendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA);const i=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5];let u=0,h=0;const f=[g.x.WHITE],d=()=>{if(0===h)return;this.indices.update(this.glState,0,h),this.attributes.update(this.glState,0,14*u);const t=this.glState.bindTextures(f.map((t=>t.ensure(this.glState))));this.textureUnits.fill(t[0]),this.textureUnits.set(t);const e=this.renderProgram.ensure(this.glState);this.renderProgram.uniform(this.glState,"uTextures[0]",this.textureUnits),this.glState.useProgram(e),this.renderVertexArray.bind(this.glState),r.drawElements(r.TRIANGLES,h,r.UNSIGNED_SHORT,0),u=0,h=0,f.length=1},p=this.indices.data,y=this.attrFloat,v=this.attrUint;for(const{render:n,maskTex:r,maskID:m}of t){const{kind:t,vertices:g,indices:b,uvMatrix:_,colors:w}=n.object,k=g.length/2,x=b.length;(u+k>=65536||h+x>=L)&&d();const{view:R,colorMul:S,colorAdd:E}=n.transform,C=this.loadTexture(n.object.texture);let T=f.indexOf(C),M=r?f.indexOf(r):-1;-1===T&&(f.length>=this.glState.maxTextures&&d(),T=f.push(C)-1),r&&-1===M&&(f.length>=this.glState.maxTextures&&(d(),T=f.push(C)-1),M=f.push(r)-1);for(let t=0;t<x;t++)p[h+t]=b[t]+u;const P=n.object.fillMode+4*T;let A=0;e?A=1:m>0&&(A=2+4*M);const D=65536*m+256*A+P,O=14*u,N=R[0],F=R[1],B=R[2],I=R[3],j=R[4],U=R[5],V=_[0],G=_[1],H=_[2],K=_[3],z=_[4],q=_[5],W=S[0],X=S[1],Y=S[2],J=S[3],Z=E[0]/255,Q=E[1]/255,$=E[2]/255,tt=E[3]/255;for(let t=0;t<k;t++){const e=g[2*t],n=g[2*t+1],r=w[t];let u=N*e+B*n+j,h=F*e+I*n+U;y[O+14*t+0]=i*u+o*h+l,y[O+14*t+1]=s*u+a*h+c,y[O+14*t+2]=V*e+H*n+z,y[O+14*t+3]=G*e+K*n+q,v[O+14*t+4]=r,y[O+14*t+5]=W,y[O+14*t+6]=X,y[O+14*t+7]=Y,y[O+14*t+8]=J,y[O+14*t+9]=Z,y[O+14*t+10]=Q,y[O+14*t+11]=$,y[O+14*t+12]=tt,v[O+14*t+13]=D}u+=k,h+=x}d()}}class O{constructor(t){this.fps=t,this.onFrame=new v,this.onRender=new v,this.channel=new MessageChannel,this.lastTimestamp=0,this.needRender=!1,this._onFrame=()=>{try{this.onFrame.emit()}catch(t){console.error(t)}this.needRender=!0},this._onRender=t=>{const e=this.lastTimestamp;if(t-e>=this.targetMS&&(this.lastTimestamp=t-(t-e)%this.targetMS,this.channel.port2.postMessage(null)),this.needRender){try{this.onRender.emit()}catch(t){console.error(t)}this.needRender=!1}this.animationHandle=requestAnimationFrame(this._onRender)},this.targetMS=1e3/t}begin(){this.end(),this.channel.port1.onmessage=()=>{this._onFrame()},this.animationHandle=requestAnimationFrame(this._onRender)}end(){null!=this.animationHandle&&(cancelAnimationFrame(this.animationHandle),this.animationHandle=void 0),this.channel.port1.onmessage=null}}var N=n(6375),F=n(8281),B=n(570),I=n(1049),j=n(5723),U=n(8682),V=n(8433);const G=r.Ue();class H extends i._{constructor(t){super(),this.__audio=new N.e,this.__displayListDirty=!1,this.__displayList=[],this.__initQueue=[],this.__constructionQueue=[],this.__mousePosition=r.Ue(),this.__mouseOn=null,this.__mouseTrackTarget=null,this.focus=null,this.__quality="HIGH",this.__isDisposed=!1,this.__isActiveValue=!0,this.__onFrame=this.__withContext((()=>{this.__isActiveValue&&((0,V.E)(!0,this),this.__updateCursor())})),this.__doRender=this.__withContext((()=>{this.__isActiveValue&&(this.__onRender(),this.__renderer.renderFrame(this.__node),this.__renderer.blitFrame())})),this.__handleMouseEvent=this.__withContext((t=>{if(!this.__isActiveValue)return;this.__canvas.resolveCoords(this.__mousePosition,t.clientX,t.clientY);let e=this.__hitTestObject(this.__mousePosition);const n=(e,n)=>{if(!n)return;n.__globalToLocal(G,this.__mousePosition,!1);const r=new I.T(e,!0,!1);r.buttonDown=0!==t.buttons,r.localX=G[0],r.localY=G[1],r.stageX=this.__mousePosition[0],r.stageY=this.__mousePosition[1],n.dispatchEvent(r)};switch(this.__mouseTrackTarget&&(this.__mouseTrackTarget.stage!==this&&(this.__mouseTrackTarget=null),e=this.__mouseTrackTarget),"mouseleave"===t.type&&(e=null),this.__mouseOn!==e&&(n(I.T.MOUSE_OUT,this.__mouseOn),this.__mouseOn=e,n(I.T.MOUSE_OVER,this.__mouseOn)),t.type){case"mousemove":n(I.T.MOUSE_MOVE,this.__mouseOn);break;case"mousedown":n(I.T.MOUSE_DOWN,this.__mouseOn);break;case"mouseup":n(I.T.MOUSE_UP,this.__mouseOn);break;case"click":n(I.T.CLICK,this.__mouseOn)}})),this.__updateCursor=()=>{this.__mouseOn&&this.__isActiveValue?this.__canvas.cursor=this.__mouseOn.__isPointerCursor?"pointer":"default":this.__canvas.cursor="default"},this.__handleKeyboardEvent=this.__withContext((t=>{var e,n;if(!this.__isActiveValue)return;const r=null!==(e=U.N.codeMap[t.key])&&void 0!==e?e:U.N.codeMap[t.code];if(!r)return;let i;switch(t.type){case"keydown":i=new j._(j._.KEY_DOWN,!0,!1);break;case"keyup":i=new j._(j._.KEY_UP,!0,!1);break;default:return}i.keyCode=r,(null!==(n=this.focus)&&void 0!==n?n:this).dispatchEvent(i)})),this.__handleFocusEvent=this.__withContext((t=>{if(!this.__isActiveValue)return;let e;switch(t.type){case"blur":e=new F.j(F.j.DEACTIVATE,!0,!1);break;default:return}this.dispatchEvent(e)}));let e=60,n=0,i=600,s=400;t&&(({width:i,height:s,backgroundColor:n,fps:e}=t),i/=20,s/=20),this.__canvas=new o(i,s),this.__renderer=new D(this.__canvas),this.__renderer.backgroundColor=n,this.__ticker=new O(e),this.__ticker.onFrame.subscribe(this.__onFrame),this.__ticker.onRender.subscribe(this.__doRender),this.__ticker.begin();const a=this.__canvas.element;a.addEventListener("mouseenter",this.__handleMouseEvent),a.addEventListener("mousemove",this.__handleMouseEvent),a.addEventListener("mousedown",this.__handleMouseEvent),a.addEventListener("mouseup",this.__handleMouseEvent),a.addEventListener("mouseleave",this.__handleMouseEvent),a.addEventListener("click",this.__handleMouseEvent),a.addEventListener("keydown",this.__handleKeyboardEvent),a.addEventListener("keyup",this.__handleKeyboardEvent),a.addEventListener("blur",this.__handleFocusEvent)}get __isActive(){return this.__isActiveValue}set __isActive(t){if(this.__isDisposed)throw new Error("Stage is disposed");this.__isActiveValue!==t&&(this.__isActiveValue=t,t?this.__audio.context.resume():this.__audio.context.suspend(),this.__updateCursor())}get loaderInfo(){return{bytesTotal:100,bytesLoaded:100,url:window.location.href}}get stage(){return this}get quality(){return this.__quality}set quality(t){this.__quality!==t&&(this.__quality=t,"HIGH"===this.__quality?this.__renderer.glState.sampleLimit=4:this.__renderer.glState.sampleLimit=0,this.__renderer.glState.resetRenderState(),this.__onRender(),this.__renderer.renderFrame(this.__node))}__withContext(t){return(...e)=>{const n=H.__current,r=B.p.__eventContext;H.__current=this,B.p.__eventContext=this;try{return t(...e)}finally{H.__current=n,B.p.__eventContext=r}}}__dispose(){this.__isActive=!1,this.__audio.context.close(),this.__renderer.glState.dispose(),this.__ticker.end();const t=this.__canvas.element;t.removeEventListener("mouseenter",this.__handleMouseEvent),t.removeEventListener("mousemove",this.__handleMouseEvent),t.removeEventListener("mousedown",this.__handleMouseEvent),t.removeEventListener("mouseup",this.__handleMouseEvent),t.removeEventListener("mouseleave",this.__handleMouseEvent),t.removeEventListener("click",this.__handleMouseEvent),t.removeEventListener("keydown",this.__handleKeyboardEvent),t.removeEventListener("keyup",this.__handleKeyboardEvent),t.removeEventListener("blur",this.__handleFocusEvent),this.__isDisposed=!0}__hitTestObject(t){this.__node.ensureLayout();const e=n=>{if(!(n instanceof i._))return n;const r=n.__children;let o=!1;for(let n=r.length-1;n>=0;n--){const i=r[n];if(i.visible&&i.__node.hitTest(t,!1))if(i instanceof s.D){const t=e(i);if(t)return t}else o=!0}return o?n:null};return e(this)}__ensureDisplayList(){if(!this.__displayListDirty)return;this.__displayList.length=1,this.__displayList[0]=this;let t=0;for(;t<this.__displayList.length;){const e=this.__displayList[t].__node.children;for(let t=0;t<e.length;t++)e[t].object&&this.__displayList.push(e[t].object);t++}this.__displayListDirty=!1}}H.__current=null},8433:(t,e,n)=>{"use strict";n.d(e,{s:()=>o,E:()=>a});var r=n(8281),i=n(570);const s=[];function o(t){s.push(t)}function a(t,e){e.__ensureDisplayList();const n=new Set([...e.__displayList,...e.__initQueue]);e.__initQueue.length=0;for(const r of n)r.__initFrame(e,t);for(t&&i.p.__broadcastDispatcher.dispatchEvent(new r.j(r.j.ENTER_FRAME,!1,!1));e.__constructionQueue.length>0;){const t=e.__constructionQueue.slice();e.__constructionQueue.length=0;for(const e of t)e.__constructFrame()}const o=s.slice();s.length=0;for(const t of o)t()}},7760:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Bitmap:()=>S,BitmapData:()=>x,DisplayObject:()=>r.s,DisplayObjectContainer:()=>i._,InteractiveObject:()=>s.D,Loader:()=>E,MorphShape:()=>a.W,MovieClip:()=>c.K,Shape:()=>o.b,SimpleButton:()=>p,Sprite:()=>l.j,Stage:()=>u.H});var r=n(2640),i=n(581),s=n(8077),o=n(2738),a=n(2120),l=n(6300),c=n(3855),u=n(5511),h=n(2166),f=n(2741),d=n(1719);class p extends s.D{constructor(){var t,e;super(),this.__soundContext=new d.$,this.__state=h.B.Up,this.trackAsMenu=!1,this.useHandCursor=!0,this.__handleMouseEvent=t=>{var e,n;let r=this.__state,i=t.type!==f.MouseEvent.MOUSE_OUT&&t.buttonDown;r=t.type===f.MouseEvent.MOUSE_OUT?h.B.Up:t.buttonDown&&this.hitTestPoint(t.stageX,t.stageY)?h.B.Down:h.B.Over;const s=this.stage;if(this.__state!==r){const t=this.__state;this.__state=r,this.__node.buttonState=r,null===(e=this.__character)||void 0===e||e.instantiateState(this,r),null===(n=this.__character)||void 0===n||n.stateTransition(this,t,r),s&&(s.__displayListDirty=!0)}!this.trackAsMenu&&s&&(i?s.__mouseTrackTarget=this:s.__mouseTrackTarget===this&&(s.__mouseTrackTarget=null))},this.__state=h.B.Up,this.__states=[new r.s,new r.s,new r.s,new r.s];for(const t of this.__states)t.__node.setParent(this.__node,this.__node.children.length);this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null,null===(e=this.__character)||void 0===e||e.applyTo(this),this.__node.buttonState=this.__state,this.addEventListener(f.MouseEvent.MOUSE_OVER,this.__handleMouseEvent),this.addEventListener(f.MouseEvent.MOUSE_OUT,this.__handleMouseEvent),this.addEventListener(f.MouseEvent.MOUSE_DOWN,this.__handleMouseEvent),this.addEventListener(f.MouseEvent.MOUSE_UP,this.__handleMouseEvent),this.addEventListener(f.MouseEvent.MOUSE_MOVE,this.__handleMouseEvent)}get __activeState(){switch(this.__state){case h.B.Up:return this.upState;case h.B.Over:return this.overState;case h.B.Down:return this.downState}}get upState(){return this.__states[h.B.Up]}set upState(t){this.__states[h.B.Up].__node.setParent(null,0),this.__states[h.B.Up]=t,t.__node.setParent(this.__node,h.B.Up)}get overState(){return this.__states[h.B.Over]}set overState(t){this.__states[h.B.Over].__node.setParent(null,0),this.__states[h.B.Over]=t,t.__node.setParent(this.__node,h.B.Over)}get downState(){return this.__states[h.B.Down]}set downState(t){this.__states[h.B.Down].__node.setParent(null,0),this.__states[h.B.Down]=t,t.__node.setParent(this.__node,h.B.Down)}get hitTestState(){return this.__states[h.B.HitTest]}set hitTestState(t){this.__states[h.B.HitTest].__node.setParent(null,0),this.__states[h.B.HitTest]=t,t.__node.setParent(this.__node,h.B.HitTest)}get __isPointerCursor(){return this.useHandCursor||super.__isPointerCursor}}var y=n(2526),v=n(4945),m=n(7964),g=n(2942),b=n(230),_=n(8671),w=n(1645),k=n(8513);class x extends m.i{constructor(t,e,n=!0,r=4294967295){super(),this.width=t,this.height=e,this.transparent=n,this.fillColor=r,this.__root=new b.B(null),this.__needRender=!1,this.__needPixel=!1,this.__pixels=null,this.__target=null,this.__renderer=null,this.rect=new g.A(0,0,t,e)}draw(t,e,n,r){const i=t.__node.clone();i.visible=!0,e?e.__toMat2d(i.transformLocal):y.yR(i.transformLocal),n?(v.JG(i.colorTransformLocalMul,n.__mul),v.JG(i.colorTransformLocalAdd,n.__add)):(v.t8(i.colorTransformLocalMul,1,1,1,1),v.t8(i.colorTransformLocalAdd,0,0,0,0)),i.setParent(this.__root,this.__root.children.length),this.__needRender=!0}colorTransform(t,e){this.__render();const n=this.__target;this.__target=null;try{const{x:r,y:i,width:s,height:o}=t,a=(t,r)=>{if(t[2]<=0||t[3]<=0)return;const i=new b.B(null);i.setRenderObjects([w.r.rect(t,n.texture,{invertY:!1,scale:k.JN})],_.J.fromValues(0,0,(0,k.E_)(t[2]),(0,k.E_)(t[3]))),y.vc(i.transformLocal,[(0,k.E_)(t[0]),(0,k.E_)(t[1])]),r&&(v.JG(i.colorTransformLocalMul,e.__mul),v.JG(i.colorTransformLocalAdd,e.__add)),i.setParent(this.__root,this.__root.children.length)};a(_.J.fromValues(0,0,this.width,i),!1),a(_.J.fromValues(0,i,r,o),!1),a(_.J.fromValues(r,i,s,o),!0),a(_.J.fromValues(r+s,i,this.width-(r+s),o),!1),a(_.J.fromValues(0,i+o,this.width,this.height-(i+o)),!1),this.__render()}finally{this.__renderer.renderPool.returnTexture(n)}}getPixel32(t,e){if(this.__render(),this.__needPixel||!this.__pixels){this.__pixels||(this.__pixels=new Uint32Array(this.width*this.height));const t=this.__renderer.glState,e=t.gl,n=this.__target.framebuffer.ensure(t);t.bindFramebuffer(e.READ_FRAMEBUFFER,n);const r=new Uint8Array(this.__pixels.buffer);e.readPixels(0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,r),this.__needPixel=!1}const n=Math.trunc(t),r=this.height-Math.trunc(e);if(n<0||r<0||n>this.width||r>this.height)return 0;const i=n+(this.height-r)*this.width,s=this.__pixels[i];return 16777216*(s>>>24&255)+65536*(s>>>0&255)+256*(s>>>8&255)+1*(s>>>16&255)}lock(){}unlock(){}copyPixels(t,e,n){this.__render(),t.__render();const r=this.__renderer.glState,i=r.gl,s=t.__target,o=this.__target,a=e.x,l=e.y,c=n.x,u=n.y,h=s.framebuffer.ensure(r),f=o.framebuffer.ensure(r);r.bindFramebuffer(i.READ_FRAMEBUFFER,h),r.bindFramebuffer(i.DRAW_FRAMEBUFFER,f),i.blitFramebuffer(a,l,a+e.width,l+e.height,c,u,c+e.width,u+e.height,i.COLOR_BUFFER_BIT,i.NEAREST)}scroll(t,e){this.__render();const n=this.__target,r=this.__renderer;this.__target=r.renderPool.takeTexture(this.width,this.height);try{const i=n.framebuffer,s=this.__target.framebuffer,o=this.__renderer.glState,a=o.gl,l=i.ensure(o),c=s.ensure(o);o.bindFramebuffer(a.READ_FRAMEBUFFER,l),o.bindFramebuffer(a.DRAW_FRAMEBUFFER,c),a.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,a.COLOR_BUFFER_BIT,a.NEAREST),a.blitFramebuffer(0,0,this.width,this.height,t,e,t+this.width,e+this.height,a.COLOR_BUFFER_BIT,a.NEAREST)}finally{r.renderPool.returnTexture(n)}}dispose(){var t;this.__target&&(null===(t=this.__renderer)||void 0===t||t.renderPool.returnTexture(this.__target),this.__target=null),this.__needRender=!0}__render(){if(this.__target&&!this.__needRender)return;if(!this.__renderer){if(!u.H.__current)throw new Error("No stage in context");this.__renderer=u.H.__current.__renderer}let t=()=>{};if(!this.__target){const e=this.__renderer.glState;this.__target=this.__renderer.renderPool.takeTexture(this.width,this.height),t=()=>{e.setClearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT)}}const e=this.__renderer.renderPool.takeRenderbuffer(this.width,this.height);try{const n=this.__renderer.glState,r=n.gl;this.__renderer.renderNode(this.__root,e.framebuffer,this.width,this.height,t,!1);const i=e.framebuffer.ensure(n),s=this.__target.framebuffer.ensure(n);n.bindFramebuffer(r.READ_FRAMEBUFFER,i),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,s),r.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,r.COLOR_BUFFER_BIT,r.NEAREST),this.__root.onRemoveFromStage(),this.__root=new b.B(null),this.__needRender=!1,this.__needPixel=!0}finally{this.__renderer.renderPool.returnRenderbuffer(e)}}}var R=n(1552);class S extends r.s{constructor(t){super(),this.bitmapData=t;const{width:e,height:n}=this.bitmapData,r=_.J.fromValues(0,0,e,n);this.__node.setRenderObjects([w.r.rect(r,R.x.WHITE,{texWidth:e,texHeight:n,scale:k.JN,invertY:!1})],r)}__onRender(){super.__onRender(),this.bitmapData.__render(),this.bitmapData.__target&&(this.__node.renderObjects[0].texture=this.bitmapData.__target.texture)}}class E extends i._{}},8281:(t,e,n)=>{"use strict";n.d(e,{j:()=>r});class r{constructor(t,e=!1,n=!1){this.type=t,this.bubbles=e,this.cancelable=n}formatToString(t,...e){return`${t}(${e.map((t=>this[t])).join(", ")})`}}r.ENTER_FRAME="ENTER_FRAME",r.ADDED_TO_STAGE="ADDED_TO_STAGE",r.REMOVED_FROM_STAGE="REMOVED_FROM_STAGE",r.SOUND_COMPLETE="SOUND_COMPLETE",r.DEACTIVATE="DEACTIVATE"},570:(t,e,n)=>{"use strict";n.d(e,{p:()=>c});var r,i=n(7964),s=n(8281);const o=Symbol(),a=[s.j.ENTER_FRAME],l=new WeakMap;class c extends i.i{constructor(){super(...arguments),this[r]=!1,this.__eventParent=null,this.__captureListeners=new Map,this.__bubbleListeners=new Map,this.__dispatchEvent=(t,e)=>{let n;n=e?this.__captureListeners:this.__bubbleListeners;for(const{listener:e}of n.get(t.type)||[])e(t)}}static get __broadcastDispatcher(){if(!this.__eventContext)throw new Error("Event context not present");let t=l.get(this.__eventContext);return t||(t=new c,t[o]=!0,l.set(this.__eventContext,t)),t}__setEventParent(t){this.__eventParent=t}addEventListener(t,e,n=!1,r=0,i=!1){if(a.includes(t)&&!this[o])return void c.__broadcastDispatcher.addEventListener(t,e,n,r,i);let s;s=n?this.__captureListeners:this.__bubbleListeners;const l=s.get(t)||[];if(l.find((t=>t.listener===e)))return;const u=[...l,{priority:r,listener:e}];u.sort(((t,e)=>e.priority-t.priority)),s.set(t,u)}removeEventListener(t,e,n=!1,r=0,i=!1){if(a.includes(t)&&!this[o])return void c.__broadcastDispatcher.removeEventListener(t,e,n,r,i);let s;s=n?this.__captureListeners:this.__bubbleListeners;const l=s.get(t)||[],u=l.filter((t=>t.listener!==e));u.length!==l.length&&s.set(t,u)}dispatchEvent(t){if(t.target=this,!t.bubbles)return t.currentTarget=this,void this.__dispatchEvent(t,!1);const e=[this];let n=this;for(;n&&n.__eventParent;)n=n.__eventParent,e.push(n);for(let n=e.length-1;n>0;n--)t.currentTarget=e[n],e[n].__dispatchEvent(t,!0);for(let n=0;n<e.length;n++)t.currentTarget=e[n],e[n].__dispatchEvent(t,!1)}}r=o,c.__eventContext=null},5723:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(8281);class i extends r.j{constructor(){super(...arguments),this.keyCode=0}}i.KEY_DOWN="KEY_DOWN",i.KEY_UP="KEY_UP"},1049:(t,e,n)=>{"use strict";n.d(e,{T:()=>i});var r=n(8281);class i extends r.j{constructor(){super(...arguments),this.buttonDown=!1,this.localX=0,this.localY=0,this.stageX=0,this.stageY=0}}i.CLICK="click",i.MOUSE_DOWN="mouseDown",i.MOUSE_MOVE="mouseMove",i.MOUSE_OUT="mouseOut",i.MOUSE_OVER="mouseOver",i.MOUSE_UP="mouseUp"},2741:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ErrorEvent:()=>c,Event:()=>r.j,EventDispatcher:()=>i.p,FocusEvent:()=>f,IOErrorEvent:()=>u,KeyboardEvent:()=>a._,MouseEvent:()=>s.T,SecurityErrorEvent:()=>h,TextEvent:()=>l,TimerEvent:()=>o});var r=n(8281),i=n(570),s=n(1049);class o extends r.j{}var a=n(5723);class l extends r.j{constructor(){super(...arguments),this.text=""}}class c extends l{}class u extends c{}u.IO_ERROR="IO_ERROR";class h extends c{}h.SECURITY_ERROR="SECURITY_ERROR";class f extends r.j{}},9793:(t,e,n)=>{"use strict";n.d(e,{l:()=>r});class r{}},8051:(t,e,n)=>{"use strict";n.d(e,{T:()=>f});var r=n(9793),i=n(5543),s=n(1215),o=n(2526),a=n(2550);const l=o.Ue(),c=i.Ue(),u=i.Ue();class h{isEffective(t){return t.blurX>0||t.blurY>0}apply(t,e,n){const r=t.glState,o=r.gl,{width:h,height:f}=n.texture;(0,a.CJ)(l,h,f,!1),i.t8(u,1/h,1/f),r.setViewport(0,0,h,f),r.disable(o.BLEND),r.setClearColor(0,0,0,0);const d=t.renderPool.takeTexture(h,f),p=t.renderPool.takeTexture(h,f);try{const a=[];let h=0,f=null,y=null;const v=()=>{if(!f||!y)return;const t=(0,s.$_)(h),e=a.length;s.Qb.update(r,0,4*e*17);let i=d,l=p;for(let a=0;a<2*y;a++){let c=i,u=l.texture,h=a%2;0===a?(u=f,h+=2):a===2*y-1&&(c=n);const d=c.framebuffer.ensure(r);r.bindFramebuffer(o.FRAMEBUFFER,d);const p=t.ensure(r);s.BR.ensure(r),u.ensure(r),r.useProgram(p);const v=r.bindTextures([u.ensure(r)])[0];t.uniform(r,"uTexture",v),t.uniform(r,"uMode",h),s.BR.bind(r),o.drawElements(o.TRIANGLES,6*e,o.UNSIGNED_SHORT,0);let m=l;l=i,i=m}a.length=0,y=null,f=null};for(const t of e){t.texture===f&&t.instance.passes===y||(v(),f=t.texture,y=t.instance.passes,i.t8(c,1/f.width,1/f.height));const e=t.instance.blurX/2,n=t.instance.blurY/2;h=Math.max(h,e,n);let r=4*a.length*17;for(let o=0;o<4;o++){switch(s.t9[r+0]=e,s.t9[r+1]=n,o){case 0:s.t9[r+2]=t.outBounds[0]+t.outBounds[2],s.t9[r+3]=t.outBounds[1],s.t9[r+4]=t.inBounds[0]+t.inBounds[2],s.t9[r+5]=t.inBounds[1],s.t9[r+6]=t.outBounds[0]+t.outBounds[2],s.t9[r+7]=t.outBounds[1];break;case 1:s.t9[r+2]=t.outBounds[0],s.t9[r+3]=t.outBounds[1]+t.outBounds[3],s.t9[r+4]=t.inBounds[0],s.t9[r+5]=t.inBounds[1]+t.inBounds[3],s.t9[r+6]=t.outBounds[0],s.t9[r+7]=t.outBounds[1]+t.outBounds[3];break;case 2:s.t9[r+2]=t.outBounds[0],s.t9[r+3]=t.outBounds[1],s.t9[r+4]=t.inBounds[0],s.t9[r+5]=t.inBounds[1],s.t9[r+6]=t.outBounds[0],s.t9[r+7]=t.outBounds[1];break;case 3:s.t9[r+2]=t.outBounds[0]+t.outBounds[2],s.t9[r+3]=t.outBounds[1]+t.outBounds[3],s.t9[r+4]=t.inBounds[0]+t.inBounds[2],s.t9[r+5]=t.inBounds[1]+t.inBounds[3],s.t9[r+6]=t.outBounds[0]+t.outBounds[2],s.t9[r+7]=t.outBounds[1]+t.outBounds[3]}s.t9[r+8]=t.inBounds[0]+.5,s.t9[r+9]=t.inBounds[1]+.5,s.t9[r+10]=t.inBounds[0]+t.inBounds[2]-1.5,s.t9[r+11]=t.inBounds[1]+t.inBounds[3]-1.5,s.t9[r+12]=t.outBounds[0]+.5,s.t9[r+13]=t.outBounds[1]+.5,s.t9[r+14]=t.outBounds[0]+t.outBounds[2]-1.5,s.t9[r+15]=t.outBounds[1]+t.outBounds[3]-1.5;const a=s.t9.subarray(r+0,r+2),h=s.t9.subarray(r+2,r+4),f=s.t9.subarray(r+4,r+6),d=s.t9.subarray(r+6,r+8),p=s.t9.subarray(r+8,r+10),y=s.t9.subarray(r+10,r+12),v=s.t9.subarray(r+12,r+14),m=s.t9.subarray(r+14,r+16);i.dC(a,a,c),i.iu(h,h,l),i.dC(f,f,c),i.dC(p,p,c),i.dC(y,y,c),i.dC(d,d,u),i.dC(v,v,u),i.dC(m,m,u),r+=17}a.push(t)}v()}finally{t.renderPool.returnTexture(d),t.renderPool.returnTexture(p)}}}h.instance=new h;class f extends r.l{constructor(t=4,e=4,n=1){super(),this.blurX=t,this.blurY=e,this.quality=n}get __filter(){return{filter:h.instance,paddings:i.al(this.blurX,this.blurY),blurX:this.blurX,blurY:this.blurY,passes:this.quality}}}},3633:(t,e,n)=>{"use strict";n.d(e,{p:()=>o});var r=n(5543),i=n(9793),s=n(1788);class o extends i.l{constructor(){super(...arguments),this.blurX=0,this.blurY=0,this.quality=3,this.color=16777215,this.strength=1,this.angle=45,this.distance=4,this.knockout=!1,this.hideObject=!1,this.inner=!1}get __filter(){return{filter:s.p.instance,paddings:r.al(this.blurX+this.distance,this.blurY+this.distance),blurX:this.blurX,blurY:this.blurY,passes:this.quality,color:this.color,strength:this.strength,angle:this.angle*Math.PI/180,distance:this.distance,knockout:this.knockout}}}},1151:(t,e,n)=>{"use strict";n.d(e,{J:()=>i});var r=n(4945);class i{constructor(t=1,e=1,n=1,i=1,s=0,o=0,a=0,l=0){this.__mul=r.al(t,e,n,i),this.__add=r.al(s,o,a,l)}get redMultiplier(){return this.__mul[0]}set redMultiplier(t){this.__mul[0]=t}get greenMultiplier(){return this.__mul[1]}set greenMultiplier(t){this.__mul[1]=t}get blueMultiplier(){return this.__mul[2]}set blueMultiplier(t){this.__mul[2]=t}get alphaMultiplier(){return this.__mul[3]}set alphaMultiplier(t){this.__mul[3]=t}get redOffset(){return this.__add[0]}set redOffset(t){this.__add[0]=t}get greenOffset(){return this.__add[1]}set greenOffset(t){this.__add[1]=t}get blueOffset(){return this.__add[2]}set blueOffset(t){this.__add[2]=t}get alphaOffset(){return this.__add[3]}set alphaOffset(t){this.__add[3]=t}set color(t){this.__add[0]=t>>>16&255,this.__add[1]=t>>>8&255,this.__add[2]=t>>>0&255,this.__mul[0]=0,this.__mul[1]=0,this.__mul[2]=0}}},7562:(t,e,n)=>{"use strict";n.d(e,{y:()=>i});var r=n(9378);class i{constructor(t=1,e=0,n=0,r=1,i=0,s=0){this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=s}translate(t,e){this.tx+=t,this.ty+=e}scale(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.tx*=t,this.ty*=e}rotate(t){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=this.ty,a=Math.sin(t),l=Math.cos(t);this.a=e*a-n*l,this.b=e*l+n*a,this.c=r*a-i*l,this.d=r*l+i*a,this.tx=s*a-o*l,this.ty=s*l+o*a}__fromMat2d(t){this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.tx=t[4]/20,this.ty=t[5]/20}__toMat2d(t){t[0]=(0,r.rK)(this.a),t[1]=(0,r.rK)(this.b),t[2]=(0,r.rK)(this.c),t[3]=(0,r.rK)(this.d),t[4]=Math.trunc(20*this.tx),t[5]=Math.trunc(20*this.ty)}}},7069:(t,e,n)=>{"use strict";n.d(e,{E:()=>i});var r=n(5543);class i{constructor(t=0,e=0){this.__value=r.Ue(),r.t8(this.__value,t,e)}get x(){return this.__value[0]}set x(t){this.__value[0]=t}get y(){return this.__value[1]}set y(t){this.__value[1]=t}}},2942:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});class r{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.width=n,this.height=r}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}}r.__empty=new r},8745:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(4945),i=n(7562),s=n(1151),o=n(2550);class a{constructor(){this.__node=null,this.__matrix=new i.y,this.__colorTransform=new s.J}__setNode(t){this.__node=t,this.matrix=this.__matrix,this.colorTransform=this.__colorTransform}get matrix(){return this.__matrix}set matrix(t){var e;this.__matrix=t,this.__node&&(t.__toMat2d(this.__node.transformLocal),(null===(e=this.__node)||void 0===e?void 0:e.object)&&(this.__node.object.__scaleSkews=(0,o.q_)(this.__node.transformLocal)),this.__node.markLayoutDirty())}get colorTransform(){return this.__colorTransform}set colorTransform(t){this.__colorTransform=t,this.__node&&(r.JG(this.__node.colorTransformLocalMul,t.__mul),r.JG(this.__node.colorTransformLocalAdd,t.__add))}}},1719:(t,e,n)=>{"use strict";n.d(e,{$:()=>r});class r{constructor(){this.soundChannels=new Map}syncSound(t,e,n){var r;if((n.syncNoMultiple||n.syncStop)&&(null===(r=this.soundChannels.get(e))||void 0===r||r.stop(),this.soundChannels.delete(e)),n.syncStop)return;const i=t.instantiateCharacter(e);let s=0,o=1;null!=n.inPoint&&(s=n.inPoint/i.__character.audio.sampleRate*1e3),null!=n.loopCount&&(o=n.loopCount);const a=i.play(s,o);this.soundChannels.set(e,a)}stopSound(t){var e;null===(e=this.soundChannels.get(t))||void 0===e||e.stop()}}},23:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Sound:()=>l,SoundChannel:()=>s,SoundMixer:()=>c,SoundTransform:()=>o});var r=n(570),i=n(8281);class s extends r.p{constructor(t,e,n,r,s){super(),this.isStopped=!1,this.__context=t.__audio.context,this.__audioNode=this.__context.createBufferSource(),this.__volumeNode=this.__context.createGain(),this.__audioNode.buffer=e,this.__audioNode.connect(this.__volumeNode),this.__volumeNode.connect(t.__audio.rootNode),this.__soundTransform=n,this.__soundTransform.__source=this,this.__updateSoundTransform();const o=this.__context.currentTime;this.__beginTime=o-r,this.__duration=e.duration,this.__audioNode.loop=!0,this.__audioNode.loopStart=0,this.__audioNode.start(o,r),this.__audioNode.stop(this.__beginTime+Math.min(Math.max(1,s)*this.__duration,1e6)),this.__audioNode.onended=t.__withContext((()=>{this.__volumeNode.disconnect(),this.__audioNode.disconnect(),this.isStopped||this.dispatchEvent(new i.j(i.j.SOUND_COMPLETE,!1,!1)),this.__audioNode.onended=null}))}get soundTransform(){return this.__soundTransform}set soundTransform(t){this.__soundTransform.__source=null,this.__soundTransform=t,this.__soundTransform.__source=this,this.__updateSoundTransform()}get position(){return(this.__context.currentTime-this.__beginTime)%this.__duration*1e3}stop(){this.isStopped=!0,this.__audioNode.stop()}__updateSoundTransform(){this.__volumeNode.gain.setValueAtTime(this.__soundTransform.volume,this.__context.currentTime)}}class o{constructor(t=1){this.__source=null,this.__volume=t}get volume(){return this.__volume}set volume(t){var e;this.__volume=t,null===(e=this.__source)||void 0===e||e.__updateSoundTransform()}}var a=n(5511);class l extends r.p{constructor(){var t;super(),this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null}get length(){var t,e;return 1e3*(null!==(e=null===(t=this.__character)||void 0===t?void 0:t.audio.duration)&&void 0!==e?e:0)}play(t=0,e=0,n=null){if(!this.__character)throw new Error("Sound character not exist");if(!a.H.__current)throw new Error("No stage in context");return new s(a.H.__current,this.__character.audio,null!=n?n:new o,t/1e3,e)}}class c{static get soundTransform(){return c.__soundTransform}static set soundTransform(t){c.__soundTransform.__source=null,c.__soundTransform=t,c.__soundTransform.__source=c,c.__updateSoundTransform()}static stopAll(){if(!a.H.__current)throw new Error("No stage in context");a.H.__current.__audio.reset(),c.__updateSoundTransform()}static __updateSoundTransform(){if(!a.H.__current)throw new Error("No stage in context");a.H.__current.__audio.rootNode.gain.setValueAtTime(this.soundTransform.volume,a.H.__current.__audio.context.currentTime)}}c.__soundTransform=new o},3441:(t,e,n)=>{"use strict";n.d(e,{V:()=>i});var r=n(2640);class i extends r.s{constructor(){var t,e;super(),this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null,null===(e=this.__character)||void 0===e||e.applyTo(this)}}},7264:(t,e,n)=>{"use strict";n.d(e,{S:()=>i});var r=n(313);class i{constructor(){this.align=r.O.LEFT,this.bold=!1,this.italic=!1,this.color=0,this.font="Times New Roman",this.size=12,this.leading=0}__clone(){const t=new i;return t.align=this.align,t.bold=this.bold,t.italic=this.italic,t.color=this.color,t.font=this.font,t.size=this.size,t.leading=this.leading,t}}},313:(t,e,n)=>{"use strict";var r;n.d(e,{O:()=>r}),function(t){t.CENTER="center",t.END="end",t.JUSTIFY="justify",t.LEFT="left",t.RIGHT="right",t.START="start"}(r||(r={}))},2389:(t,e,n)=>{"use strict";n.r(e),n.d(e,{StaticText:()=>i.V,TextField:()=>l,TextFieldType:()=>r,TextFormat:()=>c.S,TextFormatAlign:()=>u.O});var r,i=n(3441),s=n(9956),o=n(230),a=n(8077);!function(t){t.DYNAMIC="dynamic",t.INPUT="input"}(r||(r={}));class l extends a.D{constructor(){var t,e;super(),this.__internalNode=new o.B(null),this.__container=new s.W(this.__internalNode),this.type=r.DYNAMIC,this.selectable=!0,this.__character=null!==(t=this.constructor.__character)&&void 0!==t?t:null,null===(e=this.__character)||void 0===e||e.applyTo(this),this.__internalNode.setParent(this.__node,0)}get wordWrap(){return this.__container.wordWrap}set wordWrap(t){this.__container.wordWrap=t}get multiline(){return this.__container.multiline}set multiline(t){this.__container.multiline=t}get defaultTextFormat(){return this.__container.defaultTextFormat}set defaultTextFormat(t){this.__container.defaultTextFormat=t}get textColor(){return this.__container.defaultTextFormat.color}set textColor(t){this.__container.defaultTextFormat.color=t}get text(){return this.__container.text}set text(t){this.__container.text=t}get htmlText(){return this.__container.htmlText}set htmlText(t){this.__container.htmlText=t}__onRender(){super.__onRender();const t=this.__node.transformWorld[0]/this.__node.transformWorld[3];t&&this.__container.layoutScale!==t&&(this.__container.layoutScale=t,this.__internalNode.transformLocal[0]=1/t,this.__container.layout())}}var c=n(7264),u=n(313)},8682:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});class r{}r.NUMBER_0=48,r.NUMBER_1=49,r.NUMBER_2=50,r.NUMBER_3=51,r.NUMBER_4=52,r.NUMBER_5=53,r.NUMBER_6=54,r.NUMBER_7=55,r.NUMBER_8=56,r.NUMBER_9=57,r.A=65,r.B=66,r.C=67,r.D=68,r.E=69,r.F=70,r.G=71,r.H=72,r.I=73,r.J=74,r.K=75,r.L=76,r.M=77,r.N=78,r.O=79,r.P=80,r.Q=81,r.R=82,r.S=83,r.T=84,r.U=85,r.V=86,r.W=87,r.X=88,r.Y=89,r.Z=90,r.SEMICOLON=186,r.EQUAL=187,r.COMMA=188,r.MINUS=189,r.PERIOD=190,r.SLASH=191,r.BACKQUOTE=192,r.LEFTBRACKET=219,r.BACKSLASH=220,r.RIGHTBRACKET=221,r.QUOTE=222,r.ALTERNATE=18,r.BACKSPACE=8,r.CAPS_LOCK=20,r.COMMAND=15,r.CONTROL=17,r.DELETE=46,r.DOWN=40,r.END=35,r.ENTER=13,r.ESCAPE=27,r.F1=112,r.F2=113,r.F3=114,r.F4=115,r.F5=116,r.F6=117,r.F7=118,r.F8=119,r.F9=120,r.F10=121,r.F11=122,r.F12=123,r.F13=124,r.F14=125,r.F15=126,r.HOME=36,r.INSERT=45,r.LEFT=37,r.NUMPAD=21,r.NUMPAD_0=96,r.NUMPAD_1=97,r.NUMPAD_2=98,r.NUMPAD_3=99,r.NUMPAD_4=100,r.NUMPAD_5=101,r.NUMPAD_6=102,r.NUMPAD_7=103,r.NUMPAD_8=104,r.NUMPAD_9=105,r.NUMPAD_ADD=107,r.NUMPAD_DECIMAL=110,r.NUMPAD_DIVIDE=111,r.NUMPAD_ENTER=108,r.NUMPAD_MULTIPLY=106,r.NUMPAD_SUBTRACT=109,r.PAGE_DOWN=34,r.PAGE_UP=33,r.RIGHT=39,r.SHIFT=16,r.SPACE=32,r.TAB=9,r.UP=38,r.RED=16777216,r.GREEN=16777217,r.YELLOW=16777218,r.BLUE=16777219,r.CHANNEL_UP=16777220,r.CHANNEL_DOWN=16777221,r.RECORD=16777222,r.PLAY=16777223,r.PAUSE=16777224,r.STOP=16777225,r.FAST_FORWARD=16777226,r.REWIND=16777227,r.SKIP_FORWARD=16777228,r.SKIP_BACKWARD=16777229,r.NEXT=16777230,r.PREVIOUS=16777231,r.LIVE=16777232,r.LAST=16777233,r.MENU=16777234,r.INFO=16777235,r.GUIDE=16777236,r.EXIT=16777237,r.BACK=16777238,r.AUDIO=16777239,r.SUBTITLE=16777240,r.DVR=16777241,r.VOD=16777242,r.INPUT=16777243,r.SETUP=16777244,r.HELP=16777245,r.MASTER_SHELL=16777246,r.SEARCH=16777247,r.codeMap={Digit0:r.NUMBER_0,Digit1:r.NUMBER_1,Digit2:r.NUMBER_2,Digit3:r.NUMBER_3,Digit4:r.NUMBER_4,Digit5:r.NUMBER_5,Digit6:r.NUMBER_6,Digit7:r.NUMBER_7,Digit8:r.NUMBER_8,Digit9:r.NUMBER_9,KeyA:r.A,KeyB:r.B,KeyC:r.C,KeyD:r.D,KeyE:r.E,KeyF:r.F,KeyG:r.G,KeyH:r.H,KeyJ:r.J,KeyK:r.K,KeyL:r.L,KeyM:r.M,KeyN:r.N,KeyO:r.O,KeyP:r.P,KeyQ:r.Q,KeyR:r.R,KeyS:r.S,KeyT:r.T,KeyU:r.U,KeyV:r.V,KeyW:r.W,KeyX:r.X,KeyY:r.Y,KeyZ:r.Z,Semicolon:r.SEMICOLON,Equal:r.EQUAL,Comma:r.COMMA,Minus:r.MINUS,Period:r.PERIOD,Slash:r.SLASH,Backquote:r.BACKQUOTE,BracketLeft:r.LEFTBRACKET,Backslash:r.BACKSLASH,BracketRight:r.RIGHTBRACKET,Quote:r.QUOTE,AltLeft:r.ALTERNATE,AltRight:r.ALTERNATE,Backspace:r.BACKSPACE,CapsLock:r.CAPS_LOCK,ControlLeft:r.CONTROL,ControlRight:r.CONTROL,Delete:r.DELETE,ArrowDown:r.DOWN,End:r.END,Enter:r.ENTER,Escape:r.ESCAPE,F1:r.F1,F2:r.F2,F3:r.F3,F4:r.F4,F5:r.F5,F6:r.F6,F7:r.F7,F8:r.F8,F9:r.F9,F10:r.F10,F11:r.F11,F12:r.F12,F13:r.F13,F14:r.F14,F15:r.F15,Home:r.HOME,Insert:r.INSERT,ArrowLeft:r.LEFT,Numpad0:r.NUMPAD_0,Numpad1:r.NUMPAD_1,Numpad2:r.NUMPAD_2,Numpad3:r.NUMPAD_3,Numpad4:r.NUMPAD_4,Numpad5:r.NUMPAD_5,Numpad6:r.NUMPAD_6,Numpad7:r.NUMPAD_7,Numpad8:r.NUMPAD_8,Numpad9:r.NUMPAD_9,NumpadAdd:r.NUMPAD_ADD,NumpadDecimal:r.NUMPAD_DECIMAL,NumpadDivide:r.NUMPAD_DIVIDE,NumpadEnter:r.NUMPAD_ENTER,NumpadMultiply:r.NUMPAD_MULTIPLY,NumpadSubtract:r.NUMPAD_SUBTRACT,PageDown:r.PAGE_DOWN,PageUp:r.PAGE_UP,ArrowRight:r.RIGHT,ShiftLeft:r.SHIFT,ShiftRight:r.SHIFT,Space:r.SPACE,Tab:r.TAB,ArrowUp:r.UP}},6375:(t,e,n)=>{"use strict";n.d(e,{k:()=>i,e:()=>s});const r=new AudioContext;function i(t){return r.decodeAudioData(t)}class s{constructor(){this.context=new AudioContext,this.rootNode=this.context.createGain(),this.rootNode.connect(this.context.destination)}reset(){this.rootNode.disconnect(),this.rootNode=this.context.createGain(),this.rootNode.connect(this.context.destination)}}},2166:(t,e,n)=>{"use strict";n.d(e,{B:()=>r,p:()=>a});var r,i=n(6300),s=n(5950),o=n(843);!function(t){t[t.Up=0]="Up",t[t.Over=1]="Over",t[t.Down=2]="Down",t[t.HitTest=3]="HitTest"}(r||(r={}));class a{constructor(t,e,n){this.id=t,this.def=e,this.library=n}applyTo(t){this.instantiateState(t,r.Up),this.instantiateState(t,r.Over),this.instantiateState(t,r.Down),this.instantiateState(t,r.HitTest),t.trackAsMenu=this.def.trackAsMenu}instantiateState(t,e){const n=new i.j;let a;switch(e){case r.Up:a=t=>t.up;break;case r.Over:a=t=>t.over;break;case r.Down:a=t=>t.down;break;case r.HitTest:a=t=>t.hitTest}for(const t of this.def.characters)a(t)&&(0,o.WO)(this.library,n,{kind:s.z.PlaceObject,depth:t.depth,characterId:t.characterId,moveCharacter:!1,version:3,matrix:t.matrix,colorTransform:t.colorTransform,filters:t.filters,blendMode:t.blendMode});switch((0,o.PU)(n),e){case r.Up:t.upState=n;break;case r.Over:t.overState=n;break;case r.Down:t.downState=n;break;case r.HitTest:t.hitTestState=n}}stateTransition(t,e,n){let i;e===r.Over&&n===r.Up?i=this.def.overUpToIdle:e===r.Up&&n===r.Over?i=this.def.idleToOverUp:e===r.Over&&n===r.Down?i=this.def.overUpToOverDown:e===r.Down&&n===r.Over&&(i=this.def.idleToOverUp),i&&(0,o.jf)(this.library,t.__soundContext,{kind:s.z.StartSound,characterId:i.characterId,soundInfo:i.soundInfo})}}},843:(t,e,n)=>{"use strict";n.d(e,{WO:()=>h,Ff:()=>f,jf:()=>d,PU:()=>y});var r,i=n(2526),s=n(4945),o=n(2640),a=n(2120),l=n(8051),c=n(3633);!function(t){t[t.DropShadow=0]="DropShadow",t[t.Blur=1]="Blur"}(r||(r={}));var u=n(2550);function h(t,e,n){const r=e.__children;let a;if(n.characterId){let l=r.findIndex((t=>t.__depth>=n.depth)),c=null;if(-1===l)l=r.length;else if(r[l].__depth===n.depth){const t=r[l].__character;(null==t?void 0:t.id)===n.characterId?a=r[l]:(c=r[l],e.removeChildAt(l))}if(a)p(e,a,n,!n.moveCharacter);else{const{characterId:r,depth:a}=n;o.s.__initChar((()=>t.instantiateCharacter(r)),(t=>{var r,o;e.addChildAt(t,l),t.__depth=a,c&&(r=c,o=t,i.JG(o.__node.transformLocal,r.__node.transformLocal),o.__scaleSkews={...r.__scaleSkews},s.JG(o.__node.colorTransformLocalMul,r.__node.colorTransformLocalMul),s.JG(o.__node.colorTransformLocalAdd,r.__node.colorTransformLocalMul),o.__clipDepth=r.__clipDepth,o.name=r.name,o.filters=r.filters,o.cacheAsBitmap=r.cacheAsBitmap,o.visible=r.visible),p(e,t,n,!n.moveCharacter)}))}}else a=r.find((t=>t.__depth===n.depth)),a&&p(e,a,n,!1)}function f(t,e){const n=t.__children.findIndex((t=>t.__depth===e.depth));n<0||t.removeChildAt(n)}function d(t,e,n){e.syncSound(t,n.characterId,n.soundInfo)}function p(t,e,n,o){var h,f;if(null!=n.matrix?(i.JG(e.__node.transformLocal,n.matrix),e.__scaleSkews=(0,u.q_)(e.__node.transformLocal),e.__node.markLayoutDirty()):o&&(i.yR(e.__node.transformLocal),e.__scaleSkews=(0,u.q_)(e.__node.transformLocal),e.__node.markLayoutDirty()),null!=n.colorTransform?(s.JG(e.__node.colorTransformLocalMul,n.colorTransform.slice(0,4)),s.JG(e.__node.colorTransformLocalAdd,n.colorTransform.slice(4,8))):o&&(s.t8(e.__node.colorTransformLocalMul,1,1,1,1),s.t8(e.__node.colorTransformLocalAdd,0,0,0,0)),!(n.version<=1||(null!=n.clipDepth?e.__clipDepth=n.clipDepth:o&&(e.__clipDepth=-1),e instanceof a.W&&(null!=n.ratio?(e.__ratio=n.ratio,null===(h=e.__character)||void 0===h||h.applyTo(e)):o&&(e.__ratio=0,null===(f=e.__character)||void 0===f||f.applyTo(e))),null!=n.name&&(e.name=n.name,t[e.name]=e),n.version<=2))){if(null!=n.filters){const t=[];for(const e of n.filters)switch(e.id){case r.Blur:{const n=new l.T;n.blurX=e.blurX,n.blurY=e.blurY,n.quality=e.passes,t.push(n);break}case r.DropShadow:{const n=new c.p;n.color=e.color,n.blurX=e.blurX,n.blurY=e.blurY,n.angle=180*e.angle/Math.PI,n.distance=e.distance,n.strength=e.strength,n.inner=e.inner,n.knockout=e.knockout,n.quality=e.passes,t.push(n);break}}e.filters=t}else o&&(e.filters=[]);null!=n.cacheAsBitmap?e.cacheAsBitmap=n.cacheAsBitmap:o&&(e.cacheAsBitmap=!1),null!=n.visible?e.visible=n.visible:o&&(e.visible=!0)}}function y(t){const e=[];for(const n of t.__children)n.__clipDepth>=0&&e.push(n);for(const n of t.__children)for(const t of e)n.__depth>t.__depth&&n.__depth<=t.__clipDepth&&(n.mask=t)}},9378:(t,e,n)=>{"use strict";function r(t){return Math.round(65536*t)/65536}function i(t){t[0]=r(t[0]),t[1]=r(t[1]),t[2]=r(t[2]),t[3]=r(t[3]),t[4]=Math.round(t[4]),t[5]=Math.round(t[5])}function s(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],d=n[4],p=n[5];t[0]=Math.fround(r*c)+Math.fround(s*u),t[1]=Math.fround(i*c)+Math.fround(o*u),t[2]=Math.fround(r*h)+Math.fround(s*f),t[3]=Math.fround(i*h)+Math.fround(o*f),t[4]=Math.round(r*d+s*p)+a,t[5]=Math.round(i*d+o*p)+l}n.d(e,{rK:()=>r,Gk:()=>i,Yu:()=>s})},4495:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r={create:()=>Int32Array.of(0,0,0,0),fromValues:(t,e,n,r)=>Int32Array.of(t,e,n,r),copy(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]},fromRect(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[0]+e[2],t[3]=e[1]+e[3]},toRect(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]-e[0],t[3]=e[3]-e[1]},equals:(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3],intersects:(t,e)=>t[0]-e[2]<=0&&e[0]-t[2]<=0&&t[1]-e[3]<=0&&e[1]-t[3]<=0,contains:(t,e,n)=>e>=t[0]&&e<t[2]&&n>=t[1]&&n<t[3],union:(t,e,n)=>(e[0]!==e[2]&&e[1]!==e[3]||r.copy(t,n),n[0]!==n[2]&&n[1]!==n[3]||r.copy(t,e),t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t),apply(t,e,n){let r=n[0]*e[0]+n[2]*e[1]+n[4],i=n[1]*e[0]+n[3]*e[1]+n[5],s=r,o=i,a=r,l=i;return r=n[0]*e[2]+n[2]*e[1]+n[4],i=n[1]*e[2]+n[3]*e[1]+n[5],s=Math.min(s,r),o=Math.min(o,i),a=Math.max(a,r),l=Math.max(l,i),r=n[0]*e[0]+n[2]*e[3]+n[4],i=n[1]*e[0]+n[3]*e[3]+n[5],s=Math.min(s,r),o=Math.min(o,i),a=Math.max(a,r),l=Math.max(l,i),r=n[0]*e[2]+n[2]*e[3]+n[4],i=n[1]*e[2]+n[3]*e[3]+n[5],s=Math.min(s,r),o=Math.min(o,i),a=Math.max(a,r),l=Math.max(l,i),t[0]=Math.round(s),t[1]=Math.round(o),t[2]=Math.round(a),t[3]=Math.round(l),t}}},5355:(t,e,n)=>{"use strict";n.d(e,{u_:()=>i,K1:()=>s,fE:()=>o});var r=n(4945);function i(t){let e=t>>>24&255,n=t>>>16&255,r=t>>>8&255,i=t>>>0&255;const s=e/255;return n=255&Math.round(n*s),r=255&Math.round(r*s),i=255&Math.round(i*s),1*n+256*r+65536*i+16777216*e}function s(t,e){return t[0]=(e>>>0&255)/255,t[1]=(e>>>8&255)/255,t[2]=(e>>>16&255)/255,t[3]=(e>>>24&255)/255,t}function o(t,e,n,i,s,o){r.dC(t,s,n),r.dC(e,o,n),r.IH(e,e,i)}},2550:(t,e,n)=>{"use strict";n.d(e,{CJ:()=>s,lS:()=>o,q_:()=>a,qC:()=>l});var r=n(2526),i=n(9378);function s(t,e,n,i){return r.yR(t),t[0]=2/e,t[3]=(i?-2:2)/n,t[4]=-1,t[5]=i?1:-1,t}function o(t){for(;t>180;)t-=360;for(;t<-180;)t+=360;return t}function a(t){const e=r.GH(t)<0?-1:1;return{scaleX:Math.sqrt(t[0]*t[0]+t[1]*t[1])*e,scaleY:Math.sqrt(t[2]*t[2]+t[3]*t[3])*e,skewX:Math.atan2(t[3],t[2])-Math.PI/2,skewY:Math.atan2(t[1],t[0])}}function l(t,e){const{skewX:n,skewY:r,scaleX:s,scaleY:o}=e;if(!(0!==n&&n!==2*Math.PI||0!==r&&r!==2*Math.PI)){const e=t[0]!==s||t[3]!==o;return t[0]=s,t[1]=0,t[2]=0,t[3]=o,e}const a=(0,i.rK)(Math.cos(r)*s),l=(0,i.rK)(Math.sin(r)*s),c=(0,i.rK)(-Math.sin(n)*o),u=(0,i.rK)(Math.cos(n)*o),h=t[0]!==a||t[1]!==l||t[2]!==c||t[3]!==u;return t[0]=a,t[1]=l,t[2]=c,t[3]=u,h}},8671:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(5543);const i=1e-6,s={create:()=>Float32Array.of(0,0,0,0),fromValues:(t,e,n,r)=>Float32Array.of(t,e,n,r),copy:(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t),equals:(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3],intersects:(t,e)=>t[0]-(e[0]+e[2])<=i&&e[0]-(t[0]+t[2])<=i&&t[1]-(e[1]+e[3])<=i&&e[1]-(t[1]+t[3])<=i,contains:(t,e,n)=>e>=t[0]&&e<t[0]+t[2]&&n>=t[1]&&n<t[1]+t[3],clear:t=>(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t),scale:(t,e,n)=>(t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t),translate:(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2],t[3]=e[3],t),union(t,e,n){0===e[2]||0===e[3]?s.copy(t,n):0!==n[2]&&0!==n[3]||s.copy(t,e);const r=Math.min(e[0],n[0]),i=Math.min(e[1],n[1]),o=Math.max(e[0]+e[2],n[0]+n[2]),a=Math.max(e[1]+e[3],n[1]+n[3]);return t[0]=r,t[1]=i,t[2]=o-r,t[3]=a-i,t},apply(t,e,n){const i=[0,0];let[s,o]=r.iu(i,[e[0],e[1]],n),a=s,l=o,c=s,u=o;return[s,o]=r.iu(i,[e[0]+e[2],e[1]],n),a=Math.min(a,s),l=Math.min(l,o),c=Math.max(c,s),u=Math.max(u,o),[s,o]=r.iu(i,[e[0],e[1]+e[3]],n),a=Math.min(a,s),l=Math.min(l,o),c=Math.max(c,s),u=Math.max(u,o),[s,o]=r.iu(i,[e[0]+e[2],e[1]+e[3]],n),a=Math.min(a,s),l=Math.min(l,o),c=Math.max(c,s),u=Math.max(u,o),t[0]=a,t[1]=l,t[2]=c-a,t[3]=u-l,t}}},1645:(t,e,n)=>{"use strict";n.d(e,{r:()=>a});var r=n(8671),i=n(2526),s=n(5543),o=n(1552);class a{constructor(t,e,n,r,i,s,o,a){this.kind=t,this.vertices=e,this.colors=n,this.indices=r,this.uvMatrix=i,this.texture=s,this.fillMode=o,this.bounds=a}static rect(t,e,n){const{invertY:r=!1,texWidth:s=e.width,texHeight:o=e.height,scale:l=1}=null!=n?n:{};t[2]*=l,t[3]*=l;const c=new Float32Array(8);c[0]=t[2],c[1]=0,c[2]=0,c[3]=t[3],c[4]=0,c[5]=0,c[6]=t[2],c[7]=t[3];const u=new Uint32Array(4);u.fill(4294967295);const h=new Uint16Array(6);h[0]=0,h[1]=1,h[2]=2,h[3]=1,h[4]=0,h[5]=3;const f=i.Ue();return i.bA(f,f,[1/s,1/o]),r&&(i.bA(f,f,[1,-1]),i.Iu(f,f,[0,-o])),i.Iu(f,f,[t[0],t[1]]),i.bA(f,f,[1/l,1/l]),new a("shape",c,u,h,f,e,0,t)}static line(t,e,n,s,l,c){const u=function(t,e,n,r){const i=n-t,s=r-e,o=Math.sqrt(i*i+s*s);return[-s/o,i/o]}(t,e,n,s),h=l/2,f=new Float32Array(8);f[0]=n-u[0]*h,f[1]=s-u[1]*h,f[2]=t+u[0]*h,f[3]=e+u[1]*h,f[4]=t-u[0]*h,f[5]=e-u[1]*h,f[6]=n+u[0]*h,f[7]=s+u[1]*h;const d=new Uint32Array(4);d.fill(c);const p=new Uint16Array(6);p[0]=0,p[1]=1,p[2]=2,p[3]=1,p[4]=0,p[5]=3;const y=i.Ue(),v=r.J.create();return v[0]=Math.min(t,n),v[1]=Math.min(e,s),v[2]=Math.max(t,n)-v[0],v[3]=Math.max(e,s)-v[1],new a("shape",f,d,p,y,o.x.WHITE,0,v)}hitTest(t,e,n){if(!n)return r.J.contains(this.bounds,t,e);const i=(n,r,i,s)=>(t-i)*(r-s)-(n-i)*(e-s),s=this.vertices,o=this.indices,a=o.length/3;for(let t=0;t<a;t++){const e=s[2*o[3*t+0]+0],n=s[2*o[3*t+0]+1],r=s[2*o[3*t+1]+0],a=s[2*o[3*t+1]+1],l=s[2*o[3*t+2]+0],c=s[2*o[3*t+2]+1],u=i(e,n,r,a),h=i(r,a,l,c),f=i(l,c,e,n),d=u>0||h>0||f>0;if(!(u<0||h<0||f<0)||!d)return!0}return!1}static merge(t,e){let n=0,r=0;const i=[],s=[];for(const o of e)r+o.renderObject.indices.length>=65536&&(s.push(l(t,i,n,r)),n=0,r=0,i.length=0),n+=o.renderObject.vertices.length/2,r+=o.renderObject.indices.length,i.push(o);return r>0&&s.push(l(t,i,n,r)),s}}function l(t,e,n,o){const l=new Float32Array(2*n),c=new Uint32Array(n),u=new Uint16Array(o),h=r.J.create();let f=0,d=0;for(const{renderObject:t,color:n,transform:i}of e){for(let e=0;e<t.vertices.length;e+=2){const n=l.subarray(2*f+e,2*f+e+2),r=t.vertices.subarray(e,e+2);s.iu(n,r,i)}null==n?c.set(t.colors,f):c.fill(n,f,f+t.colors.length),u.set(t.indices.map((t=>t+f)),d),r.J.union(h,h,r.J.apply(r.J.create(),t.bounds,i)),f+=t.vertices.length/2,d+=t.indices.length}return new a(t,l,c,u,i.yR(i.Ue()),null,0,h)}},230:(t,e,n)=>{"use strict";n.d(e,{B:()=>v});var r,i=n(2526),s=n(5543),o=n(4945),a=n(1645),l=n(8671),c=n(8513),u=n(9378),h=n(4495);!function(t){t[t.DirtyBounds=1]="DirtyBounds",t[t.DirtyTransform=2]="DirtyTransform",t[t.DirtyChildTransform=4]="DirtyChildTransform",t[t.DirtyRender=8]="DirtyRender",t[t.DirtyAll=15]="DirtyAll",t[t.IsRoot=128]="IsRoot"}(r||(r={})),h.A.create(),h.A.create();const f=l.J.create(),d=i.Ue(),p=i.Ue(),y=s.Ue();class v{constructor(t){this.object=t,this.flags=r.DirtyAll,this.parent=null,this.mask=null,this.children=[],this.visible=!0,this.isMask=!1,this.buttonState=-1,this.renderObjects=[],this.boundsIntrinsic=h.A.create(),this.cacheAsBitmap=!1,this.cachedRender=null,this.filters=[],this.transformLocal=i.Ue(),this.colorTransformLocalMul=o.al(1,1,1,1),this.colorTransformLocalAdd=o.al(0,0,0,0),this.bounds=h.A.create(),this.boundsLocal=h.A.create(),this.boundsWorld=h.A.create(),this.transformRender=i.Ue(),this.transformWorld=i.Ue(),this.transformWorldInvert=i.Ue()}markRenderDirty(){let t=this;for(;t&&0==(t.flags&r.DirtyRender);)t.flags|=r.DirtyRender,t=t.parent}markLayoutDirty(t=!0){let e=this;for(;e;)e.flags|=r.DirtyBounds,e=e.parent;for(e=this;e;)e.flags|=r.DirtyChildTransform,e=e.parent;const n=[this];for(;e=n.pop();){e.flags|=r.DirtyTransform|r.DirtyChildTransform;for(const t of e.children)n.push(t)}}ensureLayout(){const t=[this];let e;for(;e=t.pop();){if(e.parent&&0!=(e.parent.flags&r.DirtyTransform)){t.push(e.parent);continue}if(e.flags&r.DirtyChildTransform&&(t.push(...e.children),e.flags&=~r.DirtyChildTransform),0==(e.flags&r.DirtyTransform))continue;e.parent?((0,u.Yu)(d,e.parent.transformWorld,e.transformLocal),(0,u.Yu)(p,e.parent.transformRender,e.transformLocal)):(i.JG(d,e.transformLocal),i.JG(p,e.transformLocal)),e.cacheAsBitmap&&i.yR(p);const n=!i.I6(d,e.transformWorld),s=!i.I6(p,e.transformRender);if(e.flags&=~r.DirtyTransform,n){i.JG(e.transformWorld,d),i.U_(e.transformWorldInvert,e.transformWorld),(0,u.Gk)(e.transformWorldInvert);let t=e;for(;t;)t.flags|=r.DirtyBounds,t=t.parent;for(const t of e.children)t.flags|=r.DirtyTransform}if(s){i.JG(e.transformRender,p);let t=e;for(;t;)t.flags|=r.DirtyRender,t=t.parent}}}boundsWithTransform(t,e){h.A.apply(t,this.boundsIntrinsic,e);const n=h.A.create(),r=i.Ue();for(const i of this.children)(0,u.Yu)(r,e,i.transformLocal),i.boundsWithTransform(n,r),h.A.union(t,t,n)}ensureBounds(){0!=(this.flags&r.DirtyBounds)&&(i.yR(d),this.boundsWithTransform(this.bounds,d),this.boundsWithTransform(this.boundsLocal,this.transformLocal),this.boundsWithTransform(this.boundsWorld,this.transformWorld),this.flags&=~r.DirtyBounds)}setParent(t,e){if(this.parent!==t){if(this.parent){const t=this.parent.children.indexOf(this);this.parent.children.splice(t,1),this.parent.markLayoutDirty(!1)}this.parent=t,this.parent?this.parent.children.splice(e,0,this):0==(this.flags&r.IsRoot)&&this.onRemoveFromStage(),this.markLayoutDirty()}else if(t){const n=t.children.indexOf(this);t.children.splice(n,1),t.children.splice(e,0,this),t.markRenderDirty()}}setRenderObjects(t,e){this.renderObjects=t,h.A.fromRect(this.boundsIntrinsic,e),this.markLayoutDirty(!1)}render(t){this.ensureLayout(),this.renderRecursive(t)}renderRecursive(t){t.pushTransform(this.transformLocal,{colorMul:this.colorTransformLocalMul,colorAdd:this.colorTransformLocalAdd}),this.doRender(t),t.popTransform()}doRender(t){var e;if(this.visible&&(!this.isMask||t.transform.renderMask===this)){if(this.cacheAsBitmap&&this.cachedRender&&0==(this.flags&r.DirtyRender))return t.pushTransform(this.cachedRender.view),t.renderObject(this.cachedRender.renderObject),void t.popTransform();this.flags&=~r.DirtyRender,null===(e=this.cachedRender)||void 0===e||e.return(),this.cachedRender=null,this.doRenderMask(t)}}doRenderMask(t){const e=this.mask;e&&(i.U_(d,this.transformWorld),i.Jp(d,d,e.transformWorld),t.pushTransform(d,{renderMask:e}),e.doRender(t),t.popTransform(),t.transform.useMask.push(e)),this.doRenderFilter(t)}doRenderFilter(t){if(this.cacheAsBitmap||this.filters.length>0){const e=s.Ue();for(const t of this.filters)s.Fp(e,e,t.paddings);e[0]=Math.ceil(e[0])*c.JN,e[1]=Math.ceil(e[1])*c.JN;const n=t.transform.view,r=this.filters.slice(),i=(t,e,s)=>{const o=r.shift();o?t.renderFilter(e,s,o,i):this.cacheAsBitmap?(t.renderCache(e,s,n,(t=>{this.cachedRender=t})),t.renderObject(a.r.rect(s,e,{scale:c.JN}))):t.renderObject(a.r.rect(s,e,{scale:c.JN}))};this.ensureBounds(),h.A.toRect(f,this.bounds),t.renderTexture(f,e,(t=>this.doRenderContent(t)),i)}else this.doRenderContent(t)}doRenderContent(t){for(const e of this.renderObjects)t.renderObject(e);if(this.buttonState>=0)this.children[this.buttonState].render(t);else for(const e of this.children)e.renderRecursive(t)}onRemoveFromStage(){var t;null===(t=this.cachedRender)||void 0===t||t.return(),this.cachedRender=null;for(const t of this.children)t.onRemoveFromStage()}hitTest(t,e){if(this.buttonState>=0)return this.children[3].hitTest(t,!0);if(this.mask&&!this.mask.hitTest(t,e))return!1;if(!e)return this.ensureLayout(),this.ensureBounds(),y[0]=(0,c.E_)(t[0]),y[1]=(0,c.E_)(t[1]),s.iu(y,y,this.transformWorldInvert),h.A.contains(this.bounds,y[0],y[1]);const n=[this];let r;for(;r=n.pop();){if(r.renderObjects.length>0&&(y[0]=(0,c.E_)(t[0]),y[1]=(0,c.E_)(t[1]),s.iu(y,y,r.transformWorldInvert),r.renderObjects.some((t=>t.hitTest(y[0],y[1],e)))))return!0;for(const t of r.children)n.push(t)}return!1}clone(){const t=new Map,e=n=>{let r=t.get(n);if(r)return r;r=new v(n.object),t.set(n,r),r.visible=n.visible,r.isMask=n.isMask,r.buttonState=n.buttonState,r.renderObjects=n.renderObjects.slice(),r.cacheAsBitmap=n.cacheAsBitmap,r.filters=n.filters.slice(),h.A.copy(r.boundsIntrinsic,n.boundsIntrinsic),i.JG(r.transformLocal,n.transformLocal),o.JG(r.colorTransformLocalMul,n.colorTransformLocalMul),o.JG(r.colorTransformLocalAdd,n.colorTransformLocalAdd),r.mask=n.mask&&e(n.mask);for(const t of n.children){const n=e(t);r.children.push(n),n.parent=r}return r};return e(this)}}},1788:(t,e,n)=>{"use strict";n.d(e,{p:()=>f});var r=n(2526),i=n(5543),s=n(4945),o=n(1215),a=n(2550),l=n(5355);const c=r.Ue(),u=i.Ue(),h=i.Ue();class f{isEffective(t){return t.blurX>0||t.blurY>0||t.distance>0}apply(t,e,n){const r=t.glState,f=r.gl,{width:d,height:p}=n.texture;(0,a.CJ)(c,d,p,!1),i.t8(h,1/d,1/p),r.setViewport(0,0,d,p),r.disable(f.BLEND),r.setClearColor(0,0,0,0);const y=t.renderPool.takeTexture(d,p),v=t.renderPool.takeTexture(d,p);try{const a=[];let d=0,p=null,m=null;const g=()=>{if(!p||!m)return;const t=(0,o.$_)(d),e=a.length;o.Qb.update(r,0,4*e*17);let c=y,u=v;for(let n=0;n<2*m;n++){let i=c,s=u.texture,a=n%2;0===n&&(s=p,a+=2);const l=i.framebuffer.ensure(r);r.bindFramebuffer(f.FRAMEBUFFER,l);const h=t.ensure(r);o.BR.ensure(r),r.useProgram(h);const d=r.bindTextures([s.ensure(r)])[0];t.uniform(r,"uTexture",d),t.uniform(r,"uMode",a),o.BR.bind(r),f.drawElements(f.TRIANGLES,6*e,f.UNSIGNED_SHORT,0);let y=u;u=c,c=y}for(let t=0;t<a.length;t++){const e=(0,l.K1)(s.Ue(),(0,l.u_)(a[t].instance.color));s.bA(e,e,a[t].instance.strength);const n=i.al(a[t].instance.distance,0);i.U1(n,n,[0,0],a[t].instance.angle),i.dC(n,n,h);let r=0;a[t].instance.knockout&&(r|=1);for(let i=0;i<4;i++){const s=17*(4*t+i);o.t9[s+0]=n[0],o.t9[s+1]=n[1],o.t9[s+8]=e[0],o.t9[s+9]=e[1],o.t9[s+10]=e[2],o.t9[s+11]=e[3],o.QF[s+16]=r}}o.Qb.update(r,0,4*e*17);const g=n.framebuffer.ensure(r);r.bindFramebuffer(f.FRAMEBUFFER,g);const b=o.wm.ensure(r);r.useProgram(b);const _=r.bindTextures([u.texture.ensure(r),p.ensure(r)]);o.wm.uniform(r,"uTextures[0]",_),f.drawElements(f.TRIANGLES,6*e,f.UNSIGNED_SHORT,0),a.length=0,m=null,p=null};for(const t of e){t.texture===p&&t.instance.passes===m||(g(),p=t.texture,m=t.instance.passes,d=0,i.t8(u,1/p.width,1/p.height));const e=t.instance.blurX/2,n=t.instance.blurY/2;d=Math.max(d,e,n);let r=4*a.length*17;for(let s=0;s<4;s++){switch(o.t9[r+0]=e,o.t9[r+1]=n,s){case 0:o.t9[r+2]=t.outBounds[0]+t.outBounds[2],o.t9[r+3]=t.outBounds[1],o.t9[r+4]=t.inBounds[0]+t.inBounds[2],o.t9[r+5]=t.inBounds[1],o.t9[r+6]=t.outBounds[0]+t.outBounds[2],o.t9[r+7]=t.outBounds[1];break;case 1:o.t9[r+2]=t.outBounds[0],o.t9[r+3]=t.outBounds[1]+t.outBounds[3],o.t9[r+4]=t.inBounds[0],o.t9[r+5]=t.inBounds[1]+t.inBounds[3],o.t9[r+6]=t.outBounds[0],o.t9[r+7]=t.outBounds[1]+t.outBounds[3];break;case 2:o.t9[r+2]=t.outBounds[0],o.t9[r+3]=t.outBounds[1],o.t9[r+4]=t.inBounds[0],o.t9[r+5]=t.inBounds[1],o.t9[r+6]=t.outBounds[0],o.t9[r+7]=t.outBounds[1];break;case 3:o.t9[r+2]=t.outBounds[0]+t.outBounds[2],o.t9[r+3]=t.outBounds[1]+t.outBounds[3],o.t9[r+4]=t.inBounds[0]+t.inBounds[2],o.t9[r+5]=t.inBounds[1]+t.inBounds[3],o.t9[r+6]=t.outBounds[0]+t.outBounds[2],o.t9[r+7]=t.outBounds[1]+t.outBounds[3]}o.t9[r+8]=t.inBounds[0]+.5,o.t9[r+9]=t.inBounds[1]+.5,o.t9[r+10]=t.inBounds[0]+t.inBounds[2]-1.5,o.t9[r+11]=t.inBounds[1]+t.inBounds[3]-1.5,o.t9[r+12]=t.outBounds[0]+.5,o.t9[r+13]=t.outBounds[1]+.5,o.t9[r+14]=t.outBounds[0]+t.outBounds[2]-1.5,o.t9[r+15]=t.outBounds[1]+t.outBounds[3]-1.5;const a=o.t9.subarray(r+0,r+2),l=o.t9.subarray(r+2,r+4),f=o.t9.subarray(r+4,r+6),d=o.t9.subarray(r+6,r+8),p=o.t9.subarray(r+8,r+10),y=o.t9.subarray(r+10,r+12),v=o.t9.subarray(r+12,r+14),m=o.t9.subarray(r+14,r+16);i.dC(a,a,u),i.iu(l,l,c),i.dC(f,f,u),i.dC(p,p,u),i.dC(y,y,u),i.dC(d,d,h),i.dC(v,v,h),i.dC(m,m,h),r+=17}a.push(t)}g()}finally{t.renderPool.returnTexture(y),t.renderPool.returnTexture(v)}}}f.instance=new f},1215:(t,e,n)=>{"use strict";n.d(e,{t9:()=>h,QF:()=>f,Qb:()=>d,$_:()=>a,wm:()=>l,BR:()=>p});var r=n(7527),i=n(970),s=n(2106);const o=new Map,a=t=>{const e=Math.max(1,Math.ceil(t/2));let n=o.get(e);return n||(n=new r.$("\n#version 300 es\n\nlayout(location=0) in vec4 aVertex;\nlayout(location=1) in vec4 aTexCoords;\nlayout(location=2) in vec4 aBoundsIn;\nlayout(location=3) in vec4 aBoundsOut;\nlayout(location=4) in uint x;\n\nout vec2 vTextureCoords;\nout vec2 vDelta;\nout vec4 vBounds;\n\nuniform uint uMode;\n\nvoid main(void) {\n    gl_Position = vec4(aVertex.zw, 0.0, 1.0);\n\n    vec2 delta;\n    vec2 texCoords;\n    vec4 bounds;\n    if (int(uMode) % 2 != 0) {\n      delta = aVertex.xy * vec2(1.0, 0.0);\n    } else {\n      delta = aVertex.xy * vec2(0.0, 1.0);\n    }\n    if (int(uMode) / 2 != 0) {\n      texCoords = aTexCoords.xy;\n      bounds = aBoundsIn;\n    } else {\n      texCoords = aTexCoords.zw;\n      bounds = aBoundsOut;\n    }\n\n    vTextureCoords = texCoords;\n    vDelta = delta;\n    vBounds = bounds;\n}\n",(t=>{const e=[0];for(let n=0;n<t;n++){const r=n+1;e.push(r/t),e.unshift(-r/t)}return`\n#version 300 es\nprecision highp float;\n\nin vec2 vTextureCoords;\nin vec2 vDelta;\nin vec4 vBounds;\n\nuniform sampler2D uTexture;\n\nout vec4 fragColor;\n\nvec4 sampleTex(float offset) {\n  vec2 coords = vTextureCoords + vDelta * offset;\n  coords = clamp(coords, vBounds.xy, vBounds.zw);\n  return texture(uTexture, coords);\n}\n\nvoid main(void) {\n  fragColor = vec4(0.0);\n  ${e.map((t=>`fragColor += sampleTex(${t.toFixed(20)}) * ${1/e.length};`)).join("\n")}\n}\n`})(e)),o.set(e,n)),n},l=new r.$("\n#version 300 es\n\nlayout(location=0) in vec4 aVertex;\nlayout(location=1) in vec4 aTexCoords;\nlayout(location=2) in vec4 aColor;\nlayout(location=3) in vec4 aBounds;\nlayout(location=4) in uint aMode;\n\nout vec2 vInTexCoords;\nout vec2 vOutTexCoords;\nout vec2 vDelta;\nout vec4 vBounds;\nout vec4 vColor;\nflat out uint vMode;\n\nvoid main(void) {\n    gl_Position = vec4(aVertex.zw, 0.0, 1.0);\n\n    vInTexCoords = aTexCoords.xy;\n    vOutTexCoords = aTexCoords.zw;\n    vDelta = aVertex.xy;\n    vBounds = aBounds;\n    vColor = aColor;\n    vMode = aMode;\n}\n","\n#version 300 es\nprecision highp float;\n\nin vec2 vInTexCoords;\nin vec2 vOutTexCoords;\nin vec2 vDelta;\nin vec4 vBounds;\nin vec4 vColor;\nflat in uint vMode;\n\nuniform sampler2D uTextures[2];\n\nout vec4 fragColor;\n\nvoid main(void) {\n  vec2 shadowCoords = clamp(vOutTexCoords - vDelta, vBounds.xy, vBounds.zw);\n  vec4 shadow = vColor * texture(uTextures[0], shadowCoords).a;\n  vec4 color = texture(uTextures[1], vInTexCoords);\n  if (int(vMode) % 2 != 0) {\n    fragColor = shadow * (1.0 - color.a);\n  } else {\n    fragColor = shadow * (1.0 - color.a) + color;\n  }\n}\n"),c=i.l.index(new Uint16Array(600),"STREAM_DRAW"),u=new ArrayBuffer(27200),h=new Float32Array(u),f=new Uint32Array(u),d=i.l.vertex(h,"STREAM_DRAW"),p=new s.F([{index:0,buffer:d,type:"float",components:4,offset:0,stride:68},{index:1,buffer:d,type:"float",components:4,offset:16,stride:68},{index:2,buffer:d,type:"float",components:4,offset:32,stride:68},{index:3,buffer:d,type:"float",components:4,offset:48,stride:68},{index:4,buffer:d,type:"uint",components:1,integer:!0,offset:64,stride:68}],c);for(let t=0;t<100;t++)c.data[6*t+0]=4*t+0,c.data[6*t+1]=4*t+1,c.data[6*t+2]=4*t+2,c.data[6*t+3]=4*t+1,c.data[6*t+4]=4*t+0,c.data[6*t+5]=4*t+3},970:(t,e,n)=>{"use strict";n.d(e,{l:()=>r});class r{constructor(t,e,n){this.binding=e,this.usage=n,this.data=t}get length(){return this.data.length}static index(t,e){return new r(t,"ELEMENT_ARRAY_BUFFER",e)}static vertex(t,e){return new r(t,"ARRAY_BUFFER",e)}ensure(t){return t.ensureInstance(this,(e=>{const n=e.createBuffer();return t.bindBuffer(e[this.binding],n),e.bufferData(e[this.binding],this.data,e[this.usage]),n}))}bind(t){const e=this.ensure(t);t.bindBuffer(t.gl[this.binding],e)}update(t,e,n){this.bind(t);const r=t.gl;return r.bufferSubData(r[this.binding],0,this.data,e,n),this}}},7527:(t,e,n)=>{"use strict";function r(t,e){if("number"==typeof t||"boolean"==typeof t){const n=new e(1);return n[0]=Number(t),n}if(Array.isArray(t))return e.from(t);if(t instanceof e)return t.slice();throw new Error("Invalid typed array value")}function i(t,e){if(!t||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}n.d(e,{$:()=>o});class s{constructor(t,e,n){this.value=null,this.state=t,this.name=e.name,this.type=e.type,this.size=e.size,this.location=n;const r=this.state.gl,i={[r.FLOAT]:{type:"float",components:1,setter:"uniform1fv"},[r.FLOAT_VEC2]:{type:"float",components:2,setter:"uniform2fv"},[r.FLOAT_VEC3]:{type:"float",components:3,setter:"uniform3fv"},[r.FLOAT_VEC4]:{type:"float",components:4,setter:"uniform4fv"},[r.INT]:{type:"int",components:1,setter:"uniform1iv"},[r.INT_VEC2]:{type:"int",components:2,setter:"uniform2iv"},[r.INT_VEC3]:{type:"int",components:3,setter:"uniform3iv"},[r.INT_VEC4]:{type:"int",components:4,setter:"uniform4iv"},[r.UNSIGNED_INT]:{type:"uint",components:1,setter:"uniform1uiv"},[r.UNSIGNED_INT_VEC2]:{type:"uint",components:2,setter:"uniform2uiv"},[r.UNSIGNED_INT_VEC3]:{type:"uint",components:3,setter:"uniform3uiv"},[r.UNSIGNED_INT_VEC4]:{type:"uint",components:4,setter:"uniform4uiv"},[r.BOOL]:{type:"bool",components:1,setter:"uniform1iv"},[r.BOOL_VEC2]:{type:"bool",components:2,setter:"uniform2iv"},[r.BOOL_VEC3]:{type:"bool",components:3,setter:"uniform3iv"},[r.BOOL_VEC4]:{type:"bool",components:4,setter:"uniform4iv"},[r.FLOAT_MAT2]:{type:"mat",components:4,setter:"uniformMatrix2fv"},[r.FLOAT_MAT3]:{type:"mat",components:9,setter:"uniformMatrix3fv"},[r.FLOAT_MAT4]:{type:"mat",components:16,setter:"uniformMatrix4fv"},[r.SAMPLER_2D]:{type:"bool",components:1,setter:"uniform1iv"}}[e.type];if(!i)throw new Error("Unsupported uniform type: "+e.type);this.typeDef=i}set(t,e){var n,s,o,a,l;switch(this.state.useProgram(t),this.typeDef.type){case"float":{const t=r(e,Float32Array);if(i(null!==(n=this.value)&&void 0!==n?n:new Float32Array(0),t))return;this.state.gl[this.typeDef.setter](this.location,t),this.value=t;break}case"int":case"bool":{const t=r(e,Int32Array);if(i(null!==(s=this.value)&&void 0!==s?s:new Int32Array(0),t))return;this.state.gl[this.typeDef.setter](this.location,t),this.value=t;break}case"uint":{const t=r(e,Uint32Array);if(i(null!==(o=this.value)&&void 0!==o?o:new Uint32Array(0),t))return;this.state.gl[this.typeDef.setter](this.location,t),this.value=t;break}case"mat":{const t=r(e,Float32Array);if(i(null!==(a=this.value)&&void 0!==a?a:new Float32Array(0),t))return;this.state.gl[this.typeDef.setter](this.location,!1,t),this.value=t;break}case"sampler2D":{const t=Array.isArray(e)?e.slice():[e];if(i(null!==(l=this.value)&&void 0!==l?l:[],t))return;this.state.gl[this.typeDef.setter](this.location,!1,t),this.value=t;break}}}}class o{constructor(t,e){this.vertexShader=t,this.fragmentShader=e}ensure(t){return this.doEnsure(t).program}doEnsure(t){return t.ensureInstance(this,(e=>{const n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,this.vertexShader.trim()),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(n);throw e.deleteShader(n),new Error("Cannot compile vertex shader: "+t)}const r=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(r,this.fragmentShader.trim()),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error("Cannot compile fragment shader: "+t)}const i=e.createProgram();if(e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){const t=e.getProgramInfoLog(i);throw e.deleteProgram(i),new Error("Cannot link program: "+t)}const o=new Map,a=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let n=0;n<a;++n){const r=e.getActiveUniform(i,n),a=e.getUniformLocation(i,r.name);o.set(r.name,new s(t,r,a))}return{program:i,uniforms:o}}))}uniform(t,e,n){const{program:r,uniforms:i}=this.doEnsure(t),s=i.get(e);s&&s.set(r,n)}}},1552:(t,e,n)=>{"use strict";n.d(e,{x:()=>r});class r{constructor(t){this.data=t,this.width=t.width,this.height=t.height}static image(t){return new r(t)}static size(t,e){return new r({width:t,height:e})}ensure(t){return t.ensureInstance(this,(e=>{const n=e.createTexture();return t.bindTexture(0,n),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.data instanceof HTMLElement?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.data):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),n}))}delete(t){t.deleteInstance(this,((t,e)=>{t.deleteTexture(e)}))}}r.WHITE=(()=>{const t=document.createElement("canvas");t.width=16,t.height=16;const e=t.getContext("2d");return e.fillStyle="#ffffff",e.fillRect(0,0,16,16),new r(t)})()},2106:(t,e,n)=>{"use strict";n.d(e,{F:()=>r});class r{constructor(t,e=null){this.indexBuffer=null,this.attributes=t,this.indexBuffer=e}ensure(t){return t.ensureInstance(this,(e=>{const n=e.createVertexArray();if(t.bindVertexArray(n),this.indexBuffer){const n=this.indexBuffer.ensure(t);t.bindBuffer(e[this.indexBuffer.binding],n)}for(const n of this.attributes){const{index:r,buffer:i,type:s,components:o,normalized:a=!1,stride:l=0,offset:c=0,integer:u=!1}=n;let h;switch(s){case"byte":h=e.UNSIGNED_BYTE;break;case"ushort":h=e.UNSIGNED_SHORT;break;case"uint":h=e.UNSIGNED_INT;break;case"float":h=e.FLOAT}const f=i.ensure(t);t.bindBuffer(e[i.binding],f),u?e.vertexAttribIPointer(r,o,h,l,c):e.vertexAttribPointer(r,o,h,a,l,c),e.enableVertexAttribArray(r)}return n}))}bind(t){var e;const n=this.ensure(t);t.bindVertexArray(n),null===(e=this.indexBuffer)||void 0===e||e.bind(t)}}},8513:(t,e,n)=>{"use strict";n.d(e,{JN:()=>r,Sh:()=>i,E_:()=>s});const r=20;function i(t){return t/r}function s(t){return Math.trunc(t*r)}},3010:(t,e,n)=>{"use strict";n.d(e,{Ib:()=>r,WT:()=>i,ZR:()=>s});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array;function s(t){i=t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},2526:(t,e,n)=>{"use strict";n.d(e,{Ue:()=>i,d9:()=>s,JG:()=>o,yR:()=>a,al:()=>l,t8:()=>c,U_:()=>u,GH:()=>h,Jp:()=>f,bA:()=>d,Iu:()=>p,vc:()=>y,I6:()=>v});var r=n(3010);function i(){var t=new r.WT(6);return r.WT!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function s(t){var e=new r.WT(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function l(t,e,n,i,s,o){var a=new r.WT(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a[4]=s,a[5]=o,a}function c(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function u(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=n*s-r*i;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*a-s*o)*l,t[5]=(r*o-n*a)*l,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function f(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],d=n[4],p=n[5];return t[0]=r*c+s*u,t[1]=i*c+o*u,t[2]=r*h+s*f,t[3]=i*h+o*f,t[4]=r*d+s*p+a,t[5]=i*d+o*p+l,t}function d(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r*c,t[1]=i*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function p(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=r*c+s*u+a,t[5]=i*c+o*u+l,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function v(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}},5543:(t,e,n)=>{"use strict";n.d(e,{Ue:()=>i,al:()=>s,t8:()=>o,Fp:()=>a,iu:()=>l,U1:()=>c,dC:()=>u});var r=n(3010);function i(){var t=new r.WT(2);return r.WT!=Float32Array&&(t[0]=0,t[1]=0),t}function s(t,e){var n=new r.WT(2);return n[0]=t,n[1]=e,n}function o(t,e,n){return t[0]=e,t[1]=n,t}function a(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function l(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function c(t,e,n,r){var i=e[0]-n[0],s=e[1]-n[1],o=Math.sin(r),a=Math.cos(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t}var u=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t};i()},4945:(t,e,n)=>{"use strict";n.d(e,{Ue:()=>i,d9:()=>s,al:()=>o,JG:()=>a,t8:()=>l,IH:()=>c,bA:()=>u,fS:()=>h,dC:()=>f});var r=n(3010);function i(){var t=new r.WT(4);return r.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function s(t){var e=new r.WT(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e,n,i){var s=new r.WT(4);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function l(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function h(t,e){var n=t[0],i=t[1],s=t[2],o=t[3],a=e[0],l=e[1],c=e[2],u=e[3];return Math.abs(n-a)<=r.Ib*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-l)<=r.Ib*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=r.Ib*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(o-u)<=r.Ib*Math.max(1,Math.abs(o),Math.abs(u))}var f=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t};i()},4316:(t,e,n)=>{"use strict";var r={};(0,n(9034).assign)(r,n(6778),n(5354),n(549)),t.exports=r},6778:(t,e,n)=>{"use strict";var r=n(4349),i=n(9034),s=n(2511),o=n(4594),a=n(8755),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(o[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var u;if(u="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(o[n]);this._dict_set=!0}}function u(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}c.prototype.push=function(t,e){var n,o,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(c),a.next_out=0,a.avail_out=c),1!==(n=r.deflate(a,o))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),a.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=c,e.deflate=u,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,u(t,e)}},5354:(t,e,n)=>{"use strict";var r=n(3386),i=n(9034),s=n(2511),o=n(549),a=n(4594),l=n(8755),c=n(4673),u=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary))!==o.Z_OK))throw new Error(a[n])}function f(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(t,e){var n,a,l,c,h,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(d),f.next_out=0,f.avail_out=d),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===o.Z_BUF_ERROR&&!0===y&&(n=o.Z_OK,y=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(f.output,f.next_out),c=f.next_out-l,h=s.buf2string(f.output,l),f.next_out=c,f.avail_out=d-c,c&&i.arraySet(f.output,f.output,l,c,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(y=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},9034:(t,e)=>{"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){var e,n,r,i,s,o;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(o=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)s=t[e],o.set(s,i),i+=s.length;return o}},s={arraySet:function(t,e,n,r,i){for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},2511:(t,e,n)=>{"use strict";var r=n(9034),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",o=0;o<e;o++)n+=String.fromCharCode(t[o]);return n}o[254]=o[254]=1,e.string2buf=function(t){var e,n,i,s,o,a=t.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),o=0,s=0;o<l;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,s,a=e||t.length,c=new Array(2*a);for(r=0,n=0;n<a;)if((i=t[n++])<128)c[r++]=i;else if((s=o[i])>4)c[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&n<a;)i=i<<6|63&t[n++],s--;s>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+o[t[n]]>e?n:e}},1475:t=>{"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,s=t>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{s=s+(i=i+e[r++]|0)|0}while(--o);i%=65521,s%=65521}return i|s<<16|0}},549:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},8621:t=>{"use strict";var e=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,n,r,i){var s=e,o=i+r;t^=-1;for(var a=i;a<o;a++)t=t>>>8^s[255&(t^n[a])];return-1^t}},4349:(t,e,n)=>{"use strict";var r,i=n(9034),s=n(376),o=n(1475),a=n(8621),l=n(4594),c=-2,u=258,h=262,f=103,d=113,p=666;function y(t,e){return t.msg=l[e],e}function v(t){return(t<<1)-(t>4?9:0)}function m(t){for(var e=t.length;--e>=0;)t[e]=0}function g(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function b(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,g(t.strm)}function _(t,e){t.pending_buf[t.pending++]=e}function w(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function k(t,e){var n,r,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-h?t.strstart-(t.w_size-h):0,c=t.window,f=t.w_mask,d=t.prev,p=t.strstart+u,y=c[s+o-1],v=c[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(n=e)+o]===v&&c[n+o-1]===y&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<p);if(r=u-(p-s),s=p-u,r>o){if(t.match_start=e,o=r,r>=a)break;y=c[s+o-1],v=c[s+o]}}}while((e=d[e&f])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead}function x(t){var e,n,r,s,l,c,u,f,d,p,y=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=y+(y-h)){i.arraySet(t.window,t.window,y,y,0),t.match_start-=y,t.strstart-=y,t.block_start-=y,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=y?r-y:0}while(--n);e=n=y;do{r=t.prev[--e],t.prev[e]=r>=y?r-y:0}while(--n);s+=y}if(0===t.strm.avail_in)break;if(c=t.strm,u=t.window,f=t.strstart+t.lookahead,d=s,p=void 0,(p=c.avail_in)>d&&(p=d),n=0===p?0:(c.avail_in-=p,i.arraySet(u,c.input,c.next_in,p,f),1===c.state.wrap?c.adler=o(c.adler,u,p,f):2===c.state.wrap&&(c.adler=a(c.adler,u,p,f)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<h&&0!==t.strm.avail_in)}function R(t,e){for(var n,r;;){if(t.lookahead<h){if(x(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-h&&(t.match_length=k(t,n)),t.match_length>=3)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}function S(t,e){for(var n,r,i;;){if(t.lookahead<h){if(x(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-h&&(t.match_length=k(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(b(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&b(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}function E(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:d,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):y(t,c)}function L(t){var e,n=T(t);return 0===n&&((e=t.state).window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function M(t,e,n,r,s,o){if(!t)return c;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>9||8!==n||r<8||r>15||e<0||e>9||o<0||o>4)return y(t,c);8===r&&(r=9);var l=new C;return t.state=l,l.strm=t,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=n,L(t)}r=[new E(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(x(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,b(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-h&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(b(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(b(t,!1),t.strm.avail_out),1)})),new E(4,4,8,4,R),new E(4,5,16,8,R),new E(4,6,32,32,R),new E(4,4,16,16,S),new E(8,16,32,32,S),new E(8,16,128,128,S),new E(8,32,128,256,S),new E(32,128,258,1024,S),new E(32,258,258,4096,S)],e.deflateInit=function(t,e){return M(t,e,8,15,8,0)},e.deflateInit2=M,e.deflateReset=L,e.deflateResetKeep=T,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?c:(t.state.gzhead=e,0):c},e.deflate=function(t,e){var n,i,o,l;if(!t||!t.state||e>5||e<0)return t?y(t,c):c;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===p&&4!==e)return y(t,0===t.avail_out?-5:c);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,_(i,31),_(i,139),_(i,8),i.gzhead?(_(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),_(i,255&i.gzhead.time),_(i,i.gzhead.time>>8&255),_(i,i.gzhead.time>>16&255),_(i,i.gzhead.time>>24&255),_(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),_(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(_(i,255&i.gzhead.extra.length),_(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(_(i,0),_(i,0),_(i,0),_(i,0),_(i,0),_(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),_(i,3),i.status=d);else{var h=8+(i.w_bits-8<<4)<<8;h|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=d,w(i,h),0!==i.strstart&&(w(i,t.adler>>>16),w(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),g(t),o=i.pending,i.pending!==i.pending_buf_size));)_(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),g(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,_(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),g(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,_(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=f)}else i.status=f;if(i.status===f&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&g(t),i.pending+2<=i.pending_buf_size&&(_(i,255&t.adler),_(i,t.adler>>8&255),t.adler=0,i.status=d)):i.status=d),0!==i.pending){if(g(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&v(e)<=v(n)&&4!==e)return y(t,-5);if(i.status===p&&0!==t.avail_in)return y(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&i.status!==p){var k=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(x(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=u){if(x(t),t.lookahead<=u&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+u;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=u-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(b(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(b(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(b(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==k&&4!==k||(i.status=p),1===k||3===k)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===k&&(1===e?s._tr_align(i):5!==e&&(s._tr_stored_block(i,0,0,!1),3===e&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),g(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(_(i,255&t.adler),_(i,t.adler>>8&255),_(i,t.adler>>16&255),_(i,t.adler>>24&255),_(i,255&t.total_in),_(i,t.total_in>>8&255),_(i,t.total_in>>16&255),_(i,t.total_in>>24&255)):(w(i,t.adler>>>16),w(i,65535&t.adler)),g(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==f&&e!==d&&e!==p?y(t,c):(t.state=null,e===d?y(t,-3):0):c},e.deflateSetDictionary=function(t,e){var n,r,s,a,l,u,h,f,d=e.length;if(!t||!t.state)return c;if(2===(a=(n=t.state).wrap)||1===a&&42!==n.status||n.lookahead)return c;for(1===a&&(t.adler=o(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,e,d-n.w_size,n.w_size,0),e=f,d=n.w_size),l=t.avail_in,u=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,x(n);n.lookahead>=3;){r=n.strstart,s=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--s);n.strstart=r,n.lookahead=2,x(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=u,t.input=h,t.avail_in=l,n.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},4673:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},3394:t=>{"use strict";t.exports=function(t,e){var n,r,i,s,o,a,l,c,u,h,f,d,p,y,v,m,g,b,_,w,k,x,R,S,E;n=t.state,r=t.next_in,S=t.input,i=r+(t.avail_in-5),s=t.next_out,E=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,y=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),b=y[d&m];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))E[s++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=y[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=S[r++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),b=v[d&g];n:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(k=65535&b,p<(_&=15)&&(d+=S[r++]<<p,(p+=8)<_&&(d+=S[r++]<<p,p+=8)),(k+=d&(1<<_)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=_,p-=_,k>(_=s-o)){if((_=k-_)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=0,R=f,0===h){if(x+=c-_,_<w){w-=_;do{E[s++]=f[x++]}while(--_);x=s-k,R=E}}else if(h<_){if(x+=c+h-_,(_-=h)<w){w-=_;do{E[s++]=f[x++]}while(--_);if(x=0,h<w){w-=_=h;do{E[s++]=f[x++]}while(--_);x=s-k,R=E}}}else if(x+=h-_,_<w){w-=_;do{E[s++]=f[x++]}while(--_);x=s-k,R=E}for(;w>2;)E[s++]=R[x++],E[s++]=R[x++],E[s++]=R[x++],w-=3;w&&(E[s++]=R[x++],w>1&&(E[s++]=R[x++]))}else{x=s-k;do{E[s++]=E[x++],E[s++]=E[x++],E[s++]=E[x++],w-=3}while(w>2);w&&(E[s++]=E[x++],w>1&&(E[s++]=E[x++]))}break}}break}}while(r<i&&s<a);r-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<a?a-s+257:257-(s-a),n.hold=d,n.bits=p}},3386:(t,e,n)=>{"use strict";var r=n(9034),i=n(1475),s=n(8621),o=n(3394),a=n(598),l=-2,c=12,u=30;function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):l}function p(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,d(t)):l}function y(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?l:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,p(t))):l}function v(t,e){var n,r;return t?(r=new f,t.state=r,r.window=null,0!==(n=y(t,e))&&(t.state=null),n):l}var m,g,b=!0;function _(t){if(b){var e;for(m=new r.Buf32(512),g=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,g,0,t.work,{bits:5}),b=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function w(t,e,n,i){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>i&&(s=i),r.arraySet(o.window,e,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}e.inflateReset=p,e.inflateReset2=y,e.inflateResetKeep=d,e.inflateInit=function(t){return v(t,15)},e.inflateInit2=v,e.inflate=function(t,e){var n,f,d,p,y,v,m,g,b,k,x,R,S,E,C,T,L,M,P,A,D,O,N,F,B=0,I=new r.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;(n=t.state).mode===c&&(n.mode=13),y=t.next_out,d=t.output,m=t.avail_out,p=t.next_in,f=t.input,v=t.avail_in,g=n.hold,b=n.bits,k=v,x=m,O=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(2&n.wrap&&35615===g){n.check=0,I[0]=255&g,I[1]=g>>>8&255,n.check=s(n.check,I,2,0),g=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",n.mode=u;break}if(8!=(15&g)){t.msg="unknown compression method",n.mode=u;break}if(b-=4,D=8+(15&(g>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){t.msg="invalid window size",n.mode=u;break}n.dmax=1<<D,t.adler=n.check=1,n.mode=512&g?10:c,g=0,b=0;break;case 2:for(;b<16;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(n.flags=g,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(I[0]=255&g,I[1]=g>>>8&255,n.check=s(n.check,I,2,0)),g=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}n.head&&(n.head.time=g),512&n.flags&&(I[0]=255&g,I[1]=g>>>8&255,I[2]=g>>>16&255,I[3]=g>>>24&255,n.check=s(n.check,I,4,0)),g=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(I[0]=255&g,I[1]=g>>>8&255,n.check=s(n.check,I,2,0)),g=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(I[0]=255&g,I[1]=g>>>8&255,n.check=s(n.check,I,2,0)),g=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((R=n.length)>v&&(R=v),R&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,p,R,D)),512&n.flags&&(n.check=s(n.check,f,R,p)),v-=R,p+=R,n.length-=R),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===v)break t;R=0;do{D=f[p+R++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&R<v);if(512&n.flags&&(n.check=s(n.check,f,R,p)),v-=R,p+=R,D)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===v)break t;R=0;do{D=f[p+R++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&R<v);if(512&n.flags&&(n.check=s(n.check,f,R,p)),v-=R,p+=R,D)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(g!==(65535&n.check)){t.msg="header crc mismatch",n.mode=u;break}g=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=c;break;case 10:for(;b<32;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}t.adler=n.check=h(g),g=0,b=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=v,n.hold=g,n.bits=b,2;t.adler=n.check=1,n.mode=c;case c:if(5===e||6===e)break t;case 13:if(n.last){g>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}switch(n.last=1&g,b-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(_(n),n.mode=20,6===e){g>>>=2,b-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=u}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&g,g=0,b=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(R=n.length){if(R>v&&(R=v),R>m&&(R=m),0===R)break t;r.arraySet(d,f,p,R,y),v-=R,p+=R,m-=R,y+=R,n.length-=R;break}n.mode=c;break;case 17:for(;b<14;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(n.nlen=257+(31&g),g>>>=5,b-=5,n.ndist=1+(31&g),g>>>=5,b-=5,n.ncode=4+(15&g),g>>>=4,b-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}n.lens[j[n.have++]]=7&g,g>>>=3,b-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},O=a(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,O){t.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(B=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,L=65535&B,!((C=B>>>24)<=b);){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(L<16)g>>>=C,b-=C,n.lens[n.have++]=L;else{if(16===L){for(F=C+2;b<F;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(g>>>=C,b-=C,0===n.have){t.msg="invalid bit length repeat",n.mode=u;break}D=n.lens[n.have-1],R=3+(3&g),g>>>=2,b-=2}else if(17===L){for(F=C+3;b<F;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}b-=C,D=0,R=3+(7&(g>>>=C)),g>>>=3,b-=3}else{for(F=C+7;b<F;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}b-=C,D=0,R=11+(127&(g>>>=C)),g>>>=7,b-=7}if(n.have+R>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=u;break}for(;R--;)n.lens[n.have++]=D}}if(n.mode===u)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,N={bits:n.lenbits},O=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,O){t.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},O=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,O){t.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(v>=6&&m>=258){t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=v,n.hold=g,n.bits=b,o(t,x),y=t.next_out,d=t.output,m=t.avail_out,p=t.next_in,f=t.input,v=t.avail_in,g=n.hold,b=n.bits,n.mode===c&&(n.back=-1);break}for(n.back=0;T=(B=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,L=65535&B,!((C=B>>>24)<=b);){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(T&&0==(240&T)){for(M=C,P=T,A=L;T=(B=n.lencode[A+((g&(1<<M+P)-1)>>M)])>>>16&255,L=65535&B,!(M+(C=B>>>24)<=b);){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}g>>>=M,b-=M,n.back+=M}if(g>>>=C,b-=C,n.back+=C,n.length=L,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=c;break}if(64&T){t.msg="invalid literal/length code",n.mode=u;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(F=n.extra;b<F;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(B=n.distcode[g&(1<<n.distbits)-1])>>>16&255,L=65535&B,!((C=B>>>24)<=b);){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(0==(240&T)){for(M=C,P=T,A=L;T=(B=n.distcode[A+((g&(1<<M+P)-1)>>M)])>>>16&255,L=65535&B,!(M+(C=B>>>24)<=b);){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}g>>>=M,b-=M,n.back+=M}if(g>>>=C,b-=C,n.back+=C,64&T){t.msg="invalid distance code",n.mode=u;break}n.offset=L,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(F=n.extra;b<F;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===m)break t;if(R=x-m,n.offset>R){if((R=n.offset-R)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=u;break}R>n.wnext?(R-=n.wnext,S=n.wsize-R):S=n.wnext-R,R>n.length&&(R=n.length),E=n.window}else E=d,S=y-n.offset,R=n.length;R>m&&(R=m),m-=R,n.length-=R;do{d[y++]=E[S++]}while(--R);0===n.length&&(n.mode=21);break;case 26:if(0===m)break t;d[y++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===v)break t;v--,g|=f[p++]<<b,b+=8}if(x-=m,t.total_out+=x,n.total+=x,x&&(t.adler=n.check=n.flags?s(n.check,d,x,y-x):i(n.check,d,x,y-x)),x=m,(n.flags?g:h(g))!==n.check){t.msg="incorrect data check",n.mode=u;break}g=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===v)break t;v--,g+=f[p++]<<b,b+=8}if(g!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=u;break}g=0,b=0}n.mode=29;case 29:O=1;break t;case u:O=-3;break t;case 31:return-4;case 32:default:return l}return t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=v,n.hold=g,n.bits=b,(n.wsize||x!==t.avail_out&&n.mode<u&&(n.mode<27||4!==e))&&w(t,t.output,t.next_out,x-t.avail_out)?(n.mode=31,-4):(k-=t.avail_in,x-=t.avail_out,t.total_in+=k,t.total_out+=x,n.total+=x,n.wrap&&x&&(t.adler=n.check=n.flags?s(n.check,d,x,t.next_out-x):i(n.check,d,x,t.next_out-x)),t.data_type=n.bits+(n.last?64:0)+(n.mode===c?128:0)+(20===n.mode||15===n.mode?256:0),(0===k&&0===x||4===e)&&0===O&&(O=-5),O)},e.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?l:(n.head=e,e.done=!1,0):l},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,e,r,0)!==n.check?-3:w(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},e.inflateInfo="pako inflate (from Nodeca project)"},598:(t,e,n)=>{"use strict";var r=n(9034),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,u,h,f){var d,p,y,v,m,g,b,_,w,k=f.bits,x=0,R=0,S=0,E=0,C=0,T=0,L=0,M=0,P=0,A=0,D=null,O=0,N=new r.Buf16(16),F=new r.Buf16(16),B=null,I=0;for(x=0;x<=15;x++)N[x]=0;for(R=0;R<l;R++)N[e[n+R]]++;for(C=k,E=15;E>=1&&0===N[E];E--);if(C>E&&(C=E),0===E)return c[u++]=20971520,c[u++]=20971520,f.bits=1,0;for(S=1;S<E&&0===N[S];S++);for(C<S&&(C=S),M=1,x=1;x<=15;x++)if(M<<=1,(M-=N[x])<0)return-1;if(M>0&&(0===t||1!==E))return-1;for(F[1]=0,x=1;x<15;x++)F[x+1]=F[x]+N[x];for(R=0;R<l;R++)0!==e[n+R]&&(h[F[e[n+R]]++]=R);if(0===t?(D=B=h,g=19):1===t?(D=i,O-=257,B=s,I-=257,g=256):(D=o,B=a,g=-1),A=0,R=0,x=S,m=u,T=C,L=0,y=-1,v=(P=1<<C)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){b=x-L,h[R]<g?(_=0,w=h[R]):h[R]>g?(_=B[I+h[R]],w=D[O+h[R]]):(_=96,w=0),d=1<<x-L,S=p=1<<T;do{c[m+(A>>L)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<x-1;A&d;)d>>=1;if(0!==d?(A&=d-1,A+=d):A=0,R++,0==--N[x]){if(x===E)break;x=e[n+h[R]]}if(x>C&&(A&v)!==y){for(0===L&&(L=C),m+=S,M=1<<(T=x-L);T+L<E&&!((M-=N[T+L])<=0);)T++,M<<=1;if(P+=1<<T,1===t&&P>852||2===t&&P>592)return 1;c[y=A&v]=C<<24|T<<16|m-u|0}}return 0!==A&&(c[m+A]=x-L<<24|64<<16|0),f.bits=C,0}},4594:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},376:(t,e,n)=>{"use strict";var r=n(9034);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);i(c);var u=new Array(60);i(u);var h=new Array(512);i(h);var f=new Array(256);i(f);var d=new Array(29);i(d);var p,y,v,m=new Array(30);function g(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function _(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function k(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function x(t,e,n){k(t,n[2*e],n[2*e+1])}function R(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function S(t,e,n){var r,i,s=new Array(16),o=0;for(r=1;r<=15;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=R(s[a]++,a))}}function E(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function C(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,n,r){var i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]}function L(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function M(t,e,n){var r,i,a,l,c=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===r?x(t,i,e):(x(t,(a=f[i])+256+1,e),0!==(l=s[a])&&k(t,i-=d[a],l),x(t,a=_(--r),n),0!==(l=o[a])&&k(t,r-=m[a],l))}while(c<t.last_lit);x(t,256,e)}function P(t,e){var n,r,i,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==s[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=o[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)L(t,s,n);i=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],L(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,s[2*i]=s[2*n]+s[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,s[2*n+1]=s[2*r+1]=i,t.heap[1]=i++,L(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,s,o,a,l=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,y=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(s=l[2*l[2*(r=t.heap[n])+1]+1]+1)>p&&(s=p,y++),l[2*r+1]=s,r>c||(t.bl_count[s]++,o=0,r>=d&&(o=f[r-d]),a=l[2*r],t.opt_len+=a*(s+o),h&&(t.static_len+=a*(u[2*r+1]+o)));if(0!==y){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,y-=2}while(y>0);for(s=p;0!==s;s--)for(r=t.bl_count[s];0!==r;)(i=t.heap[--n])>c||(l[2*i+1]!==s&&(t.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(t,e),S(s,c,t.bl_count)}function A(t,e,n){var r,i,s=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++a<l&&i===o||(a<c?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function D(t,e,n){var r,i,s=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++a<l&&i===o)){if(a<c)do{x(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(x(t,i,t.bl_tree),a--),x(t,16,t.bl_tree),k(t,a-3,2)):a<=10?(x(t,17,t.bl_tree),k(t,a-3,3)):(x(t,18,t.bl_tree),k(t,a-11,7));a=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}i(m);var O=!1;function N(t,e,n,i){k(t,0+(i?1:0),3),function(t,e,n,i){C(t),w(t,n),w(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){O||(function(){var t,e,n,r,i,l=new Array(16);for(n=0,r=0;r<28;r++)for(d[r]=n,t=0;t<1<<s[r];t++)f[n++]=r;for(f[n-1]=r,i=0,r=0;r<16;r++)for(m[r]=i,t=0;t<1<<o[r];t++)h[i++]=r;for(i>>=7;r<30;r++)for(m[r]=i<<7,t=0;t<1<<o[r]-7;t++)h[256+i++]=r;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,l[8]++;for(;t<=255;)c[2*t+1]=9,t++,l[9]++;for(;t<=279;)c[2*t+1]=7,t++,l[7]++;for(;t<=287;)c[2*t+1]=8,t++,l[8]++;for(S(c,287,l),t=0;t<30;t++)u[2*t+1]=5,u[2*t]=R(t,5);p=new g(c,s,257,286,15),y=new g(u,o,0,30,15),v=new g(new Array(0),a,0,19,7)}(),O=!0),t.l_desc=new b(t.dyn_ltree,p),t.d_desc=new b(t.dyn_dtree,y),t.bl_desc=new b(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,E(t)},e._tr_stored_block=N,e._tr_flush_block=function(t,e,n,r){var i,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),P(t,t.l_desc),P(t,t.d_desc),o=function(t){var e;for(A(t,t.dyn_ltree,t.l_desc.max_code),A(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?N(t,e,n,r):4===t.strategy||s===i?(k(t,2+(r?1:0),3),M(t,c,u)):(k(t,4+(r?1:0),3),function(t,e,n,r){var i;for(k(t,e-257,5),k(t,n-1,5),k(t,r-4,4),i=0;i<r;i++)k(t,t.bl_tree[2*l[i]+1],3);D(t,t.dyn_ltree,e-1),D(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),M(t,t.dyn_ltree,t.dyn_dtree)),E(t),r&&C(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){k(t,2,3),x(t,256,c),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},8755:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4309:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];function r(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=null;return e.forEach((function(t){if(null==i){var e=t.apply(void 0,n);null!=e&&(i=e)}})),i}return(0,i.default)(r)};var r,i=(r=n(6734))&&r.__esModule?r:{default:r};t.exports=e.default},6734:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(e,n,r,i,s,o){var a=i||"<<anonymous>>",l=o||r;if(null==n[r])return e?new Error("Required "+s+" `"+l+"` was not specified in `"+a+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),h=6;h<c;h++)u[h-6]=arguments[h];return t.apply(void 0,[n,r,a,s,l].concat(u))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n},t.exports=e.default},5372:(t,e,n)=>{"use strict";var r=n(9567);function i(){}function s(){}s.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},2652:(t,e,n)=>{t.exports=n(5372)()},9567:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2390:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,s=Object.create(i.prototype),o=new T(r||[]);return s._invoke=function(t,e,n){var r=h;return function(i,s){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw s;return M()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=u(t,e,n);if("normal"===l.type){if(r=n.done?p:f,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(t,n,o),s}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",y={};function v(){}function m(){}function g(){}var b={};b[s]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(L([])));w&&w!==n&&r.call(w,s)&&(b=w);var k=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function R(t,e){function n(i,s,o,a){var l=u(t[i],t,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,a)}))}a(l.arg)}var i;this._invoke=function(t,r){function s(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(s,s):s()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function L(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:M}}function M(){return{value:e,done:!0}}return m.prototype=k.constructor=g,g.constructor=m,m.displayName=l(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,a,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},x(R.prototype),R.prototype[o]=function(){return this},t.AsyncIterator=R,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new R(c(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(k),l(k,a,"Generator"),k[s]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},626:t=>{"use strict";t.exports=function(){}}}]);
//# sourceMappingURL=game.aff933c3.js.map