(()=>{"use strict";var e,t,r,o={5652:(e,t,r)=>{var o=r(9526),n=r(3961),a=r(6739),l=r.n(a),i=r(4403),c=r.n(i);var s=o.lazy((function(){return r.e(757).then(r.bind(r,7997))})),u=function(e){return o.createElement(o.Suspense,{fallback:o.createElement("div",{className:c()("sp5m2PXDOnNwaZEOUrd9",e.className)},o.createElement("p",null,"Loading..."))},o.createElement(s,{className:e.className,controller:e.controller}))};var d=function(e){return o.createElement("main",{className:"cYGkP1KcfcYearaBSHJr"},o.createElement(u,{className:"rUKThMkkfPnJJAzxfBAu",controller:e.controller}))},m=r(9621),v=r(4923),f="0123456789ABCDEFGHJKMNPQRSTVWXYZ";function h(e){var t;return null!==(t=e.map((function(e){return f.charAt(e)})).join(""))&&void 0!==t?t:""}function p(e){return Array.from(e).map((function(e){return f.indexOf(e)}))}var g=r(8972),y=r.n(g),b=r(8884),E=r.n(b),k=r(8239),S=r.n(k),w=function(){function e(){var t=this;y()(this,e),S()(this,"game",null),S()(this,"_mode",null),S()(this,"recording",[]),S()(this,"replayRecords",[]),S()(this,"setGame",(function(e){t.game=e,Object.assign(window,{swf:t})})),(0,m.ky)(this)}return E()(e,[{key:"mode",get:function(){return this._mode}}]),E()(e,[{key:"startSPGame",value:function(e){var t;null===(t=this.game)||void 0===t||t.startSPGame(e)}},{key:"startRecord",value:function(){var e;this.recording=[],this._mode="recording",null===(e=this.game)||void 0===e||e.setMode(this._mode)}},{key:"stopRecord",value:function(){var e;this._mode=null,null===(e=this.game)||void 0===e||e.setMode(this._mode)}},{key:"startReplay",value:function(){var e,t;null===(e=this.game)||void 0===e||e.setReplay(this.recording),this._mode="replaying",null===(t=this.game)||void 0===t||t.setMode(this._mode),this.replayRecords=[]}},{key:"stopReplay",value:function(){var e;this._mode=null,null===(e=this.game)||void 0===e||e.stopReplay()}},{key:"onFrameKeys",value:function(e){this.recording.push(e)}},{key:"onReplayFinished",value:function(){this._mode=null}},{key:"onReplayRecord",value:function(e,t,r,o,n,a){this.replayRecords.push({playerX:e,playerY:t,otherX:r,otherY:o,a:n,b:a})}}]),e}();var C=(0,v.Pi)((function(e){var t,r,n=null!==(t=null===(r=e.source)||void 0===r?void 0:r.replayRecords)&&void 0!==t?t:[],a=(0,o.useState)(""),i=l()(a,2),c=i[0],s=i[1],u=(0,o.useCallback)((function(){var t,r,o=(null!==(t=null===(r=e.source)||void 0===r?void 0:r.replayRecords)&&void 0!==t?t:[]).map((function(e,t){return[t,e.playerX.toFixed(2),e.playerY.toFixed(2),e.otherX.toFixed(2),e.otherY.toFixed(2),e.a.toFixed(20),e.b.toFixed(20)].join("\t")})).join("\n");s(o)}),[e.source]);return o.createElement("div",{className:"de3uOfgp_p4JEYS3_uIK"},o.createElement("div",{className:"CUyvUmV4X3yWLdH8shBn"},o.createElement("span",{className:"Zvi2t5uu2echj5vlzrhh"},n.length),o.createElement("button",{onClick:u},"Refresh")),o.createElement("textarea",{className:"F5DIArEjwhoWT1i4KzS_",value:c,readOnly:!0}))})),R=(0,v.Pi)((function(e){var t,r,n,a=e.controller,i=(0,o.useState)((function(){return new w})),c=l()(i,1)[0],s=(0,o.useState)(1),d=l()(s,2),v=d[0],f=d[1],g=(0,o.useState)(""),y=l()(g,2),b=y[0],E=y[1],k=(0,o.useCallback)((function(e){f(Number(e.target.value))}),[]),S=(0,o.useCallback)((function(e){var t;(null===(t=a.root)||void 0===t?void 0:t.recorder.mode)||E(e.target.value)}),[a]),R=(0,o.useCallback)((function(){return(0,m.z)((function(){var e,t;null===(e=a.root)||void 0===e||e.recorder.startRecord(),null===(t=a.root)||void 0===t||t.recorder.startSPGame(v-1)}))}),[a,v]),N=(0,o.useCallback)((function(){return(0,m.z)((function(){c.startRecord(),c.startSPGame(v-1)}))}),[c,v]),_=(0,o.useCallback)((function(){return(0,m.z)((function(){a.root&&(a.root.recorder.recording=p(b),a.root.recorder.startReplay(),c.recording=p(b),c.startReplay(),setTimeout((function(){var e;null===(e=a.root)||void 0===e||e.recorder.startSPGame(v-1),c.startSPGame(v-1)}),0))}))}),[a,c,b,v]),x=(0,o.useCallback)((function(){return(0,m.z)((function(){var e,t;if("replaying"===(null===(e=a.root)||void 0===e?void 0:e.recorder.mode))a.root.recorder.stopReplay();else if("recording"===(null===(t=a.root)||void 0===t?void 0:t.recorder.mode)){var r;null===(r=a.root)||void 0===r||r.recorder.stopRecord()}"replaying"===c.mode?c.stopReplay():"recording"===c.mode&&c.stopRecord()}))}),[a,c]);(0,o.useEffect)((function(){return(0,m.EH)((function(){var e;"recording"===(null===(e=a.root)||void 0===e?void 0:e.recorder.mode)?E(h(a.root.recorder.recording)):"recording"===c.mode&&E(h(c.recording))}))}),[a,c]);var O=c.mode,P=null!==(t=null===(r=a.root)||void 0===r?void 0:r.recorder.mode)&&void 0!==t?t:null,A=!(!O&&!P);return o.createElement("main",{className:"Iv8kc8_1YhmgfTvfNJRt"},o.createElement(u,{className:"Sfd68v0FBioa0kCLxStI",controller:a}),o.createElement("object",{className:"wb727tcSipcY9qVCBphV",ref:c.setGame,type:"application/x-shockwave-flash",data:"/game.swf",width:"800",height:"500"},o.createElement("param",{name:"wmode",value:"direct"}),o.createElement("param",{name:"allowScriptAccess",value:"always"})),o.createElement("div",{className:"eItIuP5n8OJilhBScpUP"},o.createElement("div",{className:"RlCrdS80CbmdR0otJu73"},o.createElement("label",{htmlFor:"level",className:"mUrL2XZxwfA9K6xclRBx"},"Level"),o.createElement("input",{id:"level",className:"LKlJ7Alx9TGucp7ShZKJ",type:"number",min:1,max:200,value:v,onChange:k})),o.createElement("button",{onClick:R,disabled:A},"Start record (HTML5)"),o.createElement("button",{onClick:N,disabled:A},"Start record (SWF)"),o.createElement("button",{onClick:_,disabled:A},"Start replay"),o.createElement("button",{onClick:x,disabled:!A},"Stop")),o.createElement("div",{className:"MB3N6FXJ1ANqQqC4y2Jg"},o.createElement("textarea",{className:"gaEd0IXY1Z4hYEOZ5bGf",value:b,disabled:A,onChange:S}),o.createElement(C,{source:null===(n=a.root)||void 0===n?void 0:n.recorder}),o.createElement(C,{source:c})))})),N=function(){function e(t){y()(this,e),S()(this,"root",null),this.isRecorderMode=t,(0,m.ky)(this,{root:m.LO.ref})}return E()(e,[{key:"setRoot",value:function(e){this.root=e}},{key:"onGameStarted",value:function(){var e;this.isRecorderMode&&(null===(e=this.root)||void 0===e||e.recorder.skipToSPMenu())}}]),e}();const _=function(){var e=(0,o.useState)((function(){var e=new URLSearchParams(window.location.search);return new N(!!e.get("recorder"))})),t=l()(e,1)[0];return t.isRecorderMode?o.createElement(R,{controller:t}):o.createElement(d,{controller:t})};n.render(o.createElement(o.StrictMode,null,o.createElement(_,null)),document.getElementById("root"))}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e](r,r.exports,a),r.exports}a.m=o,e=[],a.O=(t,r,o,n)=>{if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],n=e[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&n||l>=n)&&Object.keys(a.O).every((e=>a.O[e](r[c])))?r.splice(c--,1):(i=!1,n<l&&(l=n));if(i){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>"static/game.ec8ecb52.js",a.miniCssF=e=>"static/game.62175429.css",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},r="@exit-path/game:",a.l=(e,o,n,l)=>{if(t[e])t[e].push(o);else{var i,c;if(void 0!==n)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var d=s[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+n){i=d;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",r+n),i.src=e),t[e]=[o];var m=(r,o)=>{i.onerror=i.onload=null,clearTimeout(v);var n=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(o))),r)return r(o)},v=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"})(),(()=>{if("undefined"!=typeof document){var e={179:0};a.f.miniCss=(t,r)=>{e[t]?r.push(e[t]):0!==e[t]&&{757:1}[t]&&r.push(e[t]=(e=>new Promise(((t,r)=>{var o=a.miniCssF(e),n=a.p+o;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=(l=r[o]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(n===e||n===t))return l}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){var l;if((n=(l=a[o]).getAttribute("data-href"))===e||n===t)return l}})(o,n))return t();((e,t,r,o,n)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=r=>{if(a.onerror=a.onload=null,"load"===r.type)o();else{var l=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=l,c.request=i,a.parentNode.removeChild(a),n(c)}},a.href=t,document.head.appendChild(a)})(e,n,0,t,r)})))(t).then((()=>{e[t]=0}),(r=>{throw delete e[t],r})))}}})(),(()=>{a.b=document.baseURI||self.location.href;var e={179:0};a.f.j=(t,r)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var l=a.p+a.u(t),i=new Error;a.l(l,(r=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+l+")",i.name="ChunkLoadError",i.type=n,i.request=l,o[1](i)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,l=r[0],i=r[1],c=r[2],s=0;if(l.some((t=>0!==e[t]))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(c)var u=c(a)}for(t&&t(r);s<l.length;s++)n=l[s],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},r=self.webpackChunk_exit_path_game=self.webpackChunk_exit_path_game||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=a.O(void 0,[736],(()=>a(5652)));l=a.O(l)})();
//# sourceMappingURL=main.4d9682f8.js.map