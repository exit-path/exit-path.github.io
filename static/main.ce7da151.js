(()=>{"use strict";var e,t,r,n,o={8530:(e,t,r)=>{var n=r(9526),o=r(3961),a=r(6739),l=r.n(a),i=r(4403),c=r.n(i);var s=n.lazy((function(){return r.e(757).then(r.bind(r,6469))})),u=function(e){return n.createElement(n.Suspense,{fallback:n.createElement("div",{className:c()("_3tkwUkjxktGbHL4CNgWt60",e.className)},n.createElement("p",null,"Loading..."))},n.createElement(s,{className:e.className,controller:e.controller}))};var d=function(e){return n.createElement("main",{className:"_3kddnuHjKC9l2s_mjjHnqu"},n.createElement(u,{className:"_1TbR6khSWmisNNL9U_SWM5",controller:e.controller}))},m=r(9621),v=r(4923),f="0123456789ABCDEFGHJKMNPQRSTVWXYZ";function h(e){var t;return null!==(t=e.map((function(e){return f.charAt(e)})).join(""))&&void 0!==t?t:""}function p(e){return Array.from(e).map((function(e){return f.indexOf(e)}))}var g=r(8972),y=r.n(g),b=r(8884),E=r.n(b),k=r(8239),S=r.n(k),_=function(){function e(){var t=this;y()(this,e),S()(this,"game",null),S()(this,"_mode",null),S()(this,"recording",[]),S()(this,"replayPositions",[]),S()(this,"setGame",(function(e){t.game=e,Object.assign(window,{swf:t})})),(0,m.ky)(this)}return E()(e,[{key:"mode",get:function(){return this._mode}}]),E()(e,[{key:"startSPGame",value:function(e){var t;null===(t=this.game)||void 0===t||t.startSPGame(e)}},{key:"startRecord",value:function(){var e;this.recording=[],this._mode="recording",null===(e=this.game)||void 0===e||e.setMode(this._mode)}},{key:"stopRecord",value:function(){var e;this._mode=null,null===(e=this.game)||void 0===e||e.setMode(this._mode)}},{key:"startReplay",value:function(){var e,t;null===(e=this.game)||void 0===e||e.setReplay(this.recording),this._mode="replaying",null===(t=this.game)||void 0===t||t.setMode(this._mode),this.replayPositions=[]}},{key:"stopReplay",value:function(){var e;this._mode=null,null===(e=this.game)||void 0===e||e.stopReplay()}},{key:"onFrameKeys",value:function(e){this.recording.push(e)}},{key:"onReplayFinished",value:function(){this._mode=null}},{key:"onPlayerPosition",value:function(e,t){this.replayPositions.push([e,t])}}]),e}();var w=(0,v.Pi)((function(e){var t,r,o=null!==(t=null===(r=e.source)||void 0===r?void 0:r.replayPositions)&&void 0!==t?t:[],a=(0,n.useState)(""),i=l()(a,2),c=i[0],s=i[1],u=(0,n.useCallback)((function(){var t,r,n=(null!==(t=null===(r=e.source)||void 0===r?void 0:r.replayPositions)&&void 0!==t?t:[]).map((function(e,t){return"".concat(t,"\t").concat(e[0].toFixed(2),"\t").concat(e[1].toFixed(2))})).join("\n");s(n)}),[e.source]);return n.createElement("div",{className:"_34Qf2loNeojE7t6boV1w2T"},n.createElement("div",{className:"_2xIujzF9Y0-U85MqwDhrN5"},n.createElement("span",{className:"_1l_SH9UKyZTmOzSBWQVB9H"},o.length),n.createElement("button",{onClick:u},"Refresh")),n.createElement("textarea",{className:"qjZPT6L5w8hAoykeGfNha",value:c,readOnly:!0}))})),C=(0,v.Pi)((function(e){var t,r,o,a=e.controller,i=(0,n.useState)((function(){return new _})),c=l()(i,1)[0],s=(0,n.useState)(1),d=l()(s,2),v=d[0],f=d[1],g=(0,n.useState)(""),y=l()(g,2),b=y[0],E=y[1],k=(0,n.useCallback)((function(e){f(Number(e.target.value))}),[]),S=(0,n.useCallback)((function(e){var t;(null===(t=a.root)||void 0===t?void 0:t.recorder.mode)||E(e.target.value)}),[a]),C=(0,n.useCallback)((function(){return(0,m.z)((function(){var e,t;null===(e=a.root)||void 0===e||e.recorder.startRecord(),null===(t=a.root)||void 0===t||t.recorder.startSPGame(v-1)}))}),[a,v]),N=(0,n.useCallback)((function(){return(0,m.z)((function(){c.startRecord(),c.startSPGame(v-1)}))}),[c,v]),P=(0,n.useCallback)((function(){return(0,m.z)((function(){a.root&&(a.root.recorder.recording=p(b),a.root.recorder.startReplay(),c.recording=p(b),c.startReplay(),setTimeout((function(){var e;null===(e=a.root)||void 0===e||e.recorder.startSPGame(v-1),c.startSPGame(v-1)}),0))}))}),[a,c,b,v]),x=(0,n.useCallback)((function(){return(0,m.z)((function(){var e,t;if("replaying"===(null===(e=a.root)||void 0===e?void 0:e.recorder.mode))a.root.recorder.stopReplay();else if("recording"===(null===(t=a.root)||void 0===t?void 0:t.recorder.mode)){var r;null===(r=a.root)||void 0===r||r.recorder.stopRecord()}"replaying"===c.mode?c.stopReplay():"recording"===c.mode&&c.stopRecord()}))}),[a,c]);(0,n.useEffect)((function(){return(0,m.EH)((function(){var e;"recording"===(null===(e=a.root)||void 0===e?void 0:e.recorder.mode)?E(h(a.root.recorder.recording)):"recording"===c.mode&&E(h(c.recording))}))}),[a,c]);var R=c.mode,j=null!==(t=null===(r=a.root)||void 0===r?void 0:r.recorder.mode)&&void 0!==t?t:null,M=!(!R&&!j);return n.createElement("main",{className:"_36gOC-i5-nIaj7-umkEyNB"},n.createElement(u,{className:"_3hT_-JRLvkaGJKPwedxSKU",controller:a}),n.createElement("object",{className:"nEZYlMCiWu60Ux6cdCvZW",ref:c.setGame,type:"application/x-shockwave-flash",data:"/game.swf",width:"800",height:"500"},n.createElement("param",{name:"wmode",value:"direct"}),n.createElement("param",{name:"allowScriptAccess",value:"always"})),n.createElement("div",{className:"_17yZ1xjYjJOPkA4eyYSAhF"},n.createElement("div",{className:"_24rBSCZgtHbDMUJ1JX-3bC"},n.createElement("label",{htmlFor:"level",className:"_3WYaK5utMJ87_r6YqO_-7e"},"Level"),n.createElement("input",{id:"level",className:"_26pTsYi5yPxold0TtZHYkL",type:"number",min:1,max:200,value:v,onChange:k})),n.createElement("button",{onClick:C,disabled:M},"Start record (HTML5)"),n.createElement("button",{onClick:N,disabled:M},"Start record (SWF)"),n.createElement("button",{onClick:P,disabled:M},"Start replay"),n.createElement("button",{onClick:x,disabled:!M},"Stop")),n.createElement("div",{className:"_2ygJjiMCvJzZGS71ZUi7E3"},n.createElement("textarea",{className:"yiICqjLwMH84EMP_RPTMa",value:b,disabled:M,onChange:S}),n.createElement(w,{source:null===(o=a.root)||void 0===o?void 0:o.recorder}),n.createElement(w,{source:c})))})),N=function(){function e(t){y()(this,e),S()(this,"root",null),this.isRecorderMode=t,(0,m.ky)(this,{root:m.LO.ref})}return E()(e,[{key:"setRoot",value:function(e){this.root=e}},{key:"onGameStarted",value:function(){var e;this.isRecorderMode&&(null===(e=this.root)||void 0===e||e.recorder.skipToSPMenu())}}]),e}();const P=function(){var e=(0,n.useState)((function(){var e=new URLSearchParams(window.location.search);return new N(!!e.get("recorder"))})),t=l()(e,1)[0];return t.isRecorderMode?n.createElement(C,{controller:t}):n.createElement(d,{controller:t})};o.render(n.createElement(n.StrictMode,null,n.createElement(P,null)),document.getElementById("root"))}},a={};function l(e){if(a[e])return a[e].exports;var t=a[e]={exports:{}};return o[e](t,t.exports,l),t.exports}l.m=o,l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,r)=>(l.f[r](e,t),t)),[])),l.u=e=>"static/game.98624c95.js",l.miniCssF=e=>"static/"+{179:"main",736:"vendor",757:"game"}[e]+"."+{179:"undefine",736:"31d6cfe0",757:"8d95af5b"}[e]+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="@exit-path/game:",l.l=(r,n,o)=>{if(e[r])e[r].push(n);else{var a,i;if(void 0!==o)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var u=c[s];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(i=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[n];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(m);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),i&&document.head.appendChild(a)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e+"../"})(),r=e=>new Promise(((t,r)=>{var n=l.miniCssF(e),o=l.p+n;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=(l=r[n]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(o===e||o===t))return l}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){var l;if((o=(l=a[n]).getAttribute("data-href"))===e||o===t)return l}})(n,o))return t();((e,t,r,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=a=>{if(o.onerror=o.onload=null,"load"===a.type)r();else{var l=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=l,o.parentNode.removeChild(o),n(i)}},o.href=t,document.head.appendChild(o)})(e,o,t,r)})),n={179:0},l.f.miniCss=(e,t)=>{n[e]?t.push(n[e]):0!==n[e]&&{757:1}[e]&&t.push(n[e]=r(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))},(()=>{l.b=document.baseURI||self.location.href;var e={179:0},t=[[8530,736]];l.f.j=(t,r)=>{var n=l.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,o)=>{n=e[t]=[r,o]}));r.push(n[2]=o);var a=l.p+l.u(t),i=new Error;l.l(a,(r=>{if(l.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,n[1](i)}}),"chunk-"+t)}};var r=()=>{};function n(){for(var r,n=0;n<t.length;n++){for(var o=t[n],a=!0,i=1;i<o.length;i++){var c=o[i];0!==e[c]&&(a=!1)}a&&(t.splice(n--,1),r=l(l.s=o[0]))}return 0===t.length&&(l.x(),l.x=()=>{}),r}l.x=()=>{l.x=()=>{},a=a.slice();for(var e=0;e<a.length;e++)o(a[e]);return(r=n)()};var o=n=>{for(var o,a,[c,s,u,d]=n,m=0,v=[];m<c.length;m++)a=c[m],l.o(e,a)&&e[a]&&v.push(e[a][0]),e[a]=0;for(o in s)l.o(s,o)&&(l.m[o]=s[o]);for(u&&u(l),i(n);v.length;)v.shift()();return d&&t.push.apply(t,d),r()},a=self.webpackChunk_exit_path_game=self.webpackChunk_exit_path_game||[],i=a.push.bind(a);a.push=o})(),l.x()})();
//# sourceMappingURL=main.ce7da151.js.map