(()=>{"use strict";var e,t,r,o,n={8530:(e,t,r)=>{var o=r(9526),n=r(3961),a=r(6739),l=r.n(a),i=r(4403),c=r.n(i);var s=o.lazy((function(){return r.e(757).then(r.bind(r,439))})),u=function(e){return o.createElement(o.Suspense,{fallback:o.createElement("div",{className:c()("_3tkwUkjxktGbHL4CNgWt60",e.className)},o.createElement("p",null,"Loading..."))},o.createElement(s,{className:e.className,controller:e.controller}))};var d=function(e){return o.createElement("main",{className:"_3kddnuHjKC9l2s_mjjHnqu"},o.createElement(u,{className:"_1TbR6khSWmisNNL9U_SWM5",controller:e.controller}))},m=r(9621),v=r(4923),h="0123456789ABCDEFGHJKMNPQRSTVWXYZ";function f(e){var t;return null!==(t=e.map((function(e){return h.charAt(e)})).join(""))&&void 0!==t?t:""}function p(e){return Array.from(e).map((function(e){return h.indexOf(e)}))}var g=r(8972),y=r.n(g),b=r(8884),E=r.n(b),k=r(8239),S=r.n(k),_=function(){function e(){var t=this;y()(this,e),S()(this,"game",null),S()(this,"_mode",null),S()(this,"recording",[]),S()(this,"replayRecords",[]),S()(this,"setGame",(function(e){t.game=e,Object.assign(window,{swf:t})})),(0,m.ky)(this)}return E()(e,[{key:"mode",get:function(){return this._mode}}]),E()(e,[{key:"startSPGame",value:function(e){var t;null===(t=this.game)||void 0===t||t.startSPGame(e)}},{key:"startRecord",value:function(){var e;this.recording=[],this._mode="recording",null===(e=this.game)||void 0===e||e.setMode(this._mode)}},{key:"stopRecord",value:function(){var e;this._mode=null,null===(e=this.game)||void 0===e||e.setMode(this._mode)}},{key:"startReplay",value:function(){var e,t;null===(e=this.game)||void 0===e||e.setReplay(this.recording),this._mode="replaying",null===(t=this.game)||void 0===t||t.setMode(this._mode),this.replayRecords=[]}},{key:"stopReplay",value:function(){var e;this._mode=null,null===(e=this.game)||void 0===e||e.stopReplay()}},{key:"onFrameKeys",value:function(e){this.recording.push(e)}},{key:"onReplayFinished",value:function(){this._mode=null}},{key:"onReplayRecord",value:function(e,t,r,o,n,a){this.replayRecords.push({playerX:e,playerY:t,otherX:r,otherY:o,a:n,b:a})}}]),e}();var w=(0,v.Pi)((function(e){var t,r,n=null!==(t=null===(r=e.source)||void 0===r?void 0:r.replayRecords)&&void 0!==t?t:[],a=(0,o.useState)(""),i=l()(a,2),c=i[0],s=i[1],u=(0,o.useCallback)((function(){var t,r,o=(null!==(t=null===(r=e.source)||void 0===r?void 0:r.replayRecords)&&void 0!==t?t:[]).map((function(e,t){return[t,e.playerX.toFixed(2),e.playerY.toFixed(2),e.otherX.toFixed(2),e.otherY.toFixed(2),e.a.toFixed(20),e.b.toFixed(20)].join("\t")})).join("\n");s(o)}),[e.source]);return o.createElement("div",{className:"_34Qf2loNeojE7t6boV1w2T"},o.createElement("div",{className:"_2xIujzF9Y0-U85MqwDhrN5"},o.createElement("span",{className:"_1l_SH9UKyZTmOzSBWQVB9H"},n.length),o.createElement("button",{onClick:u},"Refresh")),o.createElement("textarea",{className:"qjZPT6L5w8hAoykeGfNha",value:c,readOnly:!0}))})),C=(0,v.Pi)((function(e){var t,r,n,a=e.controller,i=(0,o.useState)((function(){return new _})),c=l()(i,1)[0],s=(0,o.useState)(1),d=l()(s,2),v=d[0],h=d[1],g=(0,o.useState)(""),y=l()(g,2),b=y[0],E=y[1],k=(0,o.useCallback)((function(e){h(Number(e.target.value))}),[]),S=(0,o.useCallback)((function(e){var t;(null===(t=a.root)||void 0===t?void 0:t.recorder.mode)||E(e.target.value)}),[a]),C=(0,o.useCallback)((function(){return(0,m.z)((function(){var e,t;null===(e=a.root)||void 0===e||e.recorder.startRecord(),null===(t=a.root)||void 0===t||t.recorder.startSPGame(v-1)}))}),[a,v]),N=(0,o.useCallback)((function(){return(0,m.z)((function(){c.startRecord(),c.startSPGame(v-1)}))}),[c,v]),R=(0,o.useCallback)((function(){return(0,m.z)((function(){a.root&&(a.root.recorder.recording=p(b),a.root.recorder.startReplay(),c.recording=p(b),c.startReplay(),setTimeout((function(){var e;null===(e=a.root)||void 0===e||e.recorder.startSPGame(v-1),c.startSPGame(v-1)}),0))}))}),[a,c,b,v]),x=(0,o.useCallback)((function(){return(0,m.z)((function(){var e,t;if("replaying"===(null===(e=a.root)||void 0===e?void 0:e.recorder.mode))a.root.recorder.stopReplay();else if("recording"===(null===(t=a.root)||void 0===t?void 0:t.recorder.mode)){var r;null===(r=a.root)||void 0===r||r.recorder.stopRecord()}"replaying"===c.mode?c.stopReplay():"recording"===c.mode&&c.stopRecord()}))}),[a,c]);(0,o.useEffect)((function(){return(0,m.EH)((function(){var e;"recording"===(null===(e=a.root)||void 0===e?void 0:e.recorder.mode)?E(f(a.root.recorder.recording)):"recording"===c.mode&&E(f(c.recording))}))}),[a,c]);var j=c.mode,P=null!==(t=null===(r=a.root)||void 0===r?void 0:r.recorder.mode)&&void 0!==t?t:null,M=!(!j&&!P);return o.createElement("main",{className:"_36gOC-i5-nIaj7-umkEyNB"},o.createElement(u,{className:"_3hT_-JRLvkaGJKPwedxSKU",controller:a}),o.createElement("object",{className:"nEZYlMCiWu60Ux6cdCvZW",ref:c.setGame,type:"application/x-shockwave-flash",data:"/game.swf",width:"800",height:"500"},o.createElement("param",{name:"wmode",value:"direct"}),o.createElement("param",{name:"allowScriptAccess",value:"always"})),o.createElement("div",{className:"_17yZ1xjYjJOPkA4eyYSAhF"},o.createElement("div",{className:"_24rBSCZgtHbDMUJ1JX-3bC"},o.createElement("label",{htmlFor:"level",className:"_3WYaK5utMJ87_r6YqO_-7e"},"Level"),o.createElement("input",{id:"level",className:"_26pTsYi5yPxold0TtZHYkL",type:"number",min:1,max:200,value:v,onChange:k})),o.createElement("button",{onClick:C,disabled:M},"Start record (HTML5)"),o.createElement("button",{onClick:N,disabled:M},"Start record (SWF)"),o.createElement("button",{onClick:R,disabled:M},"Start replay"),o.createElement("button",{onClick:x,disabled:!M},"Stop")),o.createElement("div",{className:"_2ygJjiMCvJzZGS71ZUi7E3"},o.createElement("textarea",{className:"yiICqjLwMH84EMP_RPTMa",value:b,disabled:M,onChange:S}),o.createElement(w,{source:null===(n=a.root)||void 0===n?void 0:n.recorder}),o.createElement(w,{source:c})))})),N=function(){function e(t){y()(this,e),S()(this,"root",null),this.isRecorderMode=t,(0,m.ky)(this,{root:m.LO.ref})}return E()(e,[{key:"setRoot",value:function(e){this.root=e}},{key:"onGameStarted",value:function(){var e;this.isRecorderMode&&(null===(e=this.root)||void 0===e||e.recorder.skipToSPMenu())}}]),e}();const R=function(){var e=(0,o.useState)((function(){var e=new URLSearchParams(window.location.search);return new N(!!e.get("recorder"))})),t=l()(e,1)[0];return t.isRecorderMode?o.createElement(C,{controller:t}):o.createElement(d,{controller:t})};n.render(o.createElement(o.StrictMode,null,o.createElement(R,null)),document.getElementById("root"))}},a={};function l(e){if(a[e])return a[e].exports;var t=a[e]={exports:{}};return n[e](t,t.exports,l),t.exports}l.m=n,l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,r)=>(l.f[r](e,t),t)),[])),l.u=e=>"static/game.cfe4c591.js",l.miniCssF=e=>"static/"+{179:"main",736:"vendor",757:"game"}[e]+"."+{179:"undefine",736:"31d6cfe0",757:"e92fa4fa"}[e]+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="@exit-path/game:",l.l=(r,o,n)=>{if(e[r])e[r].push(o);else{var a,i;if(void 0!==n)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var u=c[s];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){a=u;break}}a||(i=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-webpack",t+n),a.src=r),e[r]=[o];var d=(t,o)=>{a.onerror=a.onload=null,clearTimeout(m);var n=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(o))),t)return t(o)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),i&&document.head.appendChild(a)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e+"../"})(),r=e=>new Promise(((t,r)=>{var o=l.miniCssF(e),n=l.p+o;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=(l=r[o]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(n===e||n===t))return l}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){var l;if((n=(l=a[o]).getAttribute("data-href"))===e||n===t)return l}})(o,n))return t();((e,t,r,o)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=a=>{if(n.onerror=n.onload=null,"load"===a.type)r();else{var l=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=l,n.parentNode.removeChild(n),o(i)}},n.href=t,document.head.appendChild(n)})(e,n,t,r)})),o={179:0},l.f.miniCss=(e,t)=>{o[e]?t.push(o[e]):0!==o[e]&&{757:1}[e]&&t.push(o[e]=r(e).then((()=>{o[e]=0}),(t=>{throw delete o[e],t})))},(()=>{l.b=document.baseURI||self.location.href;var e={179:0},t=[[8530,736]];l.f.j=(t,r)=>{var o=l.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>{o=e[t]=[r,n]}));r.push(o[2]=n);var a=l.p+l.u(t),i=new Error;l.l(a,(r=>{if(l.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",i.name="ChunkLoadError",i.type=n,i.request=a,o[1](i)}}),"chunk-"+t)}};var r=()=>{};function o(){for(var r,o=0;o<t.length;o++){for(var n=t[o],a=!0,i=1;i<n.length;i++){var c=n[i];0!==e[c]&&(a=!1)}a&&(t.splice(o--,1),r=l(l.s=n[0]))}return 0===t.length&&(l.x(),l.x=()=>{}),r}l.x=()=>{l.x=()=>{},a=a.slice();for(var e=0;e<a.length;e++)n(a[e]);return(r=o)()};var n=o=>{for(var n,a,[c,s,u,d]=o,m=0,v=[];m<c.length;m++)a=c[m],l.o(e,a)&&e[a]&&v.push(e[a][0]),e[a]=0;for(n in s)l.o(s,n)&&(l.m[n]=s[n]);for(u&&u(l),i(o);v.length;)v.shift()();return d&&t.push.apply(t,d),r()},a=self.webpackChunk_exit_path_game=self.webpackChunk_exit_path_game||[],i=a.push.bind(a);a.push=n})(),l.x()})();
//# sourceMappingURL=main.c872a935.js.map